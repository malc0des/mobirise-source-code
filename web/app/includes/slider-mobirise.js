var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,e){a instanceof String&&(a=String(a));for(var h=a.length,f=0;f<h;f++){var n=a[f];if(b.call(e,n,f,a))return{i:f,v:n}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,e){a!=Array.prototype&&a!=Object.prototype&&(a[b]=e.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,e,h){if(b){e=$jscomp.global;a=a.split(".");for(h=0;h<a.length-1;h++){var f=a[h];f in e||(e[f]={});e=e[f]}a=a[a.length-1];h=e[a];b=b(h);b!=h&&null!=b&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,e){return $jscomp.findInternal(this,a,e).v}},"es6","es3");$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};
$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function a(e){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(e||"")+"_"+b++,e)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var e=0,h={next:function(){if(e<a.length){var f=e++;return{value:b(f,a[f]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
defineM("sliders",function(a,b){function e(a){return"false"===a?!1:(a=a.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(&\S+)?/))&&/youtu\.?be/g.test(a[3])?"youtube":a&&/vimeo/g.test(a[3])?"vimeo":!1}function h(a){return"false"===a?!1:(a=a.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(&\S+)?/))?a[6]:!1}
function f(a,d){return"https://img.youtube.com/vi/"+a+"/"+(d||"")+"default.jpg"}function n(a,d){var c=new XMLHttpRequest;c.open("GET","https://vimeo.com/api/v2/video/"+a+".json",!0);c.onreadystatechange=function(){if(4===this.readyState&&200<=this.status&&400>this.status){var a=JSON.parse(this.responseText);d(a[0].thumbnail_large,a[0].thumbnail_small)}};c.send();c=null}function v(k){var d=b.$template.find("[data-app-component-id="+k._id+"] > .app-component-content section").find("[mbr-carousel]").attr("mbr-carousel");
d&&b.$body.find("#edit-component-params").find(".image-tabs li:not(.add-item)").each(function(c,b){var g=k._params[d][c];g&&g.playVideo&&(c=e(g.videoUrl),(g=h(g.videoUrl))&&("youtube"===c?a(b).css("background-image","url("+f(g)+")"):n(g,function(d,c){a(b).css("background-image","url("+c+")")})))})}function t(k){var d=b.$template.find("[data-app-component-id="+k._id+"] > .app-component-content section [mbr-carousel]");if(d.length&&k._params){var c=d.attr("mbr-carousel");a(k._params[c]).each(function(c,
g){g=d.find(".carousel-item").eq(c);if(this.playVideo){var f=e(this.videoUrl),l=h(this.videoUrl),p=a('<div class="mbr-background-video-preview"></div>').css({display:"none",backgroundSize:"cover",backgroundPosition:"center"});b.isSecondaryComponent(k)?(d.find(".carousel-item").eq(c).find(".container-slide").parent().find(".mbr-background-video-preview").remove(),d.find(".carousel-item").eq(c).find(".container-slide").before(p)):d.find(".carousel-item").eq(c).find(".mbr-overlay").before(p);"youtube"===
f?u(l).done(function(a){d.find(".carousel-item").eq(c).find(".mbr-background-video-preview").css("background-image","url("+a+")").show()}):"vimeo"===f&&n(l,function(a,b){d.find(".carousel-item").eq(c).find(".mbr-background-video-preview").css("background-image","url("+a+")").show()});g.find(".image_wrapper img").css("opacity","0");g.find(".image_wrapper .mbr-overlay").css("display","none")}else g.find(".mbr-background-video-preview").remove(),g.css("background-image",'url("'+this.image+'")'),g.find(".image_wrapper img").css("opacity",
"1"),this.overlay&&g.find(".image_wrapper .mbr-overlay").css("display","block")})}}var u=function(){var b={};return function(d){var c=a.Deferred();d in b?b[d]?c.resolve(b[d]):c.reject("Preview image not found."):a("<img>").on("load",function(){if(120===(this.naturalWidth||this.width)){var a=this.src.split("/").pop();switch(a){case "maxresdefault.jpg":this.src=this.src.replace(a,"sddefault.jpg");break;case "sddefault.jpg":this.src=this.src.replace(a,"hqdefault.jpg");break;case "hqdefault.jpg":this.src=
this.src.replace(a,"default.jpg");break;default:b[d]=null,c.reject("Preview image not found.")}}else c.resolve(b[d]=this.src)}).attr("src",f(d,"maxres"));return c}}();b.regExtension({name:"sliders",events:{load:function(){var k=this;k.on("preparedComponentParams",function(d){d=k.$template.find("[data-app-component-id="+d+"] > .app-component-content section [mbr-carousel]");var c=d.find(".carousel-item.active").index();d.length&&a(".image-tabs .images ul li").eq(c).click()});k.Core.on("loadedComponent",
function(d,c,b,e){t(d);a(document).off("sortstop").on("sortstop",function(){t(d)})});k.Core.on("addComponentParamsTab",function(a){a=k.Core.getComponent(a);t(a)});k.Core.addFilter("changeComponentParams",function(d,c,p,g){var m=k.$template.find("[data-app-component-id="+g+"] > .app-component-content section [mbr-carousel]"),l=m.attr("mbr-carousel");if(c===l&&(c=Object.keys(d),1===c.length&&(c=d[c[0]],"playVideo"in c||"videoUrl"in c))){var q=k.$body.find("#edit-component-params").find(".image-tabs li.active"),
r=p[l][q.index()];p=e(r.videoUrl);l=h(r.videoUrl);"playVideo"in c&&(c.playVideo?(m.find(".carousel-item.active .image_wrapper img").css("opacity","0"),m.find(".carousel-item.active .image_wrapper .mbr-overlay").css("display","none"),l&&(r=a('<div class="mbr-background-video-preview"></div>').css({display:"none",backgroundSize:"cover",backgroundPosition:"center"}),b.isSecondaryComponent(g)?a(".container-slide",m.find(".carousel-item.active")).before(r):a(".mbr-overlay, .container-slide",m.find(".carousel-item.active")).before(r),
"youtube"===p?(q.css("background-image","url("+f(l)+")"),u(l).done(function(a){m.find(".carousel-item.active .mbr-background-video-preview").css("background-image","url("+a+")").show()})):n(l,function(a,b){q.css("background-image","url("+b+")");m.find(".carousel-item.active .mbr-background-video-preview").css("background-image","url("+a+")").show()}))):(m.find(".carousel-item.active .image_wrapper img").css("opacity","1"),m.find(".carousel-item.active .image_wrapper .mbr-overlay").css("display","block"),
m.find(".carousel-item.active .mbr-background-video-preview").remove(),g=b.core2path(r.image),q.css("background-image",'url("'+g+'")')));"videoUrl"in c&&l&&("youtube"===p?(q.css("background-image","url("+f(l)+")"),u(l).done(function(a){m.find(".carousel-item.active .mbr-background-video-preview").css("background-image","url("+a+")").show()})):n(l,function(a,b){q.css("background-image","url("+b+")");m.find(".carousel-item.active .mbr-background-video-preview").css("background-image","url("+a+")").show()}))}return d})},
preparedComponentParams:function(a){a=b.Core.getComponent(a);v(a)}}})},["jQuery","mbrApp"]);
