var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,f,c){a instanceof String&&(a=String(a));for(var g=a.length,e=0;e<g;e++){var k=a[e];if(f.call(c,k,e,a))return{i:e,v:k}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,f,c){a!=Array.prototype&&a!=Object.prototype&&(a[f]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,f,c,g){if(f){c=$jscomp.global;a=a.split(".");for(g=0;g<a.length-1;g++){var e=a[g];e in c||(c[e]={});c=c[e]}a=a[a.length-1];g=c[a];f=f(g);f!=g&&null!=f&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:f})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
defineM("app-plugin-progress",function(a,f,c){var g=!1,e=0,k=0,b=!1,p='<div class="modal fade no-select plugin-progress-modal" id="appProgressModal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static">  <div class="modal-dialog">\t<div class="modal-content">\t  <div class="modal-header">\t\t<button type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>\t\t<h4 class="modal-title">'+c("Progress")+'</h4>\t  </div>\t  <div class="modal-body">       <div class="progressText">'+
c("Publishing...")+'</div>\t\t<br>\t\t<div class="exportingText"></div>\t\t<br>\t\t<div class="progress" style="margin-bottom: 0;">\t\t  <div class="progress-bar progress-bar-striped progress-bar-success active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div>\t\t</div>\t  </div>\t  <div class="modal-footer">\t\t<button type="button" class="btn btn-default">'+c("Cancel")+"</button>\t  </div>\t</div>  </div></div>";f.regExtension({name:"plugin-progress",
global:{$progressModal:a(p).insertBefore("#insertBefore"),progressBar:function(h,l,m,n){var d=this;if("object"===typeof h)void 0!==h.progress?d.$progressModal.find(".progress-bar").css("width",h.progress+"%"):b=h,n?d.$progressModal.addClass("passive"):d.$progressModal.removeClass("passive");else if("number"===typeof h&&isFinite(h))e=h,k=0;else switch(h){case "show":n?d.$progressModal.addClass("passive"):d.$progressModal.removeClass("passive");d.progressBar(0);d.progressBar("");d.$progressModal.appendTo(d.$body).modal({keyboard:!1});
l&&d.$progressModal.find(".modal-title").html(l);m&&(" "===m?d.$progressModal.find(".progressText").remove():d.$progressModal.find(".progressText").html(m));break;case "hide":k=e=0;d.$progressModal.modal("hide");b=!1;break;case "isCanceled":return!d.$progressModal.is(":visible");case "stop":b&&b.pause&&b.pause();if(a(".plugin-progress-modal-stop, .plugin-progress-modal-error").length)break;bootbox.dialog({message:l||c("Do you want to stop?"),className:"plugin-progress-modal-stop",closeButton:!1,buttons:{cancel:{label:c("Stop"),
className:"btn-default",callback:function(){b&&(b.exit&&b.exit(),b=!1);d.progressBar("hide");f.fire("cancelDownloadAddon")}},confirm:{label:c("Continue"),className:"btn-primary",callback:function(){b&&b.resume&&b.resume()}}}});break;case "error":if(!b)break;if(g){b.pause();setTimeout(function(){b.resume()},0);break}a(".plugin-progress-modal-stop").remove();b.pause();bootbox.dialog({message:l||c("Unknown error"),className:"plugin-progress-modal-error",closeButton:!1,buttons:{cancel:{label:c("Cancel"),
className:"btn-default",callback:function(){b&&(b.exit&&b.exit(),b=!1);d.progressBar("hide")}},all:{label:c("Ignore Errors"),className:"btn-default",callback:function(){g=!0;b&&b.resume&&b.resume()}},confirm:{label:c("Continue"),className:"btn-primary",callback:function(){b&&b.resume&&b.resume()}}}});break;default:l=0,0===k&&(g=!1),0!==e&&(k++,l=Math.min(100,100*k/e)),d.$progressModal.find(".exportingText").html(h),d.$progressModal.find(".progress-bar").css("width",l+"%").attr("aria-valuenow",l)}}},
events:{load:function(){var a=this,b=function(){a.progressBar("stop",c("Do you want to stop?"))};a.$progressModal.on("click",".modal-footer button, .modal-header button",b).closest("body").on("keydown",function(c){27==c.which&&a.$progressModal.is(":not(.passive):visible")&&b()})}}})},["jQuery","mbrApp","TR()"]);
