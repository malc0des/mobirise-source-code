var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,d,c){a instanceof String&&(a=String(a));for(var b=a.length,e=0;e<b;e++){var l=a[e];if(d.call(c,l,e,a))return{i:e,v:l}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,c){a!=Array.prototype&&a!=Object.prototype&&(a[d]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,d,c,b){if(d){c=$jscomp.global;a=a.split(".");for(b=0;b<a.length-1;b++){var e=a[b];e in c||(c[e]={});c=c[e]}a=a[a.length-1];b=c[a];d=d(b);d!=b&&null!=d&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");$jscomp.owns=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)};
$jscomp.polyfill("Object.values",function(a){return a?a:function(a){var d=[],b;for(b in a)$jscomp.owns(a,b)&&d.push(a[b]);return d}},"es8","es3");
defineM("app-advertising",function(a,d,c){function b(b){var c=a.Deferred();Bridge.download2(b,function(a){if(a){var f=Bridge.splitPath(b).ext||"jpg",g=d.getAccountPath()+"/addons/advertising/img."+f;Bridge.moveLocal(a,g,function(){return c.resolve(g)})}});return c.promise()}function e(d){var c=a.Deferred(),e=a("<div>@MESSAGE@</div>".replace("@MESSAGE@",d.message.join("\n"))),f=e.find("img"),g="";f.length?(f.parent("a")&&(g=f.parent("a").attr("href")),b(f.attr("src")).then(function(b){f.attr("src",
b);b=RegExp("^<div>([\\w\\W]+)"+(f.parent("a")||f)[0].outerHTML+"([\\w\\W]+)?</div>$").exec(e[0].outerHTML);var h=/<a.*?class.*?btn.*?>.*?(?:<\/a>)/.exec(b[2])||"";if(h){var k=a(h[0]);k.text("");k.append('<i class="mbr-icon-angle-right"></i>');h=k[0].outerHTML;g.length||(g=k.attr("href"))}else g.length&&(h='<a class="btn-primary btn" href="'+g+'" ><i class="mbr-icon-angle-right"></i></a>');b="<div>"+(f.parent("a")||f)[0].outerHTML+'<div class="text">'+b[1]+"</div><h4>"+d.title+"</h4>"+h+"</div>";
b={title:d.title,message:b};g.length&&(b.url=g);c.resolve(b)})):c.reject();return c.promise()}d.regExtension({name:"app-advertising",global:{},events:{load:function(){d.on("sidebarOpened",function(){this.$body.find(".advertising-block").removeAttr("title").on("mouseenter",function(){a(this).closest("body").find(".tooltipster-base").addClass("hide")}).on("mouseleave",function(){a(this).closest("body").find(".tooltipster-base").removeClass("hide")})});this.AddonsRegistry.ready().then(function(b){Object.values(b._addons).some(function(a){return a.isPaid()&&
a.isPremium()||!a.isSystem()&&!b.isSynchronized()})||Bridge.getSettings("advertisingTime",function(b){var c=a.Deferred(),f=(new Date).toISOString().split("T")[0];Date.parse(b)!==Date.parse(f)?Bridge.http("https://mobirise.com/news.json?hash="+Math.random(),{success:function(a){(a=JSON.parse(a).find(function(a){return"menu"===a.id}))?e(a).then(function(a){Bridge.setSettings("advertising",JSON.stringify(a));Bridge.setSettings("advertisingTime",f);c.resolve(a)},function(){c.reject()}):c.reject()},error:function(a){c.reject()}}):
c.reject();c.then(function(a){return a},function(){var b=a.Deferred();Bridge.getSettings("advertising",function(a){b.resolve(JSON.parse(a))});return b.promise()}).then(function(a){d.addSidebarItem(a.title,{description:"Advertising",className:"advertising-block",subTitle:"advertising",hover:!1,customHTML:a.message,onclick:a.url?function(b){b.preventDefault();d.openUrl(a.url)}:null})})})})}}})},["jQuery","mbrApp","TR()"]);
