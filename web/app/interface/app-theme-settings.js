var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,a,k){b instanceof String&&(b=String(b));for(var l=b.length,n=0;n<l;n++){var v=b[n];if(a.call(k,v,n,b))return{i:n,v:v}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,k){b!=Array.prototype&&b!=Object.prototype&&(b[a]=k.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,a,k,l){if(a){k=$jscomp.global;b=b.split(".");for(l=0;l<b.length-1;l++){var n=b[l];n in k||(k[n]={});k=k[n]}b=b[b.length-1];l=k[b];a=a(l);a!=l&&null!=a&&$jscomp.defineProperty(k,b,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");$jscomp.arrayIteratorImpl=function(b){var a=0;return function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}}};
$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(b,a){this.$jscomp$symbol$id_=b;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:a})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function b(k){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(k||"")+"_"+a++,k)}var a=0;return b}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.asyncIterator;b||(b=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};
$jscomp.iteratorFromArray=function(b,a){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var k=0,l={next:function(){if(k<b.length){var n=k++;return{value:a(n,b[n]),done:!1}}l.next=function(){return{done:!0,value:void 0}};return l.next()}};l[Symbol.iterator]=function(){return l};return l};$jscomp.polyfill("Array.prototype.values",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(a,b){return b})}},"es8","es3");
defineM("app-theme-settings",function(b,a,k,l){function n(a,b){function c(){if(d=!!g)a.apply(g.this,g.args),g=null,setTimeout(c,b)}var d,g;return function(){g={this:this,args:arguments};d||c()}}function v(){a.fire("initThemeSettings");a.projectSettings.theme=a.projectSettings.theme||{};void 0!==a.projectSettings.theme.settings&&(a.theme.params.theme.settings=a.projectSettings.theme.settings);a.projectSettings.theme.name==a.theme.name&&(r=(new A(a.theme.params.theme.settings)).merge(a.projectSettings.theme.styling).onChange(function(b,
c){a.fire("changeThemeSettings",b,c)}),a.projectSettings.theme.styling=r.getRawVariables(),!r.isEmpty()||a.projectSettings.theme.settings)&&(a.ToogleThemeSettings=new B({selector:z.TOGGLE,visible:!0,target:new C({selector:z.BASE,settings:r,classNameOpen:x.OPEN,open:function(){a.fire("openThemeSettings")}})}))}function q(b){return a.escapeHtml(b)}var x={OPEN:"app-theme-settings-open",TOGGLE_VISIBLE:"app-theme-settings-toggle-visible"},z={BASE:"#theme-settings",TOGGLE:".app-theme-settings-toggle"},
r={},B=function(){function d(){h||(h=!0,b(a.iframe).on("click.settings.toggle",c.closeAll),a.on("sidebarOpened",c.closeAll),a.on("toggleComponents",c.closeAll),a.on("clickBody",function(a){if(!b(a.target).closest(".dropdownjs-ul").length){a=b(a.target).parents().add(a.target);for(var g=0;g<m.length;g++){var f=m[g],p=f.target&&f.target.getElm();if(f.$elm.filter(a).length||p&&(p.filter?p:b(p)).filter(a).length)return}c.closeAll()}}))}function c(a){d();a=a||{};if(!a.selector)throw Error("Unknown selector! For example: new Toggle({selector: '.btn-toggle'}).");
this.$elm=b(a.selector);a.target&&(this.target=a.target);a.visible&&this.show();(a=this.$elm.data("settings.toggle"))?(a=m.indexOf(a),m[0<=a?a:m.length]=this):m.push(this);this.$elm.data("settings.toggle",this);this.$elm.off("click.settings.toggle").on("click.settings.toggle",b.proxy(this.onClick,this))}var h=!1,m=[];c.prototype.setTarget=function(a){this.target=a;return this};c.prototype.open=function(){this.target&&(this.$elm.tooltipster("hide").tooltipster("content",k("Close")),this.target.open());
return this};c.prototype.close=function(){this.target&&(this.$elm.tooltipster("hide").tooltipster("content",this.$elm.data("tooltipster-initialTitle")),this.target.close(),"true"!==a.appSettings.showSiteStylesBtn&&a.$themeToggleBtn.css("visibility","hidden"));return this};c.prototype.onClick=function(){this.target&&(this.target.isOpen()?this.close():this.open())};c.prototype.show=function(){this.$elm.addClass(x.TOGGLE_VISIBLE);return this};c.prototype.hide=function(){this.$elm.removeClass(x.TOGGLE_VISIBLE);
return this};c.closeAll=function(){m.forEach(function(a){a.close()})};return c}(),C=function(){function d(){var c=function(a,b){b=b.map(function(a){return a.toUpperCase()});if(-1==b.indexOf(a.toUpperCase()))return!0};this.$elm.find('[data-setting-type^="color"] input').spectrum("destroy").spectrum({showButtons:!1,preferredFormat:"hex",showInput:!0,showPaletteOnly:!0,togglePaletteOnly:!0,togglePaletteMoreText:k("More")+" >",togglePaletteLessText:k("Less")+" <",maxSelectionSize:1,palette:a.getThemeColorsSet(7),
show:function(){m=this},move:function(a){b(this).val(a.toHexString()).trigger("change.settings.sidebar")},hide:function(b){if(b){var f;(f=a.projectSettings.theme.additionalSetColors)?c(b.toHexString(),f)&&c(b.toHexString(),a.getThemeColorsSet(7)[0])&&(7>f.length?f.push(b.toHexString()):(f.unshift(b.toHexString()),f.pop())):c(b.toHexString(),a.getThemeColorsSet(7)[0])?a.projectSettings.theme.additionalSetColors=[b.toHexString()]:a.projectSettings.theme.additionalSetColors=[]}}})}function c(){function c(b){var e=
"";b.title=b.title?k(b.title):b.title;switch(b.type){case "title":e+='<h4 class="app-layer-title">'+q(b.title)+"</h4>";break;case "subtitle":e+='<h5 class="app-layer-subtitle">'+q(b.title)+"</h5>";break;case "color":e+='<div class="app-layer-color" data-setting-name="'+b.var+'" data-setting-type="color"><label>'+q(b.title)+'</label><input class="mbr-color" type="text" value="'+q(f.get(b.var))+'"></div>';break;case "group":e+='<div class="app-layer-group'+(b["class"]?" app-layer-group-"+b["class"]:
"")+'" data-group-name="'+(b.name||"")+'">';b.title&&(e+="<label>"+q(b.title)+"</label>");for(var p in b.set)e+=c(b.set[p]);e+="</div>";break;case "colors":e+='<div class="app-layer-color" data-setting-type="colors"><label>'+q(b.title)+'</label><div class="app-layer-color-set">';for(p in b.set){var h=b.set[p].var;e+='<input type="text" class="mbr-color" name="'+h+'" value="'+q(f.get(h))+'"> '}e+="</div></div>";break;case "font":h=a.getAccesibleFonts();var g=f.get(b.var);e+='<div class="app-layer-font fonts dropdownjs-add" data-setting-name="'+
b.var+'" data-setting-type="font">';b.title&&(e+="<label>"+q(b.title)+"</label>");e+='<select class="form-control">';for(p in h){var d=h[p];e+='<option value="'+d.name+'"'+(d.name==g?" selected":"")+">"+d.name+"</option>"}e+="</select></div>";break;case "range":g=f.get(b.var);e+='<div class="app-layer-range" data-setting-type="range" data-setting-name="'+b.var+'">'+(b.title?"<label>"+q(b.title)+"</label>":"")+'<input type="text" class="form-control" name="'+b.var+'"  data-min="'+(b.min||0)+'" data-max="'+
(b.max||100)+'" data-step="'+(b.step||1)+'" value="'+(g||0)+'"></div>';break;case "select":g=f.get(b.var);e+='<div class="app-layer-select dropdownjs-add" data-setting-name="'+b.var+'" data-setting-type="select">';b.title&&(e+="<label>"+q(b.title)+"</label>");e+='<select class="form-control">';for(p in b.values)e+='<option value="'+b.values[p]+'"'+(b.values[p]==g?" selected":"")+">"+q(b.values[p])+"</option>";e+="</select></div>";break;case "switch":e+='<div class="app-layer-checkbox togglebutton" data-setting-name="'+
b.var+'" data-setting-type="switch"><label><input type="checkbox"'+(f.get(b.var)?" checked":"")+'><span class="toggle pull-right"></span>'+q(b.title)+"</label></div>"}e&&b.groupName&&(e='<div data-group-name="'+q(b.groupName)+'">'+e+"</div>");return e}var h="",f=this.settings;this.$elm.find('[data-setting-type^="color"] input').spectrum("destroy");f.getSource().forEach(function(b){h+=c(b)});this.$elm.find(".app-layer-cont").html(h);this.$elm.off("change.settings.sidebar").on("change.settings.sidebar",
"input, select",function(c){c=b(this);var e=c.closest("[data-setting-type]"),h=e.attr("data-setting-name"),g=c.is('[type="checkbox"]')?c.prop("checked"):c.val();"colors"==e.attr("data-setting-type")&&(h=c.attr("name")||"");f.set(h,g)&&a.Core.destroySummernote()});d.call(this);this.$elm.find(".app-layer-select select, .app-layer-font select").each(function(){var a=b(this);a.dropdown({absolutePos:!0,align:"right"});var c=a.next(".dropdownjs");a.off("change").on("change",function(e){e=b(e.target);e.val()&&
e.val().length&&(a.attr("multiple")?a.dropdown("_select",c,a.find(":selected")):(e=a.find(":selected").length?a.find(":selected").last():a.find("option, li").first(),a.dropdown("select",c,e.val())))})});this.$elm.find(".app-layer-font .dropdownjs").each(function(c){c=b(this).data("select");c=b(c.data("dropdownjs-ul"));c.find("li").each(function(){var c=a.getFont(b(this).attr("value"));b(this).css("font-family",c.css)});c.addClass("fonts-dropdownjs")});this.$elm.find(".app-layer-range input").each(function(){a.initPopoverRange(this)})}
function h(a){a=a||{};if(!a.selector)throw Error("Unknown selector! For example: new Sidebar({selector: '.my-sidebar', ...}).");if(!a.settings)throw Error("Settings not found! For example: new Sidebar({settings: new Settings({}), ...}).");if(!a.classNameOpen)throw Error("Unknown class name for open/close sidebar! For example: new Sidebar({classNameOpen: 'sidebar-opened', ...}).");this.$elm=b(a.selector);this.$elm.data("settings.sidebar",this);this.settings=a.settings;this.callbacks={open:a.open};
this.classNameOpen=a.classNameOpen;c.call(this)}var m;a.on("sidebarOpened",function(){m&&b(m).spectrum("hide")});h.prototype.isOpen=function(){return a.$body.hasClass(this.classNameOpen)};h.prototype.open=function(){this.callbacks.open&&this.callbacks.open();a.$body.addClass(this.classNameOpen);d.call(this);return this};h.prototype.close=function(){a.$body.removeClass(this.classNameOpen);return this};h.prototype.getElm=function(){return this.$elm};return h}(),A=function(){function a(a){function c(a,
b){switch(a.type||b){case "color":a.default=a.default||"#000000";break;case "switch":a.default=!!a.default;break;case "range":a.default=a.default||0;break;default:a.default=a.default||""}w[a.var]=a.default;m[a.var]=a.type||b}var m=this._types={},g=this._source=[],w=this._variables={};if(b.isArray(a))for(var f=0;f<a.length;f++){var d=a[f];switch(d.type){case "title":case "subtitle":g.push(d);break;case "group":var e=d.set;if(b.isArray(e)&&d.set.length){d.set=[];for(var u=0;u<e.length;u++){var t=e[u];
t&&t.var&&(c(t),d.set.push(t))}g.push(d)}break;case "colors":e=d.set;if(b.isArray(e)&&d.set.length){d.set=[];for(u=0;u<e.length;u++)(t=e[u])&&t.var&&(c(t,"color"),d.set.push(t));g.push(d)}break;default:d.var&&(c(d),g.push(d))}}}a.prototype.onChange=function(a){this._onChange=a;return this};a.prototype.set=function(a,b){return a in this._variables&&this._variables[a]!=b?(this._variables[a]=b,this._onChange&&this._onChange(a,b),!0):!1};a.prototype.get=function(a){return a in this._variables?this._variables[a]:
null};a.prototype.merge=function(a){a=a||{};for(name in this._variables)name in a&&(this._variables[name]=a[name]);return this};a.prototype.getSource=function(){return this._source};a.prototype.getVariables=function(){var a=[];for(name in this._variables)a.push({name:name,type:this._types[name],value:this._variables[name]});return a};a.prototype.getRawVariables=function(){return this._variables};a.prototype.isEmpty=function(){return 0==this._source.length};return a}(),y=function(){function a(b){if(this._isValid=
a.isValid(b))this._name=b.substr(1)}a.isValid=function(a){return"string"==typeof a&&/^@[-a-zA-Z0-9_]+$/.test(a)};a.prototype.getName=function(){return this._name};a.prototype.isValid=function(){return this._isValid};a.prototype.eval=function(){return this._isValid&&r.get?r.get(this._name):null};return a}();(function(){function d(a){var c=b.Deferred();l.loadLocalFile(a,function(a){c.resolve(a)});return c}function c(){a.Core.renderComponentsStyles()}var h,m="",g=[null];a.on("changeThemeSettings",n(c,
100));a.on("addonLoaded",function(b,c){!b.theme&&b.themeParams&&b.themeParams.customLESS&&g.push(d(a.getAddonDir(c.name)+"/"+b.themeParams.customLESS).then(function(a){return"\n\n// addon: "+c.name+"\n"+a}))});a.on("loadedProject",function(){var w=a.theme.params.theme.customLESS;h=!1;g[0]=w?d(a.theme.pathExport+"/"+w):"";b.when.apply(b,g).done(function(){m=[].join.call(arguments,"");h&&c()})});a.on("coreLoad",function(){function c(b,c){var e="",h="",g=[],f="",d="*"===b;r.getVariables&&r.getVariables().forEach(function(b){f+=
"@"+b.name+": ";"font"==b.type?(b=a.getFont(b.value),f+=b.css,b.url&&(a.isAMP()?h+="@import url("+b.url+"&display=swap);":c&&g.push(b.url))):f+=b.value;f+=";\n"});b=b||"";if(d||0<=b.indexOf("imports"))e+=h;if(d||0<=b.indexOf("variables"))e+=f;if(d||0<=b.indexOf("rules"))b=a.applyFilter("getCustomLessText",m),void 0!==a.projectSettings.theme.dynamicStyles&&(b=a.projectSettings.theme.dynamicStyles),e+=b.replace(/^\s+/,"");!a.isAMP()&&c&&a.fire("getPublishFonts",g);return e}function f(b){return function(c,
e){c=c.toCSS();e=e.toCSS();switch(b){case "==":return a.iwindow.less.tree.Keyword[c==e?!0:!1];case "<":return a.iwindow.less.tree.Keyword[c<e?!0:!1];case "<=":return a.iwindow.less.tree.Keyword[c<=e?!0:!1];case ">":return a.iwindow.less.tree.Keyword[c>e?!0:!1];case ">=":return a.iwindow.less.tree.Keyword[c>=e?!0:!1]}}}var g=a.iwindow.less;(function(){var b,f=a.isAMP();a.on("runPublish",function(){b=!0});a.Core.addFilter("beforeRenderStyles",function(a,e,g){h=!0;g?(e=c(b?"*":"variables",g),b=f?!0:
!1):e=c("variables, rules");return e+a});a.Core.addFilter("afterRenderStyles",function(b,c,e){return e||void 0===a.projectSettings.theme.staticStyles?b:a.projectSettings.theme.staticStyles+b});a.Core.addFilter("beforeRenderStylesForComponent",function(a,b){return c("variables")+a})})();b.map({if:function(a,b,c){return"true"==a.value?b:c},eq:f("=="),lt:f("<"),lte:f("<="),gt:f(">"),gte:f(">="),includes:function(a,b){return g.tree.Keyword[0<=a.value.map(function(a){return a.value}).indexOf(b.value)?
"True":"False"]}},function(a,b){g.functions.functionRegistry.add(b,a)})})})();(function(){function d(a){if(!r.get)return a;var c=b.isArray(a)?[]:{},d;for(d in a){var g=a[d];0==g.indexOf("@")?c[d]=(new y(g)).eval()||"":c[d]=g}return c}a.addFilter("getThemeButtonColors",function(a){return d(a)});a.addFilter("getThemeLinkColors",function(a){return d(a)});a.addFilter("getThemeColorsSet",function(a){return d(a)})})();a.on("bridgeInit",function(){function b(a,b,c){var g=[a];if("object"==typeof g[0])for(;a=
g.pop();)for(var f in a)!1!==b.call(c,a[f],f,a)&&"object"==typeof a[f]&&g.push(a[f])}var c=function(){function a(a){var b=new y(a),c=function(){return b.eval()};c._variableName=b.getName();c.toString=function(){return c()};c.toJSON=function(){return a};c.toLESS=c.toJSON;return c}return function(c){b([c],function(b,c,f){if("_styles"==c)return!1;y.isValid(b)&&(f[c]=a(b))})}}();a.addFilter("loadingComponents",function(a,b){c(a);return a});a.on("load",function(){a.Core.cleanJSONPlease=function(a){return function(b,
c){if(!c&&"object"==typeof b)for(var d in b)"function"==typeof b[d]&&b[d]._variableName&&(b[d]=b[d].toJSON());return a.apply(this,arguments)}}(a.Core.cleanJSONPlease);a.Core.on("render",function(b){void 0===b&&c(a.Core.resultJSON[a.Core.currentPage].components)});var d={};(function(a){var c=a.set;a.set=function(a){b("object"==typeof a?a:[a],function(a,b,c){"function"==typeof a&&a._variableName&&(a=a._variableName,d[a]||(d[a]=[]),0>d[a].indexOf(this)&&d[a].push(this))},this);return c.call(this,a)}})(a.iwindow.rivets._.Binding.prototype);
a.on("changeThemeSettings",function(b,c){d[b]&&d[b].forEach(function(a){a.sync()});a.runSaveProject(!1,!0)});a.Core.on("removeComponent",function(a,b){for(name in d)d[name]=d[name].filter(function(b){return a!=b.view.models._id})});a.on("switchedPage",function(){d={}})})});(function(){var d=[];a.on("addonLoaded",function(a){!a.theme&&a.themeParams&&a.themeParams.settings&&(b.isArray(a.themeParams.settings)?d=d.concat(a.themeParams.settings):d.push(a.themeParams.settings))});a.on("addonsLoaded",function(){a.theme.params.theme=
a.theme.params.theme||{};a.theme.params.theme.settings=(a.theme.params.theme.settings||[]).concat(d)})})();a.regExtension({name:"theme-settings",global:{throttle:n,ToogleThemeSettings:0,$themeToggleBtn:b(".app-theme-settings-toggle"),getThemeSettings:function(a){return r.get?r.get(a):null},hasThemeSettings:function(a){return!!(a.theme&&a.theme.settings&&a.theme.settings.length)},openThemeSettings:function(){a.ToogleThemeSettings.open()},closeThemeSettings:function(){a.ToogleThemeSettings.close()},
redrawStyleChanger:function(){v();a.fire("redrawStyleChanger")}},events:{loadedProject:function(){v();a.fire("initSettingsSidebar")}}})},["jQuery","mbrApp","TR()","Bridge"]);
