var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(b){var a=0;return function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var a="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return a?a.call(b):$jscomp.arrayIterator(b)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,e){b!=Array.prototype&&b!=Object.prototype&&(b[a]=e.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,a,e,l){if(a){e=$jscomp.global;b=b.split(".");for(l=0;l<b.length-1;l++){var h=b[l];h in e||(e[h]={});e=e[h]}b=b[b.length-1];l=e[b];a=a(l);a!=l&&null!=a&&$jscomp.defineProperty(e,b,{configurable:!0,writable:!0,value:a})}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(b,a){this.$jscomp$symbol$id_=b;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:a})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function b(e){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(e||"")+"_"+a++,e)}var a=0;return b}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.asyncIterator;b||(b=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};
$jscomp.iteratorFromArray=function(b,a){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var e=0,l={next:function(){if(e<b.length){var h=e++;return{value:a(h,b[h]),done:!1}}l.next=function(){return{done:!0,value:void 0}};return l.next()}};l[Symbol.iterator]=function(){return l};return l};$jscomp.polyfill("Array.prototype.entries",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(a,b){return[a,b]})}},"es6","es3");
$jscomp.polyfill("Object.is",function(b){return b?b:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(b){return b?b:function(a,b){var e=this;e instanceof String&&(e=String(e));var h=e.length;b=b||0;for(0>b&&(b=Math.max(b+h,0));b<h;b++){var n=e[b];if(n===a||Object.is(n,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(b,a,e){if(null==b)throw new TypeError("The 'this' value for String.prototype."+e+" must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+e+" must not be a regular expression");return b+""};$jscomp.polyfill("String.prototype.includes",function(b){return b?b:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(b){function a(){this.batch_=null}function e(a){return a instanceof h?a:new h(function(b,e){b(a)})}if(b&&!$jscomp.FORCE_POLYFILL_PROMISE)return b;a.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})}this.batch_.push(a)};var l=$jscomp.global.setTimeout;a.prototype.asyncExecuteFunction=function(a){l(a,0)};a.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var e=a[b];a[b]=null;try{e()}catch(y){this.asyncThrow_(y)}}}this.batch_=null};a.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var h=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(u){b.reject(u)}};h.prototype.createResolveAndReject_=function(){function a(a){return function(h){e||(e=!0,a.call(b,h))}}var b=this,e=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};h.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof h)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};h.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(u){this.reject_(u);return}"function"==typeof b?
this.settleSameAsThenable_(b,a):this.fulfill_(a)};h.prototype.reject_=function(a){this.settle_(2,a)};h.prototype.fulfill_=function(a){this.settle_(1,a)};h.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};h.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)n.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var n=new a;h.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};h.prototype.settleSameAsThenable_=function(a,b){var e=this.createResolveAndReject_();try{a.call(b,e.resolve,e.reject)}catch(y){e.reject(y)}};h.prototype.then=function(a,b){function e(a,b){return"function"==typeof a?function(b){try{l(a(b))}catch(z){n(z)}}:b}var l,n,p=new h(function(a,b){l=a;n=b});this.callWhenSettled_(e(a,l),e(b,n));return p};
h.prototype.catch=function(a){return this.then(void 0,a)};h.prototype.callWhenSettled_=function(a,b){function e(){switch(h.state_){case 1:a(h.result_);break;case 2:b(h.result_);break;default:throw Error("Unexpected state: "+h.state_);}}var h=this;null==this.onSettledCallbacks_?n.asyncExecute(e):this.onSettledCallbacks_.push(e)};h.resolve=e;h.reject=function(a){return new h(function(b,e){e(a)})};h.race=function(a){return new h(function(b,h){for(var l=$jscomp.makeIterator(a),n=l.next();!n.done;n=l.next())e(n.value).callWhenSettled_(b,
h)})};h.all=function(a){var b=$jscomp.makeIterator(a),l=b.next();return l.done?e([]):new h(function(a,h){function n(b){return function(e){p[b]=e;u--;0==u&&a(p)}}var p=[],u=0;do p.push(void 0),u++,e(l.value).callWhenSettled_(n(p.length-1),h),l=b.next();while(!l.done)})};return h},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(b){return b?b:function(a,b){var e=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===b&&(b=e.length);b=Math.max(0,Math.min(b|0,e.length));for(var h=a.length;0<h&&0<b;)if(e[--b]!=a[--h])return!1;return 0>=h}},"es6","es3");
$jscomp.polyfill("Array.from",function(b){return b?b:function(a,b,l){b=null!=b?b:function(a){return a};var e=[],n="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if("function"==typeof n){a=n.call(a);for(var p=0;!(n=a.next()).done;)e.push(b.call(l,n.value,p++))}else for(n=a.length,p=0;p<n;p++)e.push(b.call(l,a[p],p));return e}},"es6","es3");
$jscomp.polyfill("Promise.allSettled",function(b){function a(a){return{status:"fulfilled",value:a}}function e(a){return{status:"rejected",reason:a}}return b?b:function(b){var h=this;b=Array.from(b,function(b){return h.resolve(b).then(a,e)});return h.all(b)}},"es_next","es3");$jscomp.findInternal=function(b,a,e){b instanceof String&&(b=String(b));for(var l=b.length,h=0;h<l;h++){var n=b[h];if(a.call(e,n,h,b))return{i:h,v:n}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");$jscomp.polyfill("String.prototype.startsWith",function(b){return b?b:function(a,b){var e=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var h=e.length,n=a.length;b=Math.max(0,Math.min(b|0,e.length));for(var p=0;p<n&&b<h;)if(e[b++]!=a[p++])return!1;return p>=n}},"es6","es3");
defineM("app-components-list",function(b,a,e,l){function h(){b(".app-template").removeClass("scaled");a.Core.$body.removeClass("scaled");a.Core.$template.removeClass("scaled");var d=a.Core.$body.closest("html").scrollTop();a.Core.$body.closest("html").stop().animate({scrollTop:d},0)}function n(b,c){c=c||function(){};a.getAddonsEx(function(d){for(var k=0;k<d.length;k++)if(d[k].name===b){a.readAddon(a.getAddonDir(b),c);return}c()},{type:"theme"})}function p(){var d=b.Deferred(),c=b.Deferred();a.AddonsRegistry.ready().then(function(b){var c=
[];b.entries().filter(function(a){return"theme"===a.get("type")}).forEach(function(b){"publish"!==b.get("status")&&a.checkM3Theme(b.get("name"))||c.push({name:b.get("name"),title:b.get("title"),isAMP:b.get("name").includes("amp"),local:"publish"===b.get("status")?b.isInstalled():!0,cover:b.isInstalled()?l.path2app(a.getAddonDir(b.get("name"))+"/cover.jpg"):b.get("largeCover")})});d.resolve(c)});d.then(function(b){b=a.isAMP()?b.filter(function(a){return a.isAMP}):b.filter(function(a){return!a.isAMP});
c.resolve(b)});return c.promise()}function G(){return new Promise(function(b){a.getAddonsEx(function(c){c=c.filter(function(b){return"theme"===b.type&&("publish"===b.status||"system"===b.status)&&a.isAMP()===(b.name.endsWith("amp")||"amp-blocks-theme"===b.name)});Promise.allSettled(c.map(function(b){return new Promise(function(c,d){b.installed&&b.premium===b.paid?l.getLocalJSON(a.getAddonDir(b.name)+"/params.json",function(a){a?c({themeName:b.name,blocks:a.components,local:!0}):d()}):fetch("https://my.mobirise.com/data/upload/thumbs/"+
b.name+"/params.json?hash="+Math.random()).then(function(a){return a.json()}).then(function(a){c({themeName:b.name,blocks:a.components,local:!1})}).catch(function(){d()})})})).then(function(a){a=a.reduce(function(a,b){"fulfilled"===b.status&&a.push(b.value);return a},[]);b(a)})},{type:"theme"},{server:!0})})}function u(a){if(a)return a.replace(/(^.)|((m4$)|(m5$)|(amp$))/g,function(a){return a.toUpperCase()})}function y(b,c,k){a.getComponentsKeywords().then(function(d){function f(){var b="";t.forEach(function(a){b+=
'<li class="col-xs-12 col-sm-6 col-md-4 col-lg-3 '+(a.local?"":"not-available")+'" data-layer="add-component">\n                            <a href="javascript:void(0)" data-component="'+a.name+'" data-component-once="'+a.once+'" data-search-tags="'+a.searchTags+'" data-theme="'+a.theme+'">\n                                <img src="'+a.thumb+'" alt="'+a.name+'">\n                                <div class="block-info">\n                                    <div class="block-info__theme-name-tag '+
(u(a.theme)?"":"hidden")+'">'+u(a.theme)+"</div>\n                                </div>\n                            </a>\n                        </li>"});if(c)c=c.replace(/\s/g,"_"),e.find('h5[data-group="'+c+'"]').next("ul").append(b);else{a.$componentsLayer.find(".app-layer-cont").find("h5:not(.search-group-name), .show-more-btn, .user-block-search, > ul > li").addClass("hidden");var d=e.find(".search-group-name"),f=e.find(".search-blocks-container");d.length&&f.length?(d.removeClass("hidden").text("Search for "+
g),f.removeClass("hidden").html(b)):e.append('\n                            <h5 class="search-group-name">Search for '+g+'</h5>\n                            <ul class="search-blocks-container">'+b+"</ul>\n                        ")}a.cleanOnceComponents();k.remove()}var g=a.$componentsLayer.find(".search-block-input").val().toLowerCase(),e=a.$componentsLayer.find(".app-layer-cont");if(c){var h={people:["team","testimonial","client"],numbers:["progress","counter","countdown","table"],news:["timeline",
"content"],list:["accordion","toggle","tabs"]};g=c.toLowerCase().replace(/_/g," ");var q=!1;var t=b.filter(function(b){g in h&&(q=h[g].some(function(a){return"table"===a&&b.searchTags.toLowerCase().startsWith("pricing")?!1:b.searchTags.toLowerCase().includes(a)}));return(q||b.searchTags.toLowerCase().includes(g))&&b.theme!==a.$componentsLayer.attr("data-theme")})}else t=b.filter(function(a){return a.searchTags.toLowerCase().includes(g)});if(t.length)return f();if(d){var r=[],x={},n;for(n in d)x.$jscomp$loop$prop$key$7=
n,d[x.$jscomp$loop$prop$key$7].map(function(a){return function(b){b.includes(g)&&r.push(a.$jscomp$loop$prop$key$7)}}(x)),x={$jscomp$loop$prop$key$7:x.$jscomp$loop$prop$key$7};t=b.filter(function(a){return r.length&&r.some(function(b){return a.searchTags.toLowerCase().includes(b)})})}if(t.length)return f();if(0===t.length){var I=function(){var c=[];a.presetsList.map(function(a){if(a.presetsList)for(var b in a.presetsList)a.presetsList[b].title.toLowerCase().includes(g)&&c.push(a.themeName)});0!==c.length&&
(t=b.filter(function(a){return c.includes(a.theme)}));return f()};0!==a.presetsList.length?I():a.getAddonsEx(function(b){b=b.filter(function(a){if(a.name.endsWith("m4")||a.name.endsWith("m5")||"mobirise5"===a.name)return a.name.endsWith("m4")||a.name.endsWith("m5")||"mobirise5"===a.name});Promise.all(b.map(function(b){return new Promise(function(c){if(b.installed&&b.paid&&!b.expired||l.isDev||"mobirise5"===b.name||"startm5"===b.name){var d=a.getAddonDir(b.name)+"/projects/list.json";l.getLocalJSON(d,
function(a){a?c({themeName:b.name,presetsList:a,local:!0}):c()})}else fetch("https://my.mobirise.com/data/upload/thumbs/"+b.name+"/projects/list.json").then(function(a){404===a.status?(console.log("No presets in "+b.name+" theme."),c()):a.json().then(function(a){c({themeName:b.name,presetsList:a,local:!1})}).catch(function(a){c()})}).catch(function(a){c()})})})).then(function(b){b=b.filter(function(a){return void 0!==a});b.length?(a.presetsList=b,I()):resolve(chosenTheme)})},{type:"theme"},{server:!0})}})}
function D(a){for(var b in a)this[b]=a[b]}var B,A=!0,E=!1,F=[],z="",v=[],J=function(a){return'<li class="show-more-btn col-xs-12 col-sm-6 col-md-4 col-lg-3">\n            <a href="javascript:void(0)" class="show-more-btn__fake-link">\n                <img src="">\n            </a>\n            <div class="show-more-btn__content">\n                <i class="mbr-icon-horizontal-ellipsis"></i>\n                <span class="show-more-btn__text">'+e("More $groupName$ Blocks").replace("$groupName$",a)+
"</span>\n            </div>\n        </li>"},K=function(d){var c="",k=a.getUserInfo(),g=b(d).attr("data-theme");d=g||a.$componentsLayer.attr("data-theme");var f=g||a.$componentsLayer.find(".blocks-theme-btn .blocks-theme-name").text();k&&k.email&&(c=k.email);k=a.AddonsRegistry.get(d);if(k.get("downloadURL")&&!k.isExpired()){var C=b(a.preloaderHTML);C.css({opacity:"0.8",transition:"0.2s"});a.$componentsLayer.find(".add-component-content").append(C);a.downloadAddon(k.toJSON()).done(function(c){g?(v=
[],a.$componentsLayer.find('[data-theme="'+g+'"]').parent().removeClass("not-available"),C.remove()):n(c.name,function(d){if(d.components){var f=a.getAddonDir(c.name),g=b.extend({},a.components);a.components=a.Core.components={};for(var k in g)g.hasOwnProperty(k)&&(g[k].alias||delete g[k]);for(var m in a.cachedTemplates)a.cachedTemplates.hasOwnProperty(m)&&(g[m]||delete a.cachedTemplates[m]);var h=[];d.components.forEach(function(b){h.push(a.readComponent2(b,f,d))});z="";F.forEach(function(a){a.name===
c.name&&(a.local=!0);z+='<div class="col-xs-6 col-sm-6 col-md-4 col-lg-3" data-name="'+a.name+'" data-local="'+a.local+'">\n                                            <div class="card-wrap">\n                                                <div class="card-img">\n                                                    <img src="'+a.cover+'">\n                                                </div>\n                                                <span class="card-title">'+a.title+"</span>\n                                            </div>\n                                        </div>"});
b.when.apply(null,h).then(function(){a.Core.components=a.components=b.extend(a.components,g);a.initComponentsPalette(function(){a.$componentsLayer.find(".add-component-filter").remove();a.createComponentsFilter();a.addComponentsFilterTab("Extension",e("Extensions"),e("Show Blocks From Extensions"));E=!0;C.remove()})})}})}).fail(function(){a.showError(e("Error add extension")+' "'+f+'"');a.$componentsLayer.find(".add-component-content .preloader").remove()})}else a.confirmDlg({message:e("The $extension$ theme isn't available for your account").replace("$extension$",
f?"<strong>"+u(f)+"</strong>":"")+(c?" "+c+"<br>":".<br>"),buttons:{cancel:{label:e("Cancel"),className:"btn-default"},confirm:{label:e("Download $theme title$").replace("$theme title$",f),className:"btn-primary"}},callback:function(b){b&&a.openUrl("https://mobirise.com/extensions/kit/")}})};a.regExtension({name:"components-list",global:{components:{},getComponentHTML:function(b){return a.Core.getComponent(b)._customHTML},setComponentHTML:function(b,c){var d=a.Core.getComponent(b);d._customHTML=c;
var g=a.Core.getSecondaryComponent(d);g.isActualTemplate()||(c=a.$template.find("[data-app-component-id="+b+"] .app-component-content"),g=g.update().createElementFromTemplate(),a.Core.$window[0].rivets.unbind(c).bind(g,d),c.html(g),a.fire("loadedComponent",d,a.Core.currentPage,a.Core.$template,!1));a.Core.$template.find("[data-app-component-id="+b+"] .app-component-content > *").trigger("add.cards");a.runSaveProject(!1,!0);a.Core.fire("setComponentHTML",b)},$componentsLayer:b("#add-component"),$componentsToggleBtn:b(".app-components-toggle"),
readComponent:function(d){var c=this,k=b.Deferred();l.getLocalJSON(d+"/component.json",function(b){if("object"==typeof b){var f=[];b._path&&(f.push(b._path),delete b._path);f.push(b);c.loadComponents.apply(c,f);setTimeout(function(){k.resolve(!0)},0)}else a.addAppResource(d+"/component.js").then(function(){k.resolve(!0)})});return k.promise()},readComponent2:function(d,c,k){if("string"==typeof d)return a.readComponent(c+"/"+d);if("object"==typeof d){var g=d.name||d.path.split("/").pop();if(g in a.components)return;
var f="plugin"==k.type,e=d.path.replace(/\/.*$/,"");if(f&&k.minAppVersion&&0>l.versionCmp(l.version,k.minAppVersion)){console.log("Incompatible version of the application for the "+k.name+" component.");return}a.Core.components[g]=a.components[g]=new D(b.extend({name:g,alias:f&&k.name+(e?"/"+e:""),_tags:f&&["Extension"],scriptPath:c+"/"+d.path},d))}else console.warn("Wrong component "+d);return b.Deferred().resolve()},loadComponents:function(a,c,k){c||(c=a,a=void 0);c=this.applyFilter("loadingComponents",
c,a);this.fire("loadComponents",c,a);for(var d in c){var f=c[d];a&&(f.alias=a);f._tags=f._tags||[];f._tags.length||(a&&this.theme&&this.theme.name&&a.split("/")[0].toLowerCase()!=this.theme.name.toLowerCase()?f._tags.push("Extension"):f._tags.push("Theme"));if(f._inherit){var e=b.extend(!0,{},this.components[f._inherit]);if(e)for(var m in e)if("_params"===m){f[m]||(f[m]={});var h={},q;for(q in e[m]){var t=e[m][q];null!==f[m][q]&&(t["default"]="undefined"!==typeof f[m][q]?f[m][q]:t["default"],h[q]=
t)}f[m]=h}else f[m]="undefined"!==typeof f[m]?f[m]:e[m];else console.warn("Warning: not yet loaded parent block for component "+d+" _inherit "+f._inherit)}}this.components=this.applyFilter("loadComponents",b.extend(this.components,c));k&&this.initComponentsPalette();this.loadComponentTemplates(this.components);this.fire("loadedComponents",c)},addComponentToCore:function(b,c,k){var d=arguments;"menu"===k.attr("data-component-once")&&"true"===k.attr("data-app-always-top")?(c||(c={}),c.item=a.Core.resultJSON[a.Core.currentPage].components[0]._id.toString(),
c.where="before",d[1]=c):c&&"before"==c.where&&"menu"===a.Core.resultJSON[a.Core.currentPage].components[0]._once&&a.Core.resultJSON[a.Core.currentPage].components[0]._id==c.item&&!0===a.Core.resultJSON[a.Core.currentPage].components[0]._noDrag&&(c.where="after",d[1]=c);return this.getRealComponent(b).then(function(){a.Core.addComponent.apply(a.Core,d)})},getRealComponent:function(){var d={};a.on("loadedComponentTemplate",function(b){b in d&&d[b].resolve(a.components[b])});return function(c){"string"==
typeof c&&(c=a.components[c]);if(!(c instanceof D))return b.Deferred().resolve(c).promise();var k=c.name,g=a.components;if(!(k in d)||E&&!c.alias){d[k]=b.Deferred();var f=function(){if(a.isSecondaryComponent(c)){var b={};b[k]={_group:c._group,alias:c.alias,_isSecondary:c._isSecondary,typeCompatible:c.typeCompatible};c.alias?a.loadComponents(c.alias,b):a.loadComponents(b)}else a.readComponent(c.scriptPath)};c._inherit?this.getRealComponent(g[c._inherit]).then(f):f()}return d[k].promise()}}(),cachedTemplates:{},
loadComponentTemplates:function(d){var c=this;a.Core.components=d;b.when(function(){var k=b.Deferred(),g=[],f;for(f in d)d[f]instanceof D||f in c.cachedTemplates||function(f,k){c.cachedTemplates[f]="";var e=d[f].alias,q=a.$componentsLayer.attr("data-theme");k=e?a.getAddonDir(e)+"/"+(k||f)+"/template.html":q?a.getAddonDir(q)+"/components/"+(k||f)+"/template.html":c.theme.pathExport+"/components/"+(k||f)+"/template.html";var h=b.Deferred();l.loadLocalFile(k,function(b){b&&((d[f]._css||d[f]._js)&&a.Core.prepareComponentAssets(f),
c.cachedTemplates[f]=b);if(a.isSecondaryComponent(d[f])){var k=e?a.getAddonDir(e)+"/"+f+"/style.less":q?a.getAddonDir(q)+"/components/"+f+"/style.less":c.theme.pathExport+"/components/"+f+"/style.less";l.loadLocalFile(k,function(b){d[f]._styles={};a.objectifyCSS(b).then(function(a){d[f]._styles=a},function(a){a.filename=k;console.error(a)}).always(h.resolve)})}else h.resolve()});h.then(function(){c.fire("loadedComponentTemplate",f)});g.push(h)}(f,d[f]._inherit);b.when.apply(b,g).then(function(){k.resolve()}).fail(function(){k.resolve()});
return k.promise()}()).done(function(){c.fire("loadedComponentTemplates")})},initComponentsPalette:function(b){var c={},d;for(d in this.components){var g=this.components[d];c[g._group]||(c[g._group]={});c[g._group][d]=g}c=this.applyFilter("loadComponentsSorted",c);g="";for(d in c){g+="<h5 data-group="+d.replace(/\s/g,"_")+">"+e(d,"blocks")+"</h5>";g+='<ul class="row">';for(var f in c[d]){var h=c[d][f].alias,m=c[d][f].typeCompatible;if(void 0!=m){var w=void 0,q=void 0,t=a.theme.params.theme;if("string"==
typeof m)w=!!t["!"===m.charAt(0)?m.split("!")[1]:m],m="!"===m.charAt(0)?!w:w;else if("object"==typeof m){for(w in m)if(q=!!t["!"===m[w].charAt(0)?m[w].split("!")[1]:m[w]])break;m=!q}else m=void 0}if(m||void 0==m)w=a.$componentsLayer.attr("data-theme"),h=h?this.getAddonDir(h)+"/"+f+"/thumb.png":w?/^mobirise5|startm5$/.test(w)?l.path2app(this.getAddonDir(w))+"/components/"+f+"/thumb.png":this.getAddonDir(w)+"/components/"+f+"/thumb.png":this.theme.path+"/components/"+f+"/thumb.png",g+=this.generateComponentPaletteItemHtml(f,
h,null,{"component-once":c[d][f]._once},null,null,w)}g+="</ul>"}g=this.applyFilter("loadComponentsHTML",g);this.insertComponentPaletteHTML(g);b&&b();this.fire("initedComponentsPalette")},generateComponentPaletteItemHtml:function(a,b,k,g,f,e,h){var c="",d="",m="";f||(f="");if("object"==typeof g)for(var r in g)"filter"==r?m=" data-"+r+'="'+g[r]+'"':void 0!==g[r]&&(c+=" data-"+r+'="'+g[r]+'"');if("object"==typeof e)for(r in e)void 0!==e[r]&&(d+=" data-"+r+'="'+e[r]+'"');k||(k="");a='<li class="col-xs-12 col-sm-6 col-md-4 col-lg-3 '+
k+'" '+m+d+' data-layer="add-component"><a href="javascript:void(0)" data-component="'+a+'"'+c+'><img src="'+(b+'" alt="'+a+'">\n                    <div class="block-info">\n                        <div class="block-info__theme-name-tag ')+((u(h)?"":"hidden")+'">'+u(h)+"</div>\n                    </div></a>\n                ");return a+=f+"</li>"},insertComponentPaletteItem:function(b,c,e,g,f,h,m){c=a.generateComponentPaletteItemHtml(c,e,f,h);a.insertComponentPaletteHTML(c,b,m)},insertComponentPaletteHTML:function(b,
c,e,g){var d=a.$componentsLayer.find(".app-layer-cont");if(1===arguments.length)d.html(arguments[0]);else{e=e?' class="'+e+'"':"";g=g?'class="'+g+'"':"";var k=c.replace(/\s/g,"_");0==d.find('h5[data-group="'+k+'"]').length&&d.append('<h5 data-group="'+k+'" '+g+">"+c+"</h5><ul"+e+"></ul>");d=d.find('h5[data-group="'+k+'"]').next();d.is("ul")||(d=d.next());d.append(b)}},cleanOnceComponents:function(){var a=this.$componentsLayer.find("[data-component-once]").removeClass("inactive");a.find("> span").remove();
var b=this.Core.getPageComponents(),k;for(k in b){var g=!0===b[k]._once,f=!g&&b[k]._once;(g||f)&&a.filter(g?'[data-component="'+b[k]._name+'"]':'[data-component-once="'+b[k]._once+'"]').addClass("inactive").append("<span>"+e("Added")+"</span>")}this.fire("cleanOnceComponents",a)},dragComponent:function(){function d(a){var b=c.appElements.window.width-c.appElements.componentsLayer.width;b>c.appElements.iframe.width+0&&(b=c.appElements.iframe.width+0);return 0<a&&a<b}var c=this,e=["click"],g;for(g in e)(function(a,
b){var c=a.contentWindow["on"+b];a.contentWindow["on"+b]=function(d){c&&c(d);var f=document.createEvent("MouseEvents"),e=a.getBoundingClientRect();f.initMouseEvent(b,!0,!1,window,d.detail,d.screenX,d.screenY,d.clientX+e.left,d.clientY+e.top,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.button,null);a.dispatchEvent(f)}})(c.iframe,e[g]);var f=b('<div class="app-dragger">').append("<img>").appendTo("body"),h,m,l,q=b('<div class="app-component-divider">'),t=c.$template.find(".template .app-component"),r=
{item:void 0,where:void 0},x,n,p,u,v;c.$componentsLayer.on("mousedown touchstart","a[data-component]:not(.inactive)",function(d){A&&(d.stopPropagation(),d.preventDefault(),b(this).closest(".not-available").length?K(this):(u=1920<a.appElements.window.width?.5:.25,v=1/u,m=b(this).attr("data-component"),l=d.currentTarget,h=!0,f.find("img").attr("src",b(this).find("img").attr("src")),t=c.$template.find(".template .app-component"),p=c.appElements.iframe.height/2,c.$iframeOverlay.css({top:c.appElements.window.height-
p}).show(),c.fire("dragComponentStart",m,d)))});b(document).on("mousemove touchmove",function(e){if(h){e.preventDefault();e.stopPropagation();var g=(e.originalEvent.touches?e.originalEvent.touches[0]:e).pageX;e=(e.originalEvent.touches?e.originalEvent.touches[0]:e).pageY;f.css({display:"block",left:g,top:e,marginTop:-f.height()/2,marginLeft:-f.width()/2});d(g)?(c.Core.dragComponent=!0,a.$template.find(".template > div").append(q),q.show()):q.hide();p=c.appElements.iframe.height/v;var k=e-(c.appElements.window.height-
p);t.each(function(){var a=this.getBoundingClientRect();var d=a.height/v;var c=a.top/v;!(0>a.bottom/v||c>=p||c>k)&&c+d>=k&&(r.item=b(this),k>c+d/2?(b(this).after(q),r.where="after"):(b(this).before(q),r.where="before"))});g=e-(c.appElements.window.height-p);e=c.appElements.window.height-e;80>g?n=-30*(80-Math.max(g,0))/80:80>e&&(n=30*(80-Math.max(e,0))/80);clearInterval(x);if(80>g||80>e)c.iwindow.scrollBy(0,n),x=setInterval(function(){c.iwindow.scrollBy(0,n)},17)}});b(document).on("mouseup touchend",
function(a){h&&(h=!1,f.css("display","none"),q.remove(),d((a.originalEvent.changedTouches?a.originalEvent.changedTouches[0]:a).pageX)&&(A=!1,r.item&&r.item.length&&(r.item=b(r.item).attr("data-app-component-id")),c.addComponentToCore(m,b.extend({},r),b(l)).then(function(){c.cleanOnceComponents()})),r.item=void 0,r.where=void 0,c.$iframeOverlay.hide(),clearInterval(x),c.fire("dragComponentEnd",m,a))})},hideComponentsList:function(a){this.fire("beforeHideComponents",a);this.$body.removeClass("app-add-component-open");
this.$componentsToggleBtn.tooltipster("content",e("Add Block to Page"));this.$themeToggleBtn.fadeIn(200);this.fire("hideComponents",a)},toggleComponentsList:function(){this.cleanOnceComponents();this.$body.toggleClass("app-add-component-open");this.$body.hasClass("app-add-component-open")?(this.$componentsToggleBtn.tooltipster("content",e("Close")),this.$themeToggleBtn.fadeOut(200),b(".app-template").addClass("scaled"),a.Core.$body.addClass("scaled"),a.Core.$template.addClass("scaled")):(b(".app-template").hasClass("scaled")&&
h(),this.$componentsToggleBtn.tooltipster("content",e("Add Block to Page")),this.$themeToggleBtn.fadeIn(200));this.fire("toggleComponents")},addComponentsFilterTab:function(d,c,e){d=a.applyFilter("addComponentsFilterTab",b('<li data-tooltipster="bottom" title="'+e+'"data-filter="'+d+'">'+c+"</li>"));a.$componentsLayer.find(".add-component-filter ul").append(d)},createComponentsFilter:function(){var a=this,c=[];a.$componentsLayer.find(".app-layer-cont >ul>li").not(".app-layer-cont-user-block").each(function(){var d=
b(this).find("a").attr("data-component");b(this).attr("data-filter",a.components[d]._tags?a.components[d]._tags.join(","):"Theme");b(this).attr("data-group",a.components[d]._group?a.components[d]._group:"undefined");b(this).attr("data-search-tags",a.components[d]._searchTags?a.components[d]._searchTags:a.components[d]._group);void 0===a.components[d]._group?-1===c.indexOf("undefined")&&c.push("undefined"):-1===c.indexOf(a.components[d]._group)&&c.push(a.components[d]._group)});var e=a.$componentsLayer.find(".add-component-groups");
e.find("ul").empty();c.forEach(function(a){e.find("> ul").append('<li data-group-name="'+a.replace(/\s/g,"_")+'">'+a+"</li>")});e.append('<div class="add-component-filter"><ul></ul></div>')},bindComponentsFilterEvents:function(){var d=this;d.$componentsLayer.on("click",".add-component-filter>ul>li:not(.active)",function(c){d.$componentsLayer.find(".add-component-groups > ul li").removeClass("active");var e=b(c.target).closest("#add-component").find(".app-layer-cont"),g=b(c.target).attr("data-filter");
b(c.target).parent().find(">li").removeClass("active");b(c.target).addClass("active");a.$componentsLayer.find(".show-more-btn").addClass("hidden");e.find(">ul>li").addClass("hidden");e.find('>ul>li[data-filter*="'+g+'"]').removeClass("hidden");(function(){e.find(">ul:not(.search-blocks-container)").each(function(){var a=b(this).prev();0==b(this).find('>li:not(".hidden")').length?(a.is("[data-group]")||(a.addClass("hidden"),a=a.prev()),a.addClass("hidden")):(a.is("[data-group]")||(a.removeClass("hidden"),
a=a.prev()),a.removeClass("hidden"))})})();e.scrollTop(0)})},render:function(b){a.Core.render(b)},getComponentsKeywords:function(){var a;return function(){var c=b.Deferred();if(a)return c.resolve(a);l.getLocalJSON("web/app/interface/app-components-keywords.json",function(b){a=b;c.resolve(a)},function(a){c.resolve(void 0)});return c}}()},events:{coreLoad:function(){a.Core.addFilter("addComponent",function(d,c,e){if("secondary"===a.theme.type){c=a.$componentsLayer.attr("data-theme");var g=e.attr("data-theme");
if(c&&!g)return d._sourceTheme=c,d;if(g){var f=b.Deferred(),h=e.attr("data-component");d._sourceTheme=g;e=a.getAddonDir(g)+"/components/"+h+"/template.html";l.loadLocalFile(e,function(b){a.isBuildInAddon(g)||(b=b.replace(/="\.\.\//g,'="'+a.path2core(a.getAddonDir(g))+"/components/"));d._customHTML=b;b=a.getAddonDir(g)+"/components/"+h+"/style.less";l.loadLocalFile(b,function(b){d._styles={};a.objectifyCSS(b).then(function(a){d._styles=a;f.resolve(d)},function(a){})})});return f.promise()}}else return d})},
load:function(){var d=this;d.cleanOnceComponents();d.dragComponent();d.$componentsToggleBtn.on("click",function(c){var h=b(this);c.stopPropagation();h.attr("data-pallete-inited")||(d.initComponentsPalette(function(){d.createComponentsFilter();d.addComponentsFilterTab("Extension",e("Extensions"),e("Show Blocks From Extensions"));d.bindComponentsFilterEvents();a.$componentsLayer.find(".add-component-groups > ul").on("click",function(c){b(c.target).attr("data-group-name")&&(b(c.target).addClass("active").siblings().removeClass("active"),
a.$componentsLayer.find(".add-component-filter li").removeClass("active"),a.$componentsLayer.find(".app-layer-cont").find("h5, .show-more-btn, .user-block-search, > ul > li").removeClass("hidden"),a.$componentsLayer.find(".app-layer-cont").find(".search-group-name, .search-blocks-container").addClass("hidden"),c=a.$componentsLayer.find('.app-layer-cont > h5[data-group="'+b(c.target).attr("data-group-name")+'"]')[0].offsetTop,0!==c&&a.$componentsLayer.find(".app-layer-cont").stop(!0,!0).animate({scrollTop:c-
10},300))});var c=[];a.$componentsLayer.find(".app-layer-cont").find("> ul > li img").each(function(a,d){a=new Promise(function(a,c){b(d).on("load",function(){a()});d.complete&&b(d).load()});c.push(a)});Promise.all(c).then(function(){function c(b){if(b.length){b.addClass("active");var c=a.$componentsLayer.find(".add-component-groups"),d=b.position().top;b=d+b.outerHeight(!0);var e=c.scrollTop(),f=e+B;d<e?c.stop(!0,!0).animate({scrollTop:d-100},300):b>f&&c.stop(!0,!0).animate({scrollTop:e+b-f+100},
300)}}B=a.$componentsLayer.find(".app-layer-cont").outerHeight();var d=!1,e=!1;a.$componentsLayer.find(".app-layer-cont").on("scroll",function(f){e=d;d=b(this).is(":animated");var g=a.$componentsLayer.find(".add-component-groups");f=a.$componentsLayer.find(".add-component-filter li").hasClass("active");if(!(d||e||f)&&g.find("> ul li").length){g.find("> ul li").removeClass("active");f=b(this).scrollTop();var h=Math.ceil(f+B/2);if(20>=f)c(g.find("> ul li:first-child"));else{var k=0;g.find("> ul li").each(function(d){d=
b(this).attr("data-group-name");var e=k,f=e;a.$componentsLayer.find('.app-layer-cont > h5[data-group="'+d+'"]').each(function(){f+=b(this).outerHeight(!0)+b(this).next("ul").outerHeight(!0)});k=f;if(e<=h&&f>=h)return c(g.find('> ul li[data-group-name="'+d+'"]')),!1})}}})})}),h.attr("data-pallete-inited",!0));d.toggleComponentsList()});d.on("clickTemplate",function(a){d.hideComponentsList(a)});d.$componentsLayer.on("click","a[data-component]:not(.inactive)",function(a){A&&!b(this).closest(".not-available").length&&
(A=!1,d.addComponentToCore(b(this).attr("data-component"),null,b(a.currentTarget)).then(function(){d.cleanOnceComponents()}))});d.Core.on("rendered",function(){A=!0});d.Core.on("loadedComponent",function(b,d,e,f){a.fire("loadedComponent",b,d,e,f)});d.Core.addFilter("loadComponentTemplate",function(a,b,e,f){return d.applyFilter("loadComponentTemplate",a,b,e,f)});d.Core.on("summernoteBlur",function(b){a.fire("summernoteBlur",b)})},resizeInterface:function(){B=a.$componentsLayer.find(".app-layer-cont").outerHeight()},
initedComponentsPalette:function(){a.$body.find("#add-component .app-layer-cont h5[data-group]").each(function(){b(this).next("ul").children("li").length||b(this).css("display","none")});a.$componentsLayer.find(".app-layer-cont > ul:not(.app-layer-cont-user, :empty)").filter(function(){return!b(this).prev("h5").text().toLowerCase().includes("blockpack")}).each(function(){var a=b(this).prev("h5").text();a=b(J(a));var c=b(this).children().last().find("img").attr("src");a.find("img").attr("src",c);b(this).append(a)})},
loaded:function(){"secondary"===a.theme.type&&(a.$componentsLayer.find(".add-component-content").before('<div class="search-block-input-wrap">\n                        <input class="search-block-input form-control" type="text" placeholder="'+e("Search")+'" value="">\n                        <button class="btn btn-primary search-blocks-btn">Search</button>\n                    </div>'),a.$componentsLayer.on("blur",".search-block-input",function(b){a.fire("inputBlur",b.target)}),a.$componentsLayer.find(".search-blocks-btn").on("click",
function(){var d=b(a.preloaderHTML).css({opacity:"0.8",transition:"0.2s"});a.$componentsLayer.find(".add-component-content").append(d);v.length?y(v,null,d):G().then(function(b){b.forEach(function(b){var c=b.themeName,d=b.local;b.blocks.forEach(function(b){var e=b.path.slice(b.path.indexOf("/")+1);var f=d?a.getAddonDir(c).replace("web/app/","app/")+"/components/"+e+"/thumb.png":"https://my.mobirise.com/data/upload/thumbs/"+c+"/components/"+e+"/thumb.png";var g=b._group+(b._searchTags?b._searchTags.toString():
"")+b.path.replace("components/","");v.push({name:e,thumb:f,once:b._once,searchTags:g,theme:c,local:d})})});y(v,null,d)})}),a.$componentsLayer.find(".search-block-input").keypress(function(b){13===(b.keyCode?b.keyCode:b.which)&&(b.preventDefault(),a.$componentsLayer.find(".search-blocks-btn").click())}),a.$componentsLayer.on("click",".show-more-btn",function(d){var c=b(a.preloaderHTML).css({opacity:"0.8",transition:"0.2s"}),e=b(d.target).closest(".show-more-btn"),g=e.find(".show-more-btn__text").text();
if(e.hasClass("components-shown"))e.nextAll().remove(),e.find(".show-more-btn__text").text(g.replace("Hide","More"));else{e.find(".show-more-btn__text").text(g.replace("More","Hide"));a.$componentsLayer.find(".add-component-content").append(c);var f=b(d.target).closest("ul").prev().attr("data-group");v.length?y(v,f,c):G().then(function(b){b.forEach(function(b){var c=b.themeName,d=b.local;b.blocks.forEach(function(b){var e=b.path.slice(b.path.indexOf("/")+1);var f=d?a.getAddonDir(c).replace("web/app/",
"app/")+"/components/"+e+"/thumb.png":"https://my.mobirise.com/data/upload/thumbs/"+c+"/components/"+e+"/thumb.png";v.push({name:e,thumb:f,once:b._once,searchTags:b._group+(b._searchTags?b._searchTags.toString():""),theme:c,local:d})})});y(v,f,c)})}e.toggleClass("components-shown")}),a.$componentsLayer.attr("data-theme",a.theme.name),p().then(function(d){a.$componentsLayer.find(".add-component-content").before('<div class="blocks-theme-btn-wrap">\n                            <a class="blocks-theme-btn" href="javascript:void(0)" data-tooltipster="left" title="Choose Blocks Theme">\n                                <img class="blocks-theme-img" src="">\n                                <span class="blocks-theme-name"></span>\n                                <span class="blocks-theme-arrow mbr-icon-angle-down"></span>\n                            </a>\n                        </div>');
F=d;F.forEach(function(a){z+='<div class="col-xs-6 col-sm-6 col-md-4 col-lg-3" data-name="'+a.name+'" data-local="'+a.local+'">\n                                <div class="card-wrap">\n                                    <div class="card-img">\n                                        <img src="'+a.cover+'">\n                                    </div>\n                                    <span class="card-title">'+a.title+"</span>\n                                </div>\n                            </div>"});
a.$componentsLayer.find(".blocks-theme-btn").find(".blocks-theme-img").attr("src",l.path2app(a.getAddonDir(a.theme.name)+"/cover.jpg")).end().find(".blocks-theme-name").text(a.theme.params.title);a.$componentsLayer.find(".blocks-theme-btn").on("click",function(){a.showDialog({title:e("Choose blocks' theme"),className:"blocks-theme-modal",body:'<div class="row">\n                                        <div class="col-md-4">\n                                            <input class="form-control blocks-theme-input" type="text" placeholder="'+
e("Search")+'" value="">\n                                        </div>\n                                    </div>\n                                    <div class="row">\n                                        <div class="col-md-12">\n                                            <div class="blocks-theme-list">\n                                                '+z+"\n                                            </div>\n                                        </div>\n                                    </div>",
show:function(c){var d=null;c.find(".blocks-theme-input").on("input",function(a){clearTimeout(d);d=setTimeout(function(){var d=a.target.value.toLowerCase();c.find(".blocks-theme-list > div").each(function(a,c){a=b(c);a.find(".card-title").text().toLowerCase().includes(d)?a.removeClass("hidden"):a.addClass("hidden")})},100)});c.find(".blocks-theme-list > div > .card-wrap").on("click",function(){c.modal("hide");var d=b(this),f=d.closest("[data-name]").attr("data-name");if(f!==a.$componentsLayer.attr("data-theme")){var h=
a.$componentsLayer.attr("data-theme");a.$componentsLayer.attr("data-theme",f);var k=b(a.preloaderHTML);k.css({opacity:"0.8",transition:"0.2s"});a.$componentsLayer.find(".add-component-content").append(k);var p=b.Deferred();"false"===d.closest("[data-name]").attr("data-local")?l.http("https://my.mobirise.com/data/upload/thumbs/"+f+"/params.json?hash="+Math.random(),{success:function(a){p.resolve([a,!1])},error:function(a){console.log(a);p.reject()}}):n(f,function(c){if(c.components){var h=a.getAddonDir(f),
g=b.extend({},a.components);a.components=a.Core.components={};for(var l in g)g.hasOwnProperty(l)&&(g[l].alias||delete g[l]);for(var q in a.cachedTemplates)a.cachedTemplates.hasOwnProperty(q)&&(g[q]||delete a.cachedTemplates[q]);var m=[];c.components.forEach(function(b){m.push(a.readComponent2(b,h,c))});b.when.apply(null,m).then(function(){a.Core.components=a.components=b.extend(a.components,g);a.initComponentsPalette(function(){a.$componentsLayer.find(".add-component-filter").remove();a.createComponentsFilter();
a.addComponentsFilterTab("Extension",e("Extensions"),e("Show Blocks From Extensions"))});E=!0;a.$componentsLayer.find(".blocks-theme-btn").find(".blocks-theme-img").attr("src",d.find(".card-img img").attr("src")).end().find(".blocks-theme-name").text(d.find(".card-title").text());k.remove()})}});p.then(function(b){var c=$jscomp.makeIterator(b);b=c.next().value;c=c.next().value;try{var d=JSON.parse(b);b={};for(var e in d.components){var g=d.components[e].path.split("/"),k=/components/.test(d.components[e].path)?
d.components[e].path:"components/"+d.components[e].path;b[d.components[e]._group]||(b[d.components[e]._group]=[]);b[d.components[e]._group].push({name:g[g.length-1],thumb:c?a.getAddonDir(f).replace("web/app/","app/")+"/"+k+"/thumb.png":"https://my.mobirise.com/data/upload/thumbs/"+f+"/"+k+"/thumb.png",_once:d.components[e]._once?d.components[e]._once:!1,_searchTags:d.components[e]._searchTags?d.components[e]._searchTags:""})}return[b,c]}catch(H){throw a.alertDlg("Can't get "+f+" theme."),a.$componentsLayer.attr("data-theme",
h),console.log(H),H;}}).then(function(b){var c=$jscomp.makeIterator(b);b=c.next().value;c.next();c="";var f=a.$componentsLayer.find(".add-component-groups");f.find("> ul").empty();for(var g in b){c+="<h5 data-group="+g.replace(/\s/g,"_")+">"+e(g,"blocks")+"</h5>";c+='<ul class="row">';f.find("> ul").append('<li data-group-name="'+g.replace(/\s/g,"_")+'">'+g+"</li>");for(var h in b[g])c+=a.generateComponentPaletteItemHtml(b[g][h].name,b[g][h].thumb,"not-available",{"component-once":b[g][h]._once},
"",{"search-tags":b[g][h]._searchTags});c+="</ul>"}a.insertComponentPaletteHTML(c);a.$componentsLayer.find(".blocks-theme-btn").find(".blocks-theme-img").attr("src",d.find(".card-img img").attr("src")).end().find(".blocks-theme-name").text(d.find(".card-title").text())},function(){a.$body.removeClass("app-add-component-open");a.$componentsToggleBtn.trigger("click")}).always(function(){a.$componentsLayer.find(".show-more-btn").length||a.$componentsLayer.find(".app-layer-cont > ul:not(.app-layer-cont-user, :empty)").filter(function(){return!b(this).prev("h5").text().toLowerCase().includes("blockpack")}).each(function(){var a=
b(this).prev("h5").text();a=b(J(a));var c=b(this).children().last().find("img").attr("src");a.find("img").attr("src",c);b(this).append(a)});a.cleanOnceComponents();k.remove()})}})}})})}))},sidebarOpened:function(){this.hideComponentsList()},showProjectSettings:function(){this.hideComponentsList()},hideComponents:function(a){b(".app-template").hasClass("scaled")&&(a&&b(a.target).is("iframe")||h())},clickTemplate:function(d){b(".app-template").hasClass("scaled")&&(b(".app-template").removeClass("scaled"),
a.Core.$body.removeClass("scaled"),a.Core.$template.removeClass("scaled"),d=b(d.target).is("[data-app-component-id]")?b(d.target):b(d.target).closest("[data-app-component-id]"),d.length&&(d=d.offset().top,a.Core.$body.closest("html").stop().animate({scrollTop:d},0)))}}})},["jQuery","mbrApp","TR()","Bridge"]);
