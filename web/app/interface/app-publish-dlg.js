var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,c,b){a instanceof String&&(a=String(a));for(var e=a.length,d=0;d<e;d++){var g=a[d];if(c.call(b,g,d,a))return{i:d,v:g}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,c,b,e){if(c){b=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var d=a[e];d in b||(b[d]={});b=b[d]}a=a[a.length-1];e=b[a];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");
defineM("app-publish-dlg",function(a,c,b){var e='\t\t\x3c!-- Local drive folder --\x3e\t\t<div class="publishMethod">\t\t  <div class="radio radio-primary publishRadio">\t\t\t<label>\t\t\t  <input type="radio" name="publishType" value="local" '+(c.accountMode.isOffline()?"checked":"")+'><span class="circle"></span><span class="check"></span>'+b("Local drive folder")+'\t\t\t</label>\t\t  </div>\t\t  <div class="publishBody">\t\t\t<div class="input-group">\t\t\t\t<input type="text" class="form-control" name="publishLocal" placeholder="['+
b("folder")+']"/>\t\t\t\t<div class="input-group-btn">\t\t\t\t\t<a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">\t\t\t\t\t\t<span class="caret"></span>\t\t\t\t\t</a>\t\t\t\t\t<ul class="dropdown-menu dropdown-menu-right" role="menu">\t\t\t\t\t\t<li><a href="#">'+b("Edit")+'</a></li>\t\t\t\t\t</ul>\t\t\t\t</div>\t\t\t  <div class="input-group-btn">\t\t\t\t<button class="btn btn-primary" type="button" name="publishLocalBrowse">'+b("Browse...")+'</button>\t\t\t  </div>\t\t\t</div>\t\t  </div>\t\t</div>\t\t\x3c!-- /Local drive folder --\x3e\t\t<div class="publishSiteSettingsNote">\t\t\t<br/>\t\t\t<span>'+
b("To export the site project, please use %Sites -> Site Settings%").replace(/%(.+)%/,'<a class="" href="javascript:void(0)">"$1"</a>')+"</span>\t\t</div>";c.regExtension({name:"publish-dlg",global:{PUBLISH_MODAL_HTML:e,runPublishDlg:function(d){function g(){var k=a(this).closest(".publishMethod"),b=k.find(".publishBody"),d=a(this).parents(".modal-body"),c=d.find("input[name=uploadDiff]");d.find(".publishBody").not(b).hide();d.find(".publishMethod").not(k).removeClass("selected");b.show();k.addClass("selected");
"local"===a(this).attr("value")?c.closest(".togglebutton").css("display","none"):"none"===c.closest(".togglebutton").css("display")&&c.closest(".togglebutton").css("display","block")}var h=this;h.fire("showPublishModal");var e=h.projectSettings||{},f=c.showDialog({title:b("Publish"),className:"publish-dialog",body:h.PUBLISH_MODAL_HTML,buttons:{btClose:{label:b("Cancel"),callback:function(){}},btSave:{label:b("Publish"),default:!0,callback:function(){var b=a.when(h.getPublishUrl(f));d&&b.then(d);if("resolved"!=
b.state())return!1}}},create:function(b){h.fire("createPublishModal",a(b))},show:function(b){b=a(b).find("[name=publishType][value="+(e.publishType||"mbrsite")+"]");b.prop("checked",!0);g.call(b)}});f&&(h.fire("showedPublishModal",f),f.on("change","[name=publishType]",g),Bridge.getSettingsArray("RecentPublish",function(b){var d="",c=[],e;for(e in b){var g=Bridge.url2sys(b[e]);0<=c.indexOf(g)||(c.push(g),d+='<li><a href="#">'+g+"</a></li>")}b=a("[name=publishLocal]").parent().find("ul");b.html(d);
b.find("li>a").click(function(){f.find("[name=publishLocal]").val(a(this).html())})}),f.find("[name=publishLocal]").val(Bridge.url2sys(e.publishPath||"")),f.find("[name=publishLocalBrowse]").on("click",function(){var a=f.find("[name=publishLocal]");Bridge.runFileDialog(b("Browse for folder"),Bridge.sys2url(a.val(),Bridge.docLocation),"dir",function(b){b&&a.val(Bridge.url2sys(b))})}),f.find(".publishSiteSettingsNote a").click(function(){f.modal("hide");c.openProjectSettings(c.projectPath+"/project.mobirise")}),
f.find("[name=localDefaults]").on("change",function(){a(this).parent().prev("input").val(a(this).val())}))},getPublishUrl:function(b,a){a=a||b.find("[name=publishType]:checked").val();var c="",d=this.projectSettings||{};d.publishType=a;switch(a){case "local":c=Bridge.sys2url(b.find("[name=publishLocal]").val(),Bridge.docLocation),d.publishPath=c,Bridge.getSettingsArray("RecentPublish",function(a){var b=[c],d;for(d in a)0<=b.indexOf(a[d])||b.push(a[d]);Bridge.setSettingsArray("RecentPublish",b)})}c=
this.applyFilter("getPublishUrl",c,a,b,d);this.projectSettings=d;return c}},events:{load:function(){c.addFilter("publishProjectSettings",function(a,b){b&&(delete a.publishType,delete a.publishPath);return a})}}})},["jQuery","mbrApp","TR()"]);
