var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(c,b,e){c instanceof String&&(c=String(c));for(var d=c.length,g=0;g<d;g++){var h=c[g];if(b.call(e,h,g,c))return{i:g,v:h}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,b,e){c!=Array.prototype&&c!=Object.prototype&&(c[b]=e.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,b,e,d){if(b){e=$jscomp.global;c=c.split(".");for(d=0;d<c.length-1;d++){var g=c[d];g in e||(e[g]={});e=e[g]}c=c[c.length-1];d=e[c];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(e,c,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");
defineM("app-settings",function(c,b,e,d){function g(a){a="false"!==a&&!1!==a;b.appSettings.showPageSiteNames=a;!0===a?c(".navbar-nav .navbar-project-info").show():c(".navbar-nav .navbar-project-info").hide()}function h(a){b.appSettings.showAllViews=a;"true"===a?(b.$navbarDevices.find("> li").show(),b.$navbarDevices.find("> li.active").siblings().removeClass("active")):(b.$navbarDevices.find("> li").hide(),b.$navbarDevices.find('> [data-device="phone"]').hasClass("active")?b.$navbarDevices.find('> [data-device="desktop"]').show():
b.$navbarDevices.find('> [data-device="phone"]').show())}function m(a){b.appSettings.showRedo=a;"false"===a&&b.$redoButton.hide()}function n(a){b.appSettings.showAllBlockButtons=b.applyFilter("showAllBlockButtons",a)}function p(a){a&&(f=a,b.$body.hasClass("app-component-code-editor-open")&&(b.$codeEditorHTML.codemirror.setOption("theme",f),b.$codeEditorCSS.codemirror.setOption("theme",f)),b.$body.hasClass("app-site-code-editor-open")&&(b.$codeEditorStaticCSS.codemirror.setOption("theme",f),b.$codeEditorDynamicCSS.codemirror.setOption("theme",
f),b.$codeEditorParamsJSON.codemirror.setOption("theme",f)))}function q(a){b.appSettings.showCodeEditorUndo="true"===a;b.$codeEditor&&(b.appSettings.showCodeEditorUndo?(b.$codeEditor.find(".code-editor-undo").show(),b.$codeEditor.find(".code-editor-redo").show()):(b.$codeEditor.find(".code-editor-undo").hide(),b.$codeEditor.find(".code-editor-redo").hide()));b.$siteCodeEditor&&(b.appSettings.showCodeEditorUndo?(b.$siteCodeEditor.find(".code-editor-undo").show(),b.$siteCodeEditor.find(".code-editor-redo").show()):
(b.$siteCodeEditor.find(".code-editor-undo").hide(),b.$siteCodeEditor.find(".code-editor-redo").hide()))}function r(a){b.appSettings.showSiteStylesBtn=a;"true"===a?"secondary"===b.theme.type&&b.$themeToggleBtn.css("visibility","visible"):"secondary"===b.theme.type&&b.$themeToggleBtn.css("visibility","hidden")}function l(a){a="true"===a||!0===a;b.appSettings.darkMode=a;!0===a?(b.$body.addClass("dark-mode"),b.Core.$body.addClass("dark-mode")):(b.$body.removeClass("dark-mode"),b.Core.$body.removeClass("dark-mode"))}
function t(a){a="true"===a||!0===a;b.appSettings.fullscreenCanvas=a;!0===a?b.Core.$body.removeClass("rounded-canvas"):b.Core.$body.addClass("rounded-canvas")}function u(a){"true"===a?b.appSettings.showGitHub=a:d.getSettings("gitHubLast",function(c){null!=c?d.getSettings("gitHub/"+c,function(c){c?d.getSettings("settingsGitHub",function(c){"false"!==c?(b.appSettings.showGitHub="true",d.setSettings("settingsGitHub","true")):b.appSettings.showGitHub=a}):b.appSettings.showGitHub=a}):b.appSettings.showGitHub=
a})}var k,f="mobirise";b.regExtension({name:"app-settings",global:{appSettings:{},showAppSettings:function(){b.showDialog({title:e("App Settings"),className:"app-settings-dialog",body:'<div class="row"><div class="col-md-12"><div><label class="col-md-3">'+e("Top Toolbar")+'</label><div class="col-md-9"><br><div class="setting"><div class="row"><div class="togglebutton"><label data-tooltipster="right" data-tooltip-class="setting-image" data-tooltip-src="app/builder/images/app_settings/show-page-site-names.jpg"><input name="show-page-site-names" type="checkbox"'+
(!0===b.appSettings.showPageSiteNames?'checked="checked"':"")+'><span style="margin-top:-3px;" class="toggle"></span>'+e("Show Page & Site Names")+'</label></div></div></div><div class="setting"><div class="row"><div class="togglebutton"><label data-tooltipster="right" data-tooltip-class="setting-image" data-tooltip-src="app/builder/images/app_settings/show-all-views.jpg"><input name="show-all-views" type="checkbox"'+("true"===b.appSettings.showAllViews?'checked="checked"':"")+'><span style="margin-top:-3px;" class="toggle"></span>'+
e("Show All Views")+'</label></div></div></div><div class="setting"><div class="row"><div class="togglebutton"><label data-tooltipster="right" data-tooltip-class="setting-image" data-tooltip-src="app/builder/images/app_settings/show-redo.jpg"><input name="show-redo" type="checkbox"'+("true"===b.appSettings.showRedo?'checked="checked"':"")+'><span style="margin-top:-3px;" class="toggle"></span>'+e("Show Redo")+'</label></div></div></div></div></div><div><label class="col-md-3">'+e("APP")+'</label><div class="col-md-9"><br><div class="setting"><div class="row"><div class="togglebutton"><label data-tooltipster="right" data-tooltip-class="setting-image" data-tooltip-src="app/builder/images/app_settings/dark-mode.jpg"><input name="app-setting-dark-mode" type="checkbox"'+
(!0===b.appSettings.darkMode?'checked="checked"':"")+'><span style="margin-top:-3px;" class="toggle"></span>'+e("Dark Mode")+'</label></div></div></div><div class="setting"><div class="row"><div class="togglebutton"><label data-tooltipster="right" data-tooltip-class="setting-image" data-tooltip-src="app/builder/images/app_settings/fullscreen-canvas.jpg"><input name="app-setting-fullscreen-canvas" type="checkbox"'+(!0===b.appSettings.fullscreenCanvas?'checked="checked"':"")+'><span style="margin-top:-3px;" class="toggle"></span>'+
e("Fullscreen Canvas")+'</label></div></div></div><div class="setting"><div class="row"><div class="togglebutton"><label data-tooltipster="right" data-tooltip-class="setting-image" data-tooltip-src="app/builder/images/app_settings/show-block-panel.jpg"><input name="show-all-block-buttons" type="checkbox"'+("true"===b.appSettings.showAllBlockButtons?'checked="checked"':"")+'><span style="margin-top:-3px;" class="toggle"></span>'+e("Show All Block Buttons")+'</label></div></div></div><div class="setting"><div class="row"><div class="togglebutton"><label data-tooltipster="right" data-tooltip-class="setting-image" data-tooltip-src="app/builder/images/app_settings/show-site-styles-button.jpg"><input name="show-site-styles-btn" type="checkbox"'+
("true"===b.appSettings.showSiteStylesBtn?'checked="checked"':"")+'><span style="margin-top:-3px;" class="toggle"></span>'+e("Show Site Styles Button")+'</label></div></div></div><div class="setting"><div class="row"><div class="togglebutton"><label><input class="show-github" name="show-github" type="checkbox"'+("true"===b.appSettings.showGitHub?'checked="checked"':"")+'><span style="margin-top:-3px;" class="toggle"></span>'+e("Publish to GitHub Pages")+'</label></div></div></div><div class="setting github-credentials"'+
("true"===b.appSettings.showGitHub?"":' style="display:none"')+'><div class="row" style="display:flex"><div class=""><label>'+e("Github Login")+'</label><input class="form-control gh-login-input" name="github-login" type="text"></div><div class="" style="padding-left:30px"><label>'+e("Token")+'</label> <a class="gh-setttings-token-help">[?]</a><input class="form-control gh-token-input" name="github-token" type="text"></div></div></div></div></div>'+b.applyFilter("addAppSettingsItem","")+"</div></div>",
success:function(a){d.setSettings("appSettings/showPageSiteNames",a.find('[name="show-page-site-names"]').prop("checked"),function(b){b&&d.getSettings("appSettings/showPageSiteNames",function(b){g(b)})});d.setSettings("appSettings/showAllViews",a.find('[name="show-all-views"]').prop("checked"),function(b){b&&d.getSettings("appSettings/showAllViews",function(b){h(b)})});d.setSettings("appSettings/showRedo",a.find('[name="show-redo"]').prop("checked"),function(b){b&&d.getSettings("appSettings/showRedo",
function(b){m(b)})});d.setSettings("appSettings/showAllBlockButtons",a.find('[name="show-all-block-buttons"]').prop("checked"),function(a){a&&d.getSettings("appSettings/showAllBlockButtons",function(a){b.appSettings.showAllBlockButtons!==a&&(n(a),"true"===a?(b.$template.find(".app-component .app-component-edit").children().removeClass("hidden-interface"),b.$template.find(".app-component .component-show-more").hide()):d.setSettings("appSettings/showAllBlockButtonsTEMP","false",function(a){b.$template.find(".app-component-edit").css("width",
"").children(":not(.component-params, .component-show-more)").addClass("hidden-interface");b.$template.find(".app-component .component-show-more").show()}))})});a.find('[name="show-code-editor-undo"]').length&&d.setSettings("appSettings/showCodeEditorUndo",a.find('[name="show-code-editor-undo"]').prop("checked"),function(a){a&&d.getSettings("appSettings/showCodeEditorUndo",function(a){b.appSettings.showCodeEditorUndo!==a&&q(a)})});a.find('[name="theme"]').length&&d.setSettings("appSettings/codeEditorTheme",
a.find('[name="theme"]').val(),function(b){b&&d.getSettings("appSettings/codeEditorTheme",function(b){p(b)})});a.find('[name="remove-mobirise-references"]').length&&d.setSettings("appSettings/removeMobiriseReferences",a.find('[name="remove-mobirise-references"]').prop("checked"),function(a){a&&d.getSettings("appSettings/removeMobiriseReferences",function(a){b.appSettings.removeMobiriseReferences="true"===a||""===a})});d.setSettings("appSettings/showSiteStylesBtn",a.find('[name="show-site-styles-btn"]').prop("checked"),
function(b){b&&d.getSettings("appSettings/showSiteStylesBtn",function(b){r(b)})});var c=a.find('[name="app-setting-dark-mode"]').prop("checked");d.setSettings("appSettings/darkMode",c);l(c);c=a.find('[name="app-setting-fullscreen-canvas"]').prop("checked");d.setSettings("appSettings/fullscreenCanvas",c);t(c);d.setSettings("appSettings/showGitHub",a.find('[name="show-github"]').prop("checked"),function(a){a&&d.getSettings("appSettings/showGitHub",function(a){b.appSettings.showGitHub=a;d.setSettings("settingsGitHub",
a)})});b.fire("applyAppSettings",a)},show:function(a){b.fire("showAppSettings",a);c(".show-github").on("change",function(a){c(a.target).prop("checked")?c("div.github-credentials").show():c("div.github-credentials").hide()});c(".gh-setttings-token-help").on("click",function(a){a.preventDefault();a.stopPropagation();b.openUrl("https://mobirise.com/help/GitHub-publish-371.html")});d.getSettings("gitHubLast",function(a){a=a||"";var b;c(".gh-login-input").val(a);a&&d.getSettings("gitHub/"+a,function(a){d.decode(a,
function(a){b=a;c(".gh-token-input").val(b)})})});c(".gh-login-input, .gh-token-input").on("change",function(a){d.setSettings("gitHubLast",c(".gh-login-input").val());d.encode(c(".gh-token-input").val(),function(a){d.setSettings("gitHub/"+c(".gh-login-input").val(),a)})})}});b.initTooltips()},getSettings:function(a){return $Bridge.getSettings(a)},setSettings:function(a,b){return $Bridge.setSettings(a,b)}},events:{bridgeInit:function(){d.getSettings("appSettings/darkMode",function(a){k=a;"true"===
k&&c(".preloader-logo, .preloader-logo .svg-el, .preloader-logo .svg-el .mbr-overlay").css({"background-color":"#373c48",transition:"background-color 1.5s ease"})})},load:function(){c("#app-settings-btn").click(function(){b.showAppSettings()});k?l(k):d.getSettings("appSettings/darkMode",function(a){l(a)});d.getSettings("appSettings/fullscreenCanvas",function(a){t(a)});d.getSettings("appSettings/showPageSiteNames",function(a){g(a)});d.getSettings("appSettings/showAllViews",function(a){h(a)});d.getSettings("appSettings/showRedo",
function(a){m(a)});d.getSettings("appSettings/showAllBlockButtons",function(a){n(a)});b.$template.on("click",".app-component .component-show-more",function(){b.$template.find(".app-component .app-component-edit").each(function(a,b){a=c(b);var d=a.find("> .mbr-btn");b=d.first().outerWidth(!0)*(d.length-1)+5;a.animate({width:b},300,"swing",function(){d.removeClass("hidden-interface")})});b.$template.find(".app-component .component-show-more").hide();d.setSettings("appSettings/showAllBlockButtonsTEMP",
"true",function(a){a||console.warn("Unabale to save appSettings/showAllBlockButtonsTEMP")})});b.Core.on("loadedComponent",function(a,c,e,g){var f=e.find("[data-app-component-id="+a._id+"] > .app-component-menu");"true"===b.appSettings.showAllBlockButtons?f.find(".component-show-more").hide():d.getSettings("appSettings/showAllBlockButtonsTEMP",function(a){"true"===a?f.find(".component-show-more").hide():f.find(".app-component-edit").children(":not(.component-params, .component-show-more)").addClass("hidden-interface")})});
d.regQuitTask(function(a){d.setSettings("appSettings/showAllBlockButtonsTEMP","false",a)})},loaded:function(){d.getSettings("appSettings/showCodeEditorUndo",function(a){q(a)});d.getSettings("appSettings/codeEditorTheme",function(a){p(a)})},addonLoaded:function(a,c){"code-editor"===c.name&&d.getSettings("appSettings/removeMobiriseReferences",function(a){b.appSettings.removeMobiriseReferences="true"===a||""===a})},showCodeEditor:function(){b.$codeEditorHTML.codemirror.setOption("theme",f);b.$codeEditorCSS.codemirror.setOption("theme",
f)},showSiteCodeEditor:function(){b.$codeEditorStaticCSS.codemirror.setOption("theme",f);b.$codeEditorDynamicCSS.codemirror.setOption("theme",f);b.$codeEditorParamsJSON.codemirror.setOption("theme",f)},showAppSettings:function(a){a.find('[name="theme"]').val(f).trigger("change")},initAccountSettings:function(a){a.find(".app-layer-title").after('<div class="hover-block" id="app-settings-btn"><label>'+e("App Settings")+"</label></div>")},loadedProject:function(){d.getSettings("appSettings/showSiteStylesBtn",
function(a){r(a)});d.getSettings("appSettings/showGitHub",function(a){u(a)})}}})},["jQuery","mbrApp","TR()","Bridge"]);
