var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,g){a instanceof String&&(a=String(a));for(var h=a.length,e=0;e<h;e++){var m=a[e];if(b.call(g,m,e,a))return{i:e,v:m}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,g){a!=Array.prototype&&a!=Object.prototype&&(a[b]=g.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,g,h){if(b){g=$jscomp.global;a=a.split(".");for(h=0;h<a.length-1;h++){var e=a[h];e in g||(g[e]={});g=g[e]}a=a[a.length-1];h=g[a];b=b(h);b!=h&&null!=b&&$jscomp.defineProperty(g,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(b,a){return $jscomp.findInternal(this,b,a).v}},"es6","es3");
defineM("app-plugin-favicon",function(a,b,g,h){var e=!1,m=function(a){if(b.isSecondaryComponent(a))for(var d in a)if(a[d].hasOwnProperty("iconFont")){if(e)return b.getProjectImagesDir()+"/mbr-favicon.png"}else{if(a[d].hasOwnProperty("image"))return a[d].image.src}else if(a.logo){if(a.logo.image.active)return a.logo.image.src;if(a.logo.iconFont.active)return b.getProjectImagesDir()+"/mbr-favicon.png"}};b.regExtension({name:"favicon",global:{findMenuLogo:function(){var d,l=b.Core.getPages(),c;for(c in l){var k=
l[c];if(k.settings&&k.settings.main){a(k.components).each(function(b,c){if("Menu"===c._group||-1<c._name.toLowerCase().indexOf("menu"))return d=c,!1});break}}if(d)if(b.isSecondaryComponent(d))for(var f in d)if(d[f].hasOwnProperty("iconFont")){if(e)return b.getProjectImagesDir()+"/mbr-favicon.png"}else{if(d[f].hasOwnProperty("image"))return d[f].image.src}else if(d.logo){if(d.logo.image.active)return d.logo.image.src;if(d.logo.iconFont.active)return b.getProjectImagesDir()+"/mbr-favicon.png"}}},events:{load:function(){function d(c){h.openImage(g("Select Image"),
l.projectPath?l.projectPath+"/assets/images":"","",b.projectSettings.imageResize?{width:"128",format:"png"}:"",function(k){k&&(k=h.path2app(k),a("input[name=favicon]").val(k),a(".faviconImage").attr("src",k),b.projectSettings.favicon=k,b.$body.find(".navbar-project-info .navbar-favicon").attr("src",k));c(k)})}b.Core.on("loadedComponent",function(c,a,f,d){!b.projectSettings.favicon&&("Menu"===c._group||-1<c._name.toLowerCase().indexOf("menu"))&&(c=m(c)||("secondary"===b.theme.type?"app/builder/images/logo5.png":
"app/builder/images/logo.png"),0===c.indexOf("../../")&&(c=c.replace("../../","")),b.$body.find(".navbar-project-info .navbar-favicon").attr("src",c))});var l=this;l.addFilter("publishHTML",function(c){var a=l.projectSettings.favicon,f=b.findMenuLogo();return a=a||f||("secondary"===b.theme.type?"images/logo5.png":"images/logo.png"),c.replace('<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">','<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">\n  <link rel="shortcut icon" '+
(b.projectSettings.cookiesAlert&&"3"===b.projectSettings.cookiesAlertType?"data-href":"href")+'="'+a+'" type="image/x-icon">')});b.addFilter("exportProjectFiles",function(c){if(b.projectSettings.favicon||e){var a;b.projectSettings.favicon?a=h.splitPath(b.projectSettings.favicon).fullname:e&&(a="mbr-favicon.png");for(var f=0;f<c.length;f++)if(c[f].dest===b.IMAGES_FOLDER+"/"+a)return c;f=b.getProjectImagesDir()+"/"+a;c.push({dest:b.IMAGES_FOLDER+"/"+a,srcList:[{src:f}]})}return c});b.addFilter("sidebarProjectSettings",
function(a){var c=l.projectSettings.favicon||"",f=b.findMenuLogo();f&&(0===f.indexOf("../../")&&(f=f.slice(6)),-1<f.indexOf("mbr-favicon.png")&&(f=f+"?nocache="+ +new Date));var d=c||f||("secondary"===b.theme.type?"app/builder/images/logo5.png":"app/builder/images/logo.png");"images/logo5.png"===d?d="app/builder/images/logo5.png":"images/logo.png"===d&&(d="app/builder/images/logo.png");c={title:"Common",name:"common",html:'<div class="form-group col-md-12 favicon-setting-wrap">\n                            <label class="control-label">'+
g("Favicon")+'</label>\n                            <div class="row">\n                                <img id="faviconButton" class="faviconImage col-md-3" width="60" src="'+d+'">\n                            </div>\n                            <input type="hidden" name="favicon" value="'+c+'">\n                            '+(f?'<div class="row">\n                                <label for="faviconUseMenuLogo" class="control-label col">'+g("Use menu logo")+'</label>\n                                <div class="togglebutton col-auto">\n                                    <label>\n                                        <input type="checkbox" id="faviconUseMenuLogo"'+
(c?"":" checked")+'>\n                                        <span class="toggle" style="margin: 0px;"></span>\n                                    </label>\n                                </div>\n                            </div>\n                        </div>':"")};a.push(c);return a});l.$body.on("click","#faviconButton",function(){d(function(b){b&&a("#faviconUseMenuLogo").prop("checked",!1)})});l.$body.on("change","#faviconUseMenuLogo",function(){if(a("#faviconUseMenuLogo").prop("checked")){a("input[name=favicon]").val("");
var c=b.findMenuLogo();c&&0===c.indexOf("../../")&&(c=c.slice(6));c=c||"app/builder/images/logo.png";"images/logo.png"===c&&(c="app/builder/images/logo.png");b.projectSettings.favicon="";a(".faviconImage").attr("src",c);b.$body.find(".navbar-project-info .navbar-favicon").attr("src",c)}else d(function(b){b||a("#faviconUseMenuLogo").prop("checked",!0)})});b.Core.on("savedMediaIconFontDialog",function(c){c=a(c);if(c.closest(21)){if("secondary"!==b.theme.type)if("logo"===c.attr("mbr-media"))c=c.find("a").length?
c.find("a"):c.find("span");else return;var d=b.getProjectImagesDir()+"/mbr-favicon.png";b.saveIcon(c,d,function(b){e=!0})}});b.Core.on("removeComponent",function(c,d){a(d).find("section").length&&-1<a(d).find("section").attr("id").toLowerCase().indexOf("menu")&&h.removeLocal(b.getProjectImagesDir()+"/mbr-favicon.png",function(a){a&&(e=!1,a=b.projectSettings.favicon||("secondary"===b.theme.type?"app/builder/images/logo5.png":"app/builder/images/logo.png"),0===a.indexOf("../../")&&(a=a.replace("../../",
"")),b.$body.find(".navbar-project-info .navbar-favicon").attr("src",a),b.addFilter("publishFiles",function(a){for(var c=0;c<a.length;c++)a[c].dest===b.IMAGES_FOLDER+"/mbr-favicon.png"&&a.splice(c,1);return a}),b.addFilter("exportProjectFiles",function(a){for(var c=0;c<a.length;c++)a[c].dest===b.IMAGES_FOLDER+"/mbr-favicon.png"&&a.splice(c,1);return a}))})});b.$body.find(".navbar-project-info .navbar-favicon").on("click",function(c){c.preventDefault();c.stopPropagation();b.openProjectSettings(b.projectPath+
"/project.mobirise");setTimeout(function(){a('#app-project-sidebar > [data-tab="common"]').click();a(".app-layer-common .favicon-setting-wrap").addClass("selected")},100)})},saveMediaImageDialog:function(a,e,c){b.projectSettings.favicon||void 0===c||(a=b.Core.getComponent(c))&&("Menu"===a._group||-1<a._name.toLowerCase().indexOf("menu"))&&(e=e.image.src)&&b.$body.find(".navbar-project-info .navbar-favicon").attr("src",e)},loadedProject:function(){e=!1;h.isExistsLocal(b.getProjectImagesDir()+"/mbr-favicon.png",
function(a){a&&(e=!0)});var a=b.projectSettings.favicon||("secondary"===b.theme.type?"app/builder/images/logo5.png":"app/builder/images/logo.png");0===a.indexOf("../../")&&(a=a.replace("../../",""));b.$body.find(".navbar-project-info .navbar-favicon").attr("src",a)}}})},["jQuery","mbrApp","TR()","Bridge"]);
