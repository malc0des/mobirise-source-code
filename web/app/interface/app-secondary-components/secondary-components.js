var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(g,h,m){g instanceof String&&(g=String(g));for(var n=g.length,p=0;p<n;p++){var w=g[p];if(h.call(m,w,p,g))return{i:p,v:w}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(g,h,m){g!=Array.prototype&&g!=Object.prototype&&(g[h]=m.value)};$jscomp.getGlobal=function(g){return"undefined"!=typeof window&&window===g?g:"undefined"!=typeof global&&null!=global?global:g};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(g,h,m,n){if(h){m=$jscomp.global;g=g.split(".");for(n=0;n<g.length-1;n++){var p=g[n];p in m||(m[p]={});m=m[p]}g=g[g.length-1];n=m[g];h=h(n);h!=n&&null!=h&&$jscomp.defineProperty(m,g,{configurable:!0,writable:!0,value:h})}};$jscomp.polyfill("Array.prototype.find",function(g){return g?g:function(g,m){return $jscomp.findInternal(this,g,m).v}},"es6","es3");$jscomp.arrayIteratorImpl=function(g){var h=0;return function(){return h<g.length?{done:!1,value:g[h++]}:{done:!0}}};
$jscomp.arrayIterator=function(g){return{next:$jscomp.arrayIteratorImpl(g)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(g,h){this.$jscomp$symbol$id_=g;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:h})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function g(m){if(this instanceof g)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(m||"")+"_"+h++,m)}var h=0;return g}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var g=$jscomp.global.Symbol.iterator;g||(g=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[g]&&$jscomp.defineProperty(Array.prototype,g,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var g=$jscomp.global.Symbol.asyncIterator;g||(g=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(g){$jscomp.initSymbolIterator();g={next:g};g[$jscomp.global.Symbol.iterator]=function(){return this};return g};
$jscomp.iteratorFromArray=function(g,h){$jscomp.initSymbolIterator();g instanceof String&&(g+="");var m=0,n={next:function(){if(m<g.length){var p=m++;return{value:h(p,g[p]),done:!1}}n.next=function(){return{done:!0,value:void 0}};return n.next()}};n[Symbol.iterator]=function(){return n};return n};$jscomp.polyfill("Array.prototype.keys",function(g){return g?g:function(){return $jscomp.iteratorFromArray(this,function(g){return g})}},"es6","es3");
defineM("secondary-components",function(g,h,m){function n(e){var b=document.implementation.createHTMLDocument("").createElement("DIV");g(b).append(g.trim(e));return b}function p(e){var b=e.alias,a=e._sourceTheme;return b?h.path2core(h.getAddonDir(b))+"/"+e._name+"/":a?h.path2core(h.getAddonDir(a)+"/components")+"/"+e._name+"/":h.path2core(h.theme.pathExport+"/components")+"/"+e._name+"/"}function w(e){var b=e;g.isArray(e)?b=e.map(w).join(" "):"object"==typeof e&&(b=Object.keys(e).filter(function(a){return e[a]}).join(" "));
return b}var A=function(e){return e.global=e}({url:function(e){return e&&"url("+e+")"}}),D=function(){function e(){mbrScript.Context.apply(this,arguments)}e.prototype=Object.create(mbrScript.Context.prototype);e.prototype.constructor=e;e.prototype.getProp=function(b){if(this.scopes[0]._params&&void 0!==this.scopes[0]._params[b])return this.scopes[0]._params[b];for(var a=1;a<this.scopes.length;a++)if(void 0!==this.scopes[a][b])return this.scopes[a][b]};return e}(),u=function(){function e(b){this._listeners=
{};this._appEventNamespace=b?"."+b:""}e.prototype.on=function(b,a){"function"==typeof a&&(this._listeners[b]=this._listeners[b]||[],this._listeners[b].push(a));return this};e.prototype.emit=function(b){if(this._listeners[b]){var a=Array.prototype.slice.call(arguments,1);h.fire(b+this._appEventNamespace+".SecondaryComponent",a);this._listeners[b].forEach(function(d){d.apply(this,a)},this)}return this};e.prototype.removeAllListeners=function(b){arguments.length?delete this._listeners[b]:this._listeners=
{};return this};e.prototype.removeListener=function(b,a){this._listeners[b]&&(a=this._listeners[b].indexOf(a),0<=a&&this._listeners[b].splice(a,1));return this};e.createChildClass=function(b,a){if("function"!=typeof b)throw Error('"constructor" is not a function');var d=function(){e.call(this,a);b.apply(this,arguments)};d.prototype=Object.create(e.prototype);return d.prototype.constructor=d};return e}(),E=function(){function e(b){b=b||{};b.template=b.template||"<div></div>";for(var a in b)this[a]=
b[a]}e.prototype.getTemplate=function(b){return this.template};e.prototype.initialize=function(b,a){b=a.item.scope;b.this={_params:{index:a.index}};b._params=a.global._params;return b};e.prototype.remove=function(){var b=this.arrivo.sourceFragment;b.parentNode&&b.parentNode.removeChild(b)};e.prototype.clone=function(){var b="",a=new e,d;for(d in this)this.hasOwnProperty(d)&&(a[d]=this[d]);a.$listSourceElement.find("> *:last").each(function(){b=this.outerHTML});a.arrivo.getParent().fork().on("ready",
function(c,f,d){a.template=f.outerHTML;a.arrivo=this;a.scope=c;a.$listSourceElement.append(d)}).process(b);return a};return e}();h.objectifyCSS=function(e){var b=g.Deferred();objectifyCSS(e,{lessjs:h.iwindow.less},function(a,d){a?b.reject(a):b.resolve(d)});return b.promise()};h.getUID=function(){var e="object"==typeof crypto&&crypto.getRandomValues?function(){var b=new Uint8Array(1);window.crypto.getRandomValues(b);return b[0]>=62*Math.floor(256/62)?e():"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(b[0]%
62)}:function(){return"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(62*Math.random()|0)};return function(b,a){"object"==typeof b?a=b:(a=a||{},a.length=b||22);b="";if(a.timePrefix){for(var d=(new Date).getTime(),c="";0<d;)c="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(d%62)+c,d=(d-d%62)/62;b+=c||"0"}a.length&&(b+=Array.apply(null,{length:a.length}).map(e).join(""));return b}}();var q=h.isSecondaryComponent=function(e){if("object"!=typeof e)if(/^\d+$/.test(e))e=
h.Core.getComponent(e);else return!1;return!e.alias&&"secondary"==h.theme.type||e._isSecondary},t=function(e){e.hasOwnProperty("_sc")||Object.defineProperty(e,"_sc",{value:new y(e)});return e._sc};h.on("themeLoaded",function(){h.theme.type=h.theme.params.theme.type||"primary"});h.on("beforeAppLoad",function(){function e(a,c){return a.filter(function(a){return 0>c.indexOf(a)})}function b(a){return'"'+(""+a).replace(/"/g,'\\"').replace(/\r/g,"").replace(/\n/g," ")+'"'}(function(){h.on("beforeShowCodeEditor",
function(a){a=h.Core.getComponent(a);q(a)||"pro.custom-html"===a._name&&"secondary"===h.theme.type?g("body").addClass("fullwidth-code-editor"):g("body").removeClass("fullwidth-code-editor")});h.on("showCodeEditor",function(a){a=h.Core.getComponent(a);if(q(a))if(h.Core.destroySummernote(),a._styles){var f=h.Core.getComponentStyles({_styles:a._styles});a._customCSS=f.css}else a._customCSS=""});h.on("savedCodeEditor",function(a){if(arguments.length){var f=h.Core.getComponent(a);q(f)&&(f._alwaysTop||
f._alwaysBottom)&&h.Core.$body.closest("html").stop().animate({scrollTop:f._alwaysTop?0:h.Core.$template.height()},1E3);q(f)&&h.Core.updateGlobalComponents(f._id,function(a,f){for(var c in f)if("_styles"===c||"_customHTML"===c||"object"!==typeof f[c]&&"function"!==typeof f[c]&&!/^_/g.test(c))f[c]=a[c]})}});h.$template.on("click",".component-code",function(a){var f=g(this).closest("[data-app-component-id]").attr("data-app-component-id");f=h.Core.getComponent(f);!q(f)||h.registeredAddons&&h.registeredAddons["code-editor"]&&
16<parseInt(h.registeredAddons["code-editor"].version)||(a.stopImmediatePropagation(),bootbox.dialog({message:'<p><b>You can\'t edit this block. Please update "Code Editor".</b></p>',buttons:{cancel:{label:"Ok",className:"btn-primary"}}}))})})();var a=h.iwindow.rivets;a.formatters.fakeFilter=new h.iwindow.Function("v, f",'if (typeof f == "function") return f(v); return "";');a.formatters.toNULL=new h.iwindow.Function("v",'if (v === "" || v === false) return null; return v;');a.formatters.grow=new h.iwindow.Function("items, count",
"count = Math.max(1, Math.min(500, parseInt(count) || 0));if (count < items.length) {Array.prototype.splice.call(items, count, items.length).forEach(function(item){ item.remove(); });} else if (count > items.length) {var item = items[ items.length - 1 ];for (var i = items.length; i < count; i++) {items[i] = item.clone();}}return items;");(function(){a.components["active-component"]={attributes:["collection","global","index","item"],template:function(a){return a.item.getTemplate(a)},initialize:function(a,
c){return c.item.initialize(a,c)}};a.binders["active-components"]={block:!1,priority:a.binders["each-*"].priority,unbind:a.binders["each-*"].unbind,update:a.binders["each-*"].update};a.binders["active-components"].bind=function(a){var c;if(null==this.iterated){var f=[this.view.prefix,this.type].join("-").replace("--","-");this.iterated=[];a.removeAttribute(f)}else{var d=this.iterated;f=0;for(c=d.length;f<c;f++)a=d[f],a.bind()}};a.binders["active-components"].routine=function(f,c){var d,b,e,l,g;c=
c||[];if(this.iterated.length>c.length){var h=0;for(l=this.iterated.length-c.length;h<l;h++){var k=this.iterated.pop();k.unbind();f.removeChild(k.childElement)}}var m=e=0;for(g=c.length;e<g;m=++e){var r=c[m];k=this.iterated[m];var n={collection:c,global:this.view.models,index:m,item:r};if((b=null==k)||k.models.item!==r){if(!b){var q=this.iterated;var p=0;h=m+1;for(l=q.length;h<l;h++)if(q[h].models.item===r){p=h;break}if(p){this.iterated.splice(m,0,this.iterated.splice(p,1)[0]);f.insertBefore(f.children[p],
f.children[m]);continue}k.unbind()}r=document.createElement("active-component");for(d in n)r.setAttribute(d,d);k=this.view.options();k.preloadData=!0;k=new a._.View(r,n,k);k.bind();k.childElement=r.firstChild;b?(this.iterated.push(k),f.appendChild(k.childElement)):(this.iterated[m]=k,f.replaceChild(k.childElement,f.children[m]))}}}})();a.binders["static-html"]={priority:2E3,bind:function(a){var c=this.observer?this.observer.value():this.value;c=this.formattedValue("function"!=typeof c||this.binder.function?
c:c.call(this.model));a.innerHTML=null!=c?c:"";return a},routine:function(a,c){return null!=c?c:""}};a.binders.style2={routine:function(a,c){var f=g(a),d=g(a).data("old-styles");if(d&&c!==d)for(var b in d)f.css(b,"");"object"!=typeof c&&(c={});f.css(c);g(a).data("old-styles",c)}};var d=a.binders.media;a.binders.media={routine:function(a,c){if(!a.getAttribute("mbr-media-simple"))return d.apply(this,arguments);var f=Object.keys(c)[0],b=c[f];"image"==f?C.update(g(a),b):"video"!=f&&"iconFont"==f&&z.update(g(a),
b)}};a.binders.class2={routine:function(a,c){g(a);var f=g(a).data("old-classes");c=w(c);if(f!=c){var d=c&&c.split(" ")||[];var b=f&&f.split(" ")||[];f=e(d,b).join(" ");d=e(b,d).join(" ");f&&g(a).addClass(f);d&&g(a).removeClass(d);g(a).data("old-classes",c)}}};a.originalBind=a.bind;a.bind=function(c,d,b){a.boundViews=a.boundViews||{};d=a.originalBind(c,d,b);g(c).attr("data-rv-view",d.models._rv);return a.boundViews[d.models._rv]=d};a.unbind=function(c){g(c).find("[data-rv-view]").addBack("[data-rv-view]").each(function(){var c=
g(this).attr("data-rv-view"),d=a.boundViews[c];d.unbind();delete a.boundViews[c];delete d.models._rv});return this};a.unbindAll=function(){a.boundViews.forEach(function(a){a.unbind()});a.boundViews=[]};var c=h.Core;c.isSecondaryComponent=q;c.getSecondaryComponent=t;c.transformSecondaryComponentForProject=function(a){var c="_anchor _checkPublish _cid _customHTML _protectedParams _JSplaceholders _name _PHPplaceholders _styles alias _once _global _isUserblock _sourceTheme _isSecondary typeCompatible _popupId safe".split(" "),
d=a._protectedParams||[],b;for(b in a)if("_params"==b)for(var f in a._params)0>d.indexOf(f)&&delete a._params[f];else 0>c.indexOf(b)&&delete a[b];return a};c.on("rivetsBlur",function(a){h.iwindow.$(a).trigger("change-component-node")});c.addFilter("getComponentStyles",function(a,c){if(q(c)){if(!c._id&&!c._name)return a;var d=t(c).getDefaultParams(),f="",e;for(e in d){var l=c._params[e];switch(d[e].type||"none"){case "fonts":f+="@"+e+": "+(l.css||"false")+";\n";break;case "color":case "range":case "switch":case "switch-off":f+=
"@"+e+": "+l+";\n";break;case "none":case "image":case "select":f+="@"+e+": "+b(l)+";\n";break;case "background":f+="@"+e+"-value: "+("color"==l.type?l.value:"image"==l.type?b(l.value):'""')+";\n",f+="@"+e+"-type: "+b(l.type)+";\n",l.color&&(f+="@"+e+"-color-value: "+l.color.value+";\n"),l.image&&(f+="@"+e+"-parallax: "+l.parallax+";\n")}}a.css=f+"\n"+a.css}return a});c.addFilter("beforeRenderStyles",function(a,c,d,b,e){return"@isPublish: "+d+";\n"+a});c.addFilter("componentSelector",function(a,c){q(c)&&
(a="."+y.getClassName(c));return a});c.on("changedComponentParams",function(a,d,b){a=c.getComponent(a);q(a)&&t(a).changeParam(d,b);c.$document.trigger("change.cards");"secondary"!==h.theme.type||q(a)||c.$template.find("[data-app-component-id="+a._id+"] .app-component-content > *").trigger("change.cards")});c.on("loadedComponent",function(a,d,b,e){e||"secondary"!==h.theme.type||c.$template.find("[data-app-component-id="+a._id+"] .app-component-content > *").trigger("add.cards");q(a)&&e&&-1!=a._customHTML.indexOf("mbr-form")&&
e&&(x.clean(a,b),x.prefix(a,b));q(a)&&e&&g(b[0]).find("[data-app-component-id="+a._id+"] .app-component-content > section").removeAttr("data-rv-view").find("img, span").removeAttr("media-simple")});c.on("changedComponentPosition",function(a,d){var b=c.getComponent(a);q(b)&&(d=void 0!==d&&c.$template.find("[data-app-component-id="+d+"] .app-component-content > *")[0],c.$template.find("[data-app-component-id="+a+"] .app-component-content > *").trigger("drag.cards",d||[]))});c.on("removeComponent",function(a){var d=
c.getComponent(a);q(d)&&c.$template.find("[data-app-component-id="+a+"] .app-component-content > *").trigger("delete.cards")});(function(){var a;c.on("addedComponent",function(d){clearTimeout(a);a=setTimeout(function(){var a=c.getComponent(d);q(a)&&a._alwaysTop&&c.$body.closest("html").stop().animate({scrollTop:0},1E3)},50)})})();c.addFilter("loadComponentTemplate",function(a,c,d,b){return q(c)?(c._customHTML=c._customHTML||a,c._customCSS="","_styles"in c||(c._styles=b),a=t(c),d&&(a._arrivo._scope.isPublish=
!0),a.getTemplate()):a});c.addFilter("getComponentParams",function(a,d){d=c.getComponent(d);q(d)&&(a.default=c.convertComponentParams(t(d).getDefaultParams()));return a})});var C={update:function(e,b){var a=e.closest("a");e.attr({src:b.src,alt:b.alt,title:b.title});h.isAMP()&&"secondary"===h.theme.type&&e.attr("data-aspectratio",b.naturalHeight/b.naturalWidth||e.attr("data-aspectratio")||"");if(h.isAMP()){var d=e.closest("amp-img");b.lightbox?(e.attr("lightbox",b.lightbox),d.attr("lightbox",b.lightbox),
b.link=void 0):d.removeAttr("lightbox");b.title?d.attr("title",b.title):d.removeAttr("title")}b.link?(a.length||(a=e.after("<a/>").next(),a[0].appendChild(e[0])),a.attr("href",b.link),b.linkInNewWindow?a.attr("target","_blank"):a.removeAttr("target"),a=h.applyFilter("secondaryImgLinkUpdate",a,b)):a.length&&a.contents().each(function(){a[0].parentNode.insertBefore(this,a[0])}).end().remove()}},x=function(){return{update:function(e,b){var a=e.find("[data-form-alert]");e="FORM"==e[0].tagName?e:e.find("form");
a.html(b.alerts.success);e.attr("action",b.action);e.attr("data-verified",b.verify.action);g(e[0].elements).each(function(){var a=g(this).attr("name"),c=e.find("[for='"+g(this).attr("name")+"']")||"",f=e.find("[data-for='"+g(this).attr("name")+"']")||"";if(a&&b.fields[a]){var l=0,h;for(h in b.fields)b.fields[h].visible&&l++;l||(b.fields[a].visible=!0);b.fields[a].visible?(g(this).removeAttr("hidden"),c.removeAttr("hidden"),f.removeAttr("hidden")):(g(this).attr("hidden","true"),c?c.attr("hidden","hidden"):
!1,f?f.attr("hidden","hidden"):!1);b.fields[a].customTitle?g(this).attr("placeholder",b.fields[a].customTitle):g(this).removeAttr("placeholder")}})},clean:function(e,b){b=g(b[0]).find("[data-app-component-id="+e._id+"] [mbr-form]");var a=b.attr("mbr-form");e=e[a];for(var d in e.fields)e.fields[d].visible||(b.find("[name='"+d+"']").remove(),b.find("[for='"+d+"']").remove(),b.find("[data-for='"+d+"']").remove())},prefix:function(e,b){var a=e._id,d=e._anchor,c=g(b[0]).find("[data-app-component-id="+
a+"] form");g(c[0].elements).each(function(){var a=g(this).attr("name"),b=c.find("[for='"+g(this).attr("name")+"']")||"",e=a+"-"+d;a&&g(this).attr("id",e);b&&b.attr("for",e)})}}}(),z=function(){function e(b,a){var d=h.iconFonts[a.family],c=[];d?(d.prefix&&c.push(d.prefix+a.name),d.class&&c.push(d.class)):console.warn("IconFont not found in fonts list",a,b);b.data("old-icon-classes",c.join(" "))}return{init:e,update:function(b,a){var d=b.closest("a"),c=h.iconFonts[a.family];c?(b.removeClass(b.data("old-icon-classes")),
c.prefix?b.addClass(c.prefix+a.name).removeAttr("data-name").html(""):b.html("&#x"+c.codes[c.names.indexOf(a.name)]).attr("data-name",a.name),c.class&&b.addClass(c.class),e(b,a),b.css({"font-size":a.size?parseInt(a.size,10)+"px":"",color:a.color||"",fill:a.color||""}),a.link?(d.length||(d=b.after("<a/>").next(),d[0].appendChild(b[0])),d.attr("href",a.link),a.newWindow?d.attr("target","_blank"):d.removeAttr("target"),d=h.applyFilter("secondaryIconLinkUpdate",d,a)):d.length&&d.contents().each(function(){d[0].parentNode.insertBefore(this,
d[0])}).end().remove()):console.warn("IconFont not found in fonts list",a,b)}}}(),G=function(){var e=function(){function a(a){this._params={};a&&a.replace(/^\?/,"").split("&").forEach(function(a){a=a.split("=");if(a[0]){var c=a[0],d="";1<a.length&&(d=a.slice(1).join("="));this._params[c]=d}},this)}a.prototype.set=function(a,c){this._params[a]=encodeURIComponent(c)};a.prototype.toString=function(){var a="",c;for(c in this._params)a&&(a+="&"),a+=c+"="+this._params[c];a&&(a="?"+a);return a};return a}(),
b=function(){function a(a){var c,d=this;this.hash="";this._prefix=a.replace(/#.*$/,function(a){1<a.length&&(d.hash=a);return""}).replace(/\?.*$/,function(a){1<a.length&&(c=a);return""});this.searchParams=new e(c)}a.prototype.toString=function(){return this._prefix+this.searchParams.toString()+this.hash};return a}();return{update:function(a,d){var c=a.find("iframe"),e=new b(d.src);c.length||(c=a.append("<iframe/>").find("iframe"));"4:3"==d.aspectratio?c.attr({width:800,height:600}):c.removeAttr("width height");
d.loop&&e.searchParams.set("loop",1);d.autoplay&&e.searchParams.set("autoplay",1);c.attr("src",e.toString())}}}(),H=function(){function e(){this.isTest=!1;this.hardReset()}e.prototype.reset=function(){this.nextNode=this.lastError=null;this.isBreaked=this.isStopped;this.isTraverseForOneNode=this.isIgnoredChildren=!1;this.attr=this.node=null;return this};e.prototype.hardReset=function(){this.isStopped=!1;this.reset();return this};e.prototype.error=function(b){this.lastError=b;return this};e.prototype.ignoreChildren=
function(){this.isIgnoredChildren=!0;return this};e.prototype.traverseForOneNode=function(){this.isTraverseForOneNode=!0;return this};e.prototype.break=function(){this.isBreaked=!0;return this};e.prototype.test=function(b){this.isTest=b;return this};e.prototype.stop=function(){this.isStopped=this.isBreaked=!0;return this};e.prototype.next=function(b){this.nextNode=b;return this};return e}(),y=h.SecondaryComponent=function(){function e(b){this._defaultParams={};this._component=b;this._template="";
b._cid||(b._cid=h.getUID(3,{timePrefix:!0}));this.update()}e.prototype.getDefaultParams=function(){return this._defaultParams};e.prototype.getTemplate=function(){return this._template};e.prototype.createElementFromTemplate=function(){return n(this.getTemplate()).firstChild};e.prototype.getClassName=function(){return e.getClassName(this._component)};e.prototype.changeParam=function(b,a){var d=new k.ParamEvent("change");this._arrivo.emit("changeParam",d,b,a);d.defaultPrevented||h.Core.renderComponentsStyles(null,
null,this._component)};e.prototype.changeNode=function(b,a){this._arrivo.emit("changeNode",new k.NodeEvent("change"),b,a)};e.prototype.isActualTemplate=function(){return this._arrivo&&this._arrivo._template==this._component._customHTML};e.prototype.update=function(){var b=this,a=this._component;if(this.isActualTemplate())return this;this._arrivo=(new k(this._component._customHTML,{component:a})).on("ready",function(d,c,e){b._template=c;b._defaultParams=e;d._params={};for(var f in e)c=e[f],d._params[f]=
c.default;if(a._params)for(f in a._params)(c=b._arrivo.getParam(f))&&c.isProtected()&&(c=a._params[f],c instanceof Object&&(c=Array.isArray(c)?g.extend(!0,[],Array.prototype.slice.call(c)):g.extend(!0,{},c)),d._params[f]=c);c="_anchor _checkPublish _cid _customCSS _customHTML _id _JSplaceholders _name _PHPplaceholders _styles alias _isUserblock _sourceTheme _isSecondary typeCompatible _popupId safe".split(" ");for(f in a)0>c.indexOf(f)&&delete a[f];delete a._rv;g.extend(!0,a,d);d=h.$template.find("[data-app-component-id="+
a._id+"]");d[(a._noDrag?"add":"remove")+"Class"]("no-sortable");d[(a._positionAbsolute?"add":"remove")+"Class"]("pos-absolute");a._alwaysBottom?d.attr("data-app-always-bottom","true").appendTo(d.parent()):d.removeAttr("data-app-always-bottom");a._alwaysTop?d.attr("data-app-always-top","true").prependTo(d.parent()):d.removeAttr("data-app-always-top");a._noDrag?d.find(".sortable").remove():d.find(".sortable").length||d.find(".app-component-edit").prepend('<span class="mbr-btn sortable mbr-icon-arrows-vertical" data-tooltipster="bottom" title="Drag Block"></span>');
f=!1;for(var k in e)if(e[k].type){f=!0;break}f?d.find(".component-params").length||d.find(".component-remove").before('<span class="mbr-btn component-params mbr-icon-cog" data-tooltipster="bottom" title="'+m("Block Parameters")+'"></span>'):d.find(".component-params").remove()}).on("changedTemplate",function(d){d=d.replace(/<([-a-z0-9]+)(\s[^<>]+)>/g,function(a,d,b){b=b.replace(/\s([-a-z]+)="([^"]*)"/g,function(a,c,d){if("checked"==c||"selected"==c||!d)return" "+c;d=d.replace(/&lt;/g,"<").replace(/&gt;/g,
">").replace(/&amp;/g,"&");return" "+c+'="'+d+'"'});return"<"+d+b+">"});this._template=a._customHTML=d}).on("changedParam",function(d,c,b){"object"==typeof c&&(c=g.extend(!0,{},c));h.Core.$template.find("[data-app-component-id="+a._id+"] .app-component-content > *").trigger("changeParameter.cards",[d,c].concat(b&&String(b)||[]))}).on("changedNode",function(d,c){switch(c.type){case "icon":case "image":case "video":var b='[mbr-media="'+d+'"]'}b&&h.Core.$template.find("[data-app-component-id="+a._id+
"] .app-component-content > *").find(b).trigger("changeContent.cards",[c.type])});this._arrivo.process();h.cleanOnceComponents();return this};e.validate=function(b){var a=g.Deferred();(new k(b,{component:{},test:!0})).on("ready",function(){a.resolve()}).on("error",function(d){a.reject(d)}).process();return a.promise()};e.getClassName=function(b){return"cid-"+b._cid};return e}(),k=h.Arrivo=function(){var e={tags:{},attrs:{}},b=u.createChildClass(function(a,d){this.flow=new H;d.test&&this.flow.test(!0);
this._uid=0;this._template=a;this._component=d.component;this._scope={};this._nodes={};this._params={};this._newComponent={_protectedParams:[]};this.on("changeParam",function(a,d,b){d in this._params&&(a.target=this._params[d],a.targetName=d,a.target.trigger(a,b),this.emit("changedTemplate",this.sourceFragment.innerHTML),a.isPropagationStopped||this.emit("changedParam",d,b))}).on("changeNode",function(a,d,b){d in this._nodes&&(a.target=this._nodes[d],a.targetName=d,a.target.trigger(a,b),this.emit("changedTemplate",
this.sourceFragment.innerHTML),a.isPropagationStopped||this.emit("changedNode",d,a.target))})});b.prototype.getUName=function(){return"uname__"+ ++this._uid};b.prototype.getComponent=function(){return this._component};b.prototype.getComponentsDir=function(){var a=this._component.alias,d=this._component._sourceTheme;return a?h.path2core(h.getAddonDir(a))+"/":d?h.path2core(h.getAddonDir(d))+"/components/":h.path2core(h.theme.pathExport+"/components")+"/"};b.prototype._bindNodes=function(a,d){for(var c,
b=[a],e=[d];a=b.pop();)if(d=e.pop(),c=a.nodeType,c==a.TEXT_NODE||c==a.ELEMENT_NODE)if(d._assocElement=a,a._assocElement=d,c==a.ELEMENT_NODE)for(c=0;c<a.childNodes.length;c++)b.push(a.childNodes[c]),e.push(d.childNodes[c])};b.prototype.findErrorLine=function(){var a=0,d=h.getUID();if(!this.flow.node)return a;if(this.flow.attr){var c=this.flow.attr.value;var b=this.flow.attr.name;this.flow.node.setAttribute(b,d);var e=this.sourceFragment.innerHTML.indexOf(d);this.flow.node.setAttribute(b,c)}else this.flow.node.nodeType==
this.flow.node.TEXT_NODE&&(c=this.flow.node.nodeValue,this.flow.node.nodeValue=d,e=this.sourceFragment.innerHTML.indexOf(d),this.flow.node.nodeValue=c);0<=e&&(e=this.sourceFragment.innerHTML.substr(0,e).split(c).length,a=this._template.split(c,e).join(c).split("\n").length);return a};b.prototype.process=function(){var a=this._template;this.sourceFragment=n(a);this.resultFragment=n(a);this._bindNodes(this.sourceFragment,this.resultFragment);this._process(this.sourceFragment,!0);if(this.flow.isTest&&
this.flow.lastError){if("line"in this.flow.lastError){var d=this.findErrorLine();d&&(this.flow.lastError.line+=d)}this.flow.attr&&(this.flow.lastError.message=this.flow.lastError.message.replace(/^\s*Parse error:/,'Parse error in "'+this.flow.attr.name+'" attribute:'));this.emit("error",this.flow.lastError)}else{a={};for(d in this._params)a[d]=this._params[d].prop();this.emit("ready",this._newComponent,this.resultFragment.innerHTML,a)}};b.prototype._process=function(a,d){var c,b=this.flow.isTraverseForOneNode,
l=b?a:a.firstChild;for(d&&this.flow.hardReset();l&&!this.flow.isStopped;){this.flow.reset();this.flow.node=l;a=l.nextSibling;if(l.nodeType==l.ELEMENT_NODE){if(l.hasAttributes())for(var h=l.attributes,k=0;k<h.length;k++){this.flow.attr=h[k];var m=h[k].name;(c=e.attrs[m])?c.call(this,g(l._assocElement),g(l),h[k].value,m):(c=e.attrs["*"])&&c.call(this,l._assocElement,l,h[k].value,m);if(this.flow.isBreaked)return}this.flow.attr=null;h=d?":root":l.tagName.toLowerCase();(c=e.tags[h])?c.call(this,g(l._assocElement),
g(l),h):(c=e.tags["*"])&&c.call(this,l._assocElement,l,h);if(this.flow.isBreaked)break;this.flow.nextNode&&(a=this.flow.nextNode);this.flow.isIgnoredChildren||this._process(l,!1)}else if(l.nodeType==l.TEXT_NODE&&e.text&&(e.text.call(this,l._assocElement),this.flow.isBreaked))break;if(b)break;l=a}};b.prototype.addParam=function(a,d){if(a in this._params){if(this._params[a]===d)return;this._params[a].trigger("delete")}var c,b=d.elm();b&&!d.prop("condition")&&(c=b.attr("condition"))&&(this.flow.node=
b[0],this.flow.attr={name:"condition",value:c},c=this.getScript(c),b=this.getUName(),c?this.addProp(b,this.createFunction(c)):this.addProp(b,function(){return!1}),d.prop("condition",b));d.isProtected()&&(c=this._newComponent._protectedParams)&&0>c.indexOf(a)&&c.push(a);this._params[a]=d;return this};b.prototype.getParam=function(a){return this._params[a]};b.prototype.addNode=function(a,b){if(a in this._nodes){if(this._nodes[a]===b)return;this._nodes[a].trigger("delete")}this._nodes[a]=b;return this};
b.prototype.getNode=function(a){return this._nodes[a]};b.prototype.addProp=function(a,b){if("object"==typeof a)for(var c in a)b=a[c],null!==b&&void 0!==b&&(this._newComponent[c]=b);else this._newComponent[a]=b;return this};b.prototype.getProp=function(a){return this._newComponent[a]};b.prototype.getScript=function(a){try{var b=mbrScript(a);if("repeat"==b.type)throw b=null,new mbrScript.Error("Parse error: Operator 'in' is not supported",0);}catch(c){this.flow.error(c),this.flow.isTest?this.flow.stop():
console.error(c)}return b};b.prototype.createFunction=function(a){var b=new D([this.getComponent(),this._scope,A]);return(new h.iwindow.Function("","var result = ("+a.code+'); if (result === undefined || result === null) return ""; return result;')).bind(b)};b.prototype.fork=function(){return(new b.Scope(this)).on("changedTemplate",function(){this._parent.emit("changedTemplate",this._parent.sourceFragment.innerHTML)}).on("changedNode",function(a,b){this._parent.emit("changedNode",a,b)})};b.Scope=
function(){var a=function(){function a(){mbrScript.Context.apply(this,arguments)}a.prototype=Object.create(mbrScript.Context.prototype);a.prototype.constructor=a;a.prototype.getProp=function(a){if("this"==a)return this.scopes[0]&&this.scopes[0]._params;if(this.scopes[1]._params&&void 0!==this.scopes[1]._params[a])return this.scopes[1]._params[a];for(var b=2;b<this.scopes.length;b++)if(void 0!==this.scopes[b][a])return this.scopes[b][a]};return a}(),d=u.createChildClass(function(a){this.flow=a.flow;
this._uid=0;this._parent=a;this._template=a._template;this._component=a._component;this._scope=a._scope;this._nodes={};this._params={};this._newComponent={_checkPublish:function(){return!!a._scope.isPublish}};this.on("changeNode",function(a,b,c){b in this._nodes&&(a.target=this._nodes[b],a.targetName=b,a.target.trigger(a,c),this.emit("changedTemplate"),a.isPropagationStopped||this.emit("changedNode",b,a.target))})});d.prototype.addParam=function(){};d.prototype.getParam=function(){};d.prototype.getUName=
function(){return this._parent.getUName()};d.prototype.getParent=function(){return this._parent};d.prototype.process=function(a){if("string"==typeof a){var c=a;a=n(c);c=n(c);b.prototype._bindNodes(a,c);this._process(a);a=c.firstChild}else this.flow.traverseForOneNode(),this._process(a._assocElement);this.resultFragment=a;this.sourceFragment=a._assocElement;this.flow.isTest&&this.flow.lastError||this.emit("ready",this._newComponent,this.resultFragment,this.sourceFragment);return this};d.prototype.createFunction=
function(b){var c=new a([null,this.getComponent(),this._scope,A]);return(new h.iwindow.Function("scope","this.scopes[0] = scope; var result = ("+b.code+'); if (result === undefined || result === null) return ""; return result;')).bind(c)};for(var c in b.prototype)c in d.prototype||(d.prototype[c]=b.prototype[c]);return d}();b.Param=function(){function a(a){u.call(this,"Param");this._props="object"==typeof a?a:{};this._protected=!1}var d=function(a){return"string"==typeof a&&(a=a.replace(/^\s+|\s+$/g,
""))?a.split(/\s+/):[]};a.prototype.on=function(a,b){d(a).forEach(function(a){u.prototype.on.call(this,a,b)},this);return this};a.prototype.off=function(a,b){if(arguments.length){var c="remove"+(1<arguments.length?"Listener":"AllListeners");d(a).forEach(function(a){u.prototype[c].call(this,a,b)},this)}else u.prototype.removeAllListeners.call(this);return this};a.prototype.trigger=function(a){a="object"==typeof a?[a]:d(a).map(function(a){return new b.ParamEvent(a,{target:this})},this);var c=Array.prototype.slice.call(arguments,
1);a.forEach(function(a){u.prototype.emit.apply(this,[a.type,a].concat(c))},this);return this};a.prototype.elm=function(a){return arguments.length?(this._elm=a,this):this._elm};a.prototype.prop=function(a,b){var c=arguments.length;return 1<c?(this._props[a]=b,this):"object"==typeof a?(this._props=a,this):c?this._props[a]:this._props};a.prototype.removeProp=function(a){delete this._props[a];return this};a.prototype.protect=function(){this._protected=!0;return this};a.prototype.isProtected=function(){return this._protected};
return a}();b.Node=function(){function a(a,b){u.call(this,"Node");Object.defineProperty(this,"type",{get:function(){return a},enumerable:!0});this._elm=b}a.prototype.on=b.Param.prototype.on;a.prototype.off=b.Param.prototype.off;a.prototype.trigger=b.Param.prototype.trigger;a.prototype.elm=function(a){return arguments.length?(this._elm=a,this):this._elm};return a}();b.ParamEvent=function(a,b){var c=!1,d=!1;this.preventDefault=function(){c=!0};this.stopPropagation=function(){d=!0};Object.defineProperties(this,
{type:{value:a,enumerable:!0},defaultPrevented:{get:function(){return c},enumerable:!0},isPropagationStopped:{get:function(){return d},enumerable:!0}});if("object"==typeof b)for(var e in b)this[e]=b[e]};b.NodeEvent=b.ParamEvent;b.addHandler=function(a,d,c){e[a]||(e[a]={});e[a][d]=c;return b};b.tag=function(a,d){return b.addHandler("tags",a.toLowerCase(),d)};b.attr=function(a,d){return b.addHandler("attrs",a,d)};b.text=function(a){e.text=a;return b};b.handlers=e;return b}();(function(){function e(b){for(var a,
d=b.firstElementChild;d&&!this.flow.isBreaked;){a=g(d);b=!0;for(var c in k.handlers.params)if(a.is(c)){this.flow.node=d;b=!1;var f=a.attr("name");if(f&&!/^[_a-zA-Z][_a-zA-Z0-9]*$/.test(f)){var h=Error('Incorrect parameter name: "'+f+'"');h.line=0;if(this.flow.isTest){this.flow.attr={name:"name",value:f};this.flow.error(h).stop();return}console.error(h)}(a=k.handlers.params[c].call(this,a,a.attr("title")||f,a.val()))&&this.addParam(f||this.getUName(),a);break}b&&e.call(this,d);d=d.nextElementSibling}}
k.param=function(b,a){return k.addHandler("params",b,a)};k.tag("mbr-parameters",function(b,a){b.remove();this.flow.ignoreChildren();k.handlers.params&&e.call(this,a[0])})})();k.param("hr, header",function(e){return(new k.Param({type:"separator",title:e.html()||""})).elm(e)});k.param("label",function(e){return(new k.Param({type:"label",title:e.html()||"label"})).elm(e)});k.param("input[type=text], textarea",function(e,b,a){var d=e.is("textarea");return(new k.Param({type:d?"textarea":"text",title:b||
"Text",default:a||""})).elm(e).on("change",function(a,b){d?e.text(b):e.attr("value",b)})});k.param("input[type=checkbox]",function(e,b){var a=void 0!==e.attr("inverted");return(new k.Param({type:"switch"+(a?"-off":""),title:b||(a?"Disable":"Enable"),default:e.prop("checked")})).elm(e).on("change",function(a,b){b?e.attr("checked",!0):e.removeAttr("checked")})});k.param("input[type=radio]",function(e,b,a){var d=this,c=e.attr("name")||this.getUName(),f=this.getParam(c),g=e.prop("checked");f||(f=new k.Param({default:""}),
f.radioGroup=this.getUName(),this.addParam(c,f));e.attr("title")||(b=e.is("[title]")||!a?"":a);e.is("[value]")||(a=b);b=(new k.Param({type:"radio",name:f.radioGroup,title:b,default:g})).elm(e).on("change",function(b,f){b.stopPropagation();f?(e.attr("checked",!0),d.getComponent()._params[c]=a,d.emit("changedParam",c,a)):(e.removeAttr("checked"),b.preventDefault())});this.addParam(this.getUName(),b);g&&f.prop("default",a)});k.param("select",function(e,b,a){var d={};e.find("option").each(function(){var a=
g(this),b=a.attr("value");a=a.html();void 0===b&&(b=a);d[b]=a});return(new k.Param({type:"select",title:b||"Select",values:d,inline:e.is("[inline]"),multiple:e.is("[multiple]"),default:a})).elm(e).on("change",function(a,b){e.find("option[selected]").removeAttr("selected");e.find("option").each(function(){var a=g(this),c=a.attr("value");void 0===c&&(c=a.html());if(Array.isArray(b))for(var d=0;d<b.length;d++){if(c===b[d]){a.attr("selected",!0);break}}else c==b&&a.attr("selected",!0)})})});k.param("fieldset[type=background]",
function(e,b,a){b=e.find("image, color, video".replace(/(\w+)/g,"input[type=$1]:last"));if(b.length){var d=this,c={},f=[],h=this.getUName(),m=e.is("[parallax]"),F=k.handlers.params,v=e.attr("name")||this.getUName(),n=(new k.Param({type:"background"})).elm(e).on("select",function(a,b){a=d.getComponent()._params[v];a.type=b;a.value=a[b].value;a.parallax=m&&"image"==b&&a[b].parallax;d.emit("changedParam",v,a,"type")}).on("change",function(a,b,c,e){a=d.getComponent()._params[v];a.type===b&&(a[c]=e);a[b][c]=
e;d.emit("changedParam",v,a,c)});b.each(function(){var a=g(this),b=a.attr("type"),l=a.attr("title"),B=a.is("[selected]"),r=(F["input[type="+b+"]"]||g.noop).call(d,a,"",a.val());if(r){var p=(new k.Param({type:"radio",name:h,default:B})).elm(a).on("change",function(c,d){c.stopPropagation();d?(a.attr("selected",!0),n.trigger("select",b)):(a.removeAttr("selected"),c.preventDefault())});switch(b){case "image":r.prop("title","");p.prop("title",l||"Background Image");c[b]={value:r.prop("default"),parallax:m&&
a.is("[parallax]")};break;case "color":p.prop("title",l||"Background Color");c[b]={value:r.prop("default")};break;case "video":r.prop("default",{url:r.prop("default").url}),p.prop("title",l||"Background Video"),c[b]={value:r.prop("default")}}d.addParam(d.getUName(),p);l=d.getUName();d.addProp(l,d.createFunction(d.getScript(v+'.type == "'+b+'"')));r.on("change",function(a,c){a.stopPropagation();n.trigger("change",b,"value",c)}).prop("condition",l);f.push(r);m&&"image"==b&&f.push((new k.Param({type:"switch",
title:e.attr("parallax")||"Parallax",default:a.is("[parallax]"),condition:l})).elm(a).on("change",function(c,d){c.stopPropagation();d?a.attr("parallax",""):a.removeAttr("parallax");n.trigger("change",b,"parallax",d)}));if(B||!c.type)c.type=b,c.value=c[b].value,c.parallax="image"==b&&c[b].parallax}});f.forEach(function(a){d.addParam(d.getUName(),a)});this.addParam(v,n.prop("default",c))}});k.param("input[type=color]",function(e,b,a){return(new k.Param({type:"color",title:b||"Color",default:a||"#ffffff"})).elm(e).on("change",
function(a,b){e.attr("value",b)})});k.param("input[type=range]",function(e,b,a){var d=e.attr("min")||0,c=e.attr("max")||100;return(new k.Param({type:"range",min:d,max:c,step:e.attr("step")||1,title:b||"Range",inline:e.is("[inline]"),default:a||(parseFloat(c)+parseFloat(d))/2})).elm(e).on("change",function(a,b){e.attr("value",b)})});k.param("input[type=font]",function(e,b,a){for(var d,c=h.getAccesibleFonts(),f=0;f<c.length;f++)if(a===c[f].name){d=c[f];break}return(new k.Param({type:"fonts",title:b||
"Font",inline:!0,default:d||c[0]||{}})).elm(e).on("change",function(a,b){e.attr("value",b.name)})});k.param("input[type=image]",function(e,b,a){a&&0>a.indexOf(":/")&&(a=p(this.getComponent())+a);return(new k.Param({type:"image",title:b||"Image",default:a})).elm(e).on("change",function(a,b){e.attr("value",b)})});k.param("input[type=video]",function(e,b,a){return(new k.Param({type:"video",title:b||"Video",default:{url:a||"http://www.youtube.com/watch?v=uNCr7NdOJgw",loop:!0}})).elm(e).on("change",function(a,
b){e.attr("value",b.rawUrl)})});k.param("input[type=hidden]",function(e,b,a){return new k.Param({default:a||""})});k.param("input[type=id]",function(e){return new k.Param({default:h.getUID(3,{timePrefix:!0})})});k.tag(":root",function(e,b){var a=b.attr("plugins");a&&(a=a.replace(/\s*,\s*/g,","));this.addProp({_alwaysBottom:b.is("[always-bottom]"),_alwaysTop:b.is("[always-top]"),_global:b.is("[global]"),_noDrag:b.is("[not-draggable]"),_plugins:a||null,_positionAbsolute:b.is("[position-absolute]"),
_once:b.is("[once]")&&(b.attr("once")||!0)});e.attr("mbr-id","_anchor").addClass(y.getClassName(this.getComponent())).removeAttr("plugins group always-top always-bottom position-absolute not-draggable global")});k.attr("mbr-list",function(e,b){var a=[],d=this.getUName(),c=this;e.find("> *").each(function(){var d=new E({$listSourceElement:b});c.fork().on("ready",function(a,b){d.template=b.outerHTML;d.arrivo=this;d.scope=a}).process(this);a.push(d)}).remove();var f=(f=b.attr("mbr-list-grow"))?" | grow _params."+
f:"";e.attr("mbr-active-components",d+f).removeAttr("mbr-list mbr-list-grow");this.addProp(d,a);this.flow.ignoreChildren()});k.attr("mbr-text",function(e,b){var a=this.getUName(),d=(new k.Node("content",b)).on("change",function(a,d){b.html(d)});e.attr({"data-app-edit":"content","mbr-static-html":a,"mbr-content-edit":a,"data-app-placeholder":m("Type Text"),"mbr-on-change-component-node":function(b,d){b.addProp(d,function(c,d){b.emit("changeNode",new k.NodeEvent("change",{originalEvent:c}),a,d[a])});
return d}(this,this.getUName())});e.is("[mbr-article]")&&e.attr({"data-app-edit":"full","data-multiline":!0,"data-app-placeholder":m("Type Content")});e.removeAttr("mbr-text mbr-article");this.addNode(a,d);this.addProp(a,b.html());this.flow.ignoreChildren()});k.attr("mbr-article",k.handlers.attrs["mbr-text"]);"h1 h2 h3 h4 h5 h6 p".split(" ").forEach(function(e){k.tag(e,k.handlers.attrs["mbr-text"])});(function(){function e(b){b=g(n(b));b.find("a").removeAttr("data-app-btn data-toolbar");return b.html()}
k.attr("mbr-buttons",function(b,a,d,c){var f=this.getUName();d=b.is("[mbr-buttons]")?"buttons":"menu";var g=(new k.Node(d,a)).on("change",function(b,c){a.html(c)});b.attr({"data-app-edit":d,"mbr-static-html":f,"mbr-content-edit":f,"mbr-on-change-component-node":function(a,b){a.addProp(b,function(b,c){b=new k.NodeEvent("change",{originalEvent:b});a.emit("changeNode",b,f,e(c[f]))});return b}(this,this.getUName())}).attr(c,this.getUName()).find("a").attr({"data-app-btn":"true","data-app-placeholder":m("Type Text")});
"menu"==d&&b.attr("data-app-modern-menu",!0);this.addNode(f,g);this.addProp(f,b.html());this.flow.ignoreChildren();b.html("")})})();k.attr("mbr-menu",k.handlers.attrs["mbr-buttons"]);k.attr("mbr-icon",function(e,b){var a=this.getUName(),d=g.extend(h.extractIconFont(e[0]),{link:"",newWindow:!1}),c=(new k.Node("icon",b)).on("change",function(a,c){z.update(b,c.iconFont)});b.closest("a").each(function(){d.link=g(this).attr("href")||"#";d.newWindow=g(this).is("[target=_blank]")});z.init(b,d);e.attr({"mbr-media":a,
"mbr-media-simple":!0,"mbr-on-click":function(b,c){b.addProp(c,function(c,d){c.preventDefault();c.stopPropagation();h.Core.showMediaIconFontDialog(g.extend(!0,{},d[a]),function(c){d[a]=c;b.emit("changeNode",new k.NodeEvent("change"),a,d[a]);h.Core.updateGlobalComponents(b.getComponent()._id,function(a,b){for(var c in b)if("_customHTML"===c||"object"!==typeof b[c]&&"function"!==typeof b[c]&&!/^_/g.test(c))b[c]=a[c];t(b).update()})},c.target)});return c}(this,this.getUName())}).removeAttr("mbr-icon");
this.addNode(a,c);this.addProp(a,{iconFont:d});this.flow.ignoreChildren()});k.tag("img",function(e,b){var a={active:!0},d=this.getUName(),c=(new k.Node("image",b)).on("change",function(a,c){C.update(b,c.image)});["src","alt","title","width","height"].forEach(function(c){var d=b.attr(c);if(d||"width"!=c&&"height"!=c)a[c]=d});if(0>a.src.indexOf(":/")&&0>a.src.indexOf("app/themes"))if(0===a.src.indexOf("../")){var f=p(this.getComponent());f=f.split("/");f.splice(-2,2);f=f.join("/");a.src=f+a.src.slice(2)}else a.src=
p(this.getComponent())+a.src;b.closest("a").each(function(){a.link=g(this).attr("href")||"#";a.linkInNewWindow=g(this).is("[target=_blank]")});0<a.width&&(a.width*=2);0<a.height&&(a.height*=2);f=e.closest("amp-img");var l=!1,m=!1;g(f).hasClass("image-without-link")&&(m=!0);g(f).is(".lb-image")&&(l=!0);if(g(f).attr("lightbox")||""==g(f).attr("lightbox"))a.lightbox=g(f).attr("lightbox")||!0;e.attr({"mbr-media":d,"mbr-media-simple":!0,"mbr-on-click":function(a,b){a.addProp(b,function(b,c){b.preventDefault();
b.stopPropagation();h.showMediaImageDialog(g.extend(!0,{},c[d],{image:{width:2*g(b.target).width(),naturalWidth:b.target.naturalWidth,naturalHeight:b.target.naturalHeight}}),function(b){c[d]=b;a.emit("changeNode",new k.NodeEvent("change"),d,c[d]);h.Core.updateGlobalComponents(a.getComponent()._id,function(a,b){for(var c in b)if("_customHTML"===c||"object"!==typeof b[c]&&"function"!==typeof b[c]&&!/^_/g.test(c))b[c]=a[c];t(b).update()})},!1,m,!1,c._id,l)});return b}(this,this.getUName())});this.addNode(d,
c);this.addProp(d,{image:a})});k.attr("mbr-video",function(e,b){var a=this.getUName(),d={active:!0,src:"http://www.youtube.com/watch?v=uNCr7NdOJgw",aspectratio:"16:9",autoplay:!1,loop:!1},c=(new k.Node("video",b)).on("change",function(a,c){G.update(b,c.video)});b.find("iframe:last").each(function(){var a=g(this),b=a.attr("height"),c=a.attr("width");if(a=a.attr("src")){d.src=a;var e=new URL(d.src);a=e.searchParams.get("autoplay");e=e.searchParams.get("loop");d.autoplay="1"===a||void 0===a;d.loop="1"===
e||void 0===e}c&&b&&1.4>c/b&&(d.aspectratio="4:3")});e.attr({"mbr-media":a,"mbr-on-click":function(b,c){b.addProp(c,function(c,d){c.preventDefault();c.stopPropagation();h.showMediaVideoDialog(g.extend(!0,{},d[a]),function(c){d[a]=c;b.emit("changeNode",new k.NodeEvent("change"),a,d[a]);h.Core.updateGlobalComponents(b.getComponent()._id,function(a,b){for(var c in b)if("_customHTML"===c||"object"!==typeof b[c]&&"function"!==typeof b[c]&&!/^_/g.test(c))b[c]=a[c];t(b).update()})})});return c}(this,this.getUName())}).removeAttr("mbr-video").html("");
this.addNode(a,c);this.addProp(a,{video:d});this.flow.ignoreChildren()});k.attr("mbr-if",function(e,b,a,d){a?(b=this.getScript(a))?(a=this.getUName(),this.addProp(a,this.createFunction(b)),b="this | fakeFilter "+[a].concat(b.getDependencies().map(function(a){return"_params."+a})).join(" "),"mbr-style"==d?e.removeAttr(d).attr("mbr-style2",b):e.attr(d,b)):"mbr-style"==d?e.removeAttr(d):e.attr(d,"false"):e.removeAttr(d)});k.attr("mbr-style",k.handlers.attrs["mbr-if"]);k.attr("mbr-form",function(e,b,
a,d){var c={title:"",action:"",alerts:{},fields:{},verify:{action:"",status:!1}};a="FORM"==e[0].tagName?e:e.find("form");var f=e.find("[data-form-alert]").html(),l=this.getUName(),m=(new k.Node("form",b)).on("change",function(a,c){x.update(b,c)});c.title=a.attr("name");c.action=a.attr("action")||h.getUserInfo().email;a[0].dataset&&a[0].dataset.verified&&(c.verify.action=a[0].dataset.verified);c.verify.action&&c.verify.action===c.action?c.verify.status=!0:c.verify.action="";f&&(c.alerts.success=f.trim());
g(a[0].elements).each(function(){var a=g(this).attr("name"),b=g(this).attr("data-form-field")||"",d=g(this).attr("placeholder")||"",e=g(this).attr("hidden")?!1:!0,f;void 0!=g(this).attr("type")?f=g(this).attr("type"):g(this).is("select")?f="select":g(this).is("textarea")&&(f="textarea");a&&(c.fields[a]={visible:e,title:b,customTitle:d,type:f})});e.removeAttr(d);this.addNode(l,m);this.addProp(l,c);x.update(a,c);a.attr({action:"https://mobirise.eu/","mbr-form":l}).removeAttr("name")});k.attr("mbr-theme-style",
function(e,b,a,d){if(a&&"secondary"===h.theme.type){var c=this.getUName();e.attr({"mbr-class-var":c,"mbr-on-change-theme-style":function(a,c){a.addProp(c,function(c,e){b.attr(d,c.themeStyle);a.emit("changedTemplate",a.sourceFragment.innerHTML)});return c}(this,this.getUName())});this.addProp(c,a)}e.removeAttr(d)});h.on("formoidSucces",function(e,b,a,d){e=h.Core.getComponent(e);q(e)&&(x.update(d,a),t(e).changeNode(b,a))});(function(){var e=/(\{\{[\s\S]*?\}\})/,b=function(a){return a.replace(/\\{\\{/g,
"{{").replace(/\\}\\}/g,"}}")},a=function(a){return a.split(e).filter(function(a){return a}).map(function(a){return"{{"==a.slice(0,2)&&"}}"==a.slice(-2)?"("+a.slice(2,-2).replace(/\\\{/g,"{").replace(/\\\}/g,"}")+")":"'"+b(a).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"}).join(" + ")};k.attr("mbr-class",function(b,c,f,g){b.removeAttr(g);(c=c.attr("class"))&&e.test(c)&&(c=a(c),f=f?"["+c+", "+f+"]":c);f&&(f=this.getScript(f))&&(c=this.getUName(),this.addProp(c,this.createFunction(f)),f="this | fakeFilter "+
[c].concat(f.getDependencies().map(function(a){return"_params."+a})).join(" "),b.attr("mbr-class2",f))});k.attr("*",function(d,c,f,h){if(/^mbr-/.test(h))d.removeAttribute(h);else if(e.test(f))if("class"==h)c.hasAttribute("mbr-class")||k.handlers.attrs["mbr-class"].call(this,g(d),g(c),"","mbr-class"),d.removeAttribute(h);else{if(c=a(f),c=this.getScript(c))f=this.getUName(),this.addProp(f,this.createFunction(c)),c="this | fakeFilter "+[f].concat(c.getDependencies().map(function(a){return"_params."+
a})).join(" "),g(d).removeAttr(h).attr("mbr-"+h,c+" | toNULL")}else d.getAttribute(h)===f&&"["!=h[0]&&d.setAttribute(h,b(f))})})()},["jQuery","mbrApp","TR()"]);
