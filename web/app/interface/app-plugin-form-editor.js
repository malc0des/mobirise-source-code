var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,c,f){b instanceof String&&(b=String(b));for(var h=b.length,l=0;l<h;l++){var m=b[l];if(c.call(f,m,l,b))return{i:l,v:m}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,f){b!=Array.prototype&&b!=Object.prototype&&(b[c]=f.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,c,f,h){if(c){f=$jscomp.global;b=b.split(".");for(h=0;h<b.length-1;h++){var l=b[h];l in f||(f[l]={});f=f[l]}b=b[b.length-1];h=f[b];c=c(h);c!=h&&null!=c&&$jscomp.defineProperty(f,b,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,f){return $jscomp.findInternal(this,b,f).v}},"es6","es3");
defineM("app-plugin-form-editor",function(b,c,f,h){var l=function(){var a=new JSEncrypt;a.setPublicKey(FORMOID_PUBLIC_KEY);return function(b){return b.match(/(^$|[\s\S]{64}|[\s\S]{1,63}$)/g).map(function(b){return a.encrypt(b)}).join(".")}}(),m=function(a){return/^((([a-z]|\d|[!#$%&'*+\-\/=?\^_`{|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#$%&'*+\-\/=?\^_`{|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a)},
t=function(a){return""==a||/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/gm.test(a)||m(a)},x=function(a,p){var d="";d+="<h4>"+f("Form Fields")+"</h4><hr>";b.each(a.fields,function(a){if("hidden"!==this.type){a=b('<div>   <div class="row">       <div class="togglebutton col-md-4">           <label class="checkbox-inline">               <input type="checkbox" name="visible" checked onchange="               jQuery(this).parents(\'.row\').find(\'[type=\\\'text\\\']\').prop(\'disabled\', !this.checked);               "><span class="toggle"></span> <b></b>           </label>       </div>       <div class="col-md-8">           <input type="text" name="title" class="form-control" placeholder="">       </div>   </div></div>').find(".row").attr("field",
a).end().find("b").text(this.title).end();var c=a.find('[type="checkbox"]'),e=a.find('[type="text"]').attr("value",this.customTitle);"visible"in this?this.visible||(e.prop("disabled",!0),c.removeAttr("checked")):(c.remove(),a.find(".toggle").remove());"type"in this&&(/text|tel|password|number|url|textarea|email/.test(this.type)||e.prop("disabled",!0));d+=a.html()}});d+="<h4>"+f("Form Options")+"</h4><hr>";var e=a.verify&&a.verify.status;d+=b('<div>\n               <div class="row">\n                   <div class="col-md-3">\n                       <b>'+
f("Notification Email or Action URL")+'</b>\n                   </div>\n                   <div class="col-md-9 wrapper">\n                       <div style="display:flex;align-items:center;">\n                           <input type="text" name="action" class="form-control" placeholder="">\n                           <button id="verifyBtn" class="btn btn-primary" '+(!m(a.action)||e?"disabled":"")+">"+(e?f("Verified"):f("Verify"))+'</button>\n                       </div>\n                       <span class="help-block" style="display:none">'+
f("Please enter a valid email address or URL")+"</span>\n                   </div>\n               </div>\n            </div>").find('[name="action"]').attr("value",a.action).end().html();d+=b('<div>   <div class="row" alert="success"'+(m(a.action)?"":' style="display:none"')+'>       <div class="col-md-3">           <b>'+f("Success Message")+'</b>       </div>       <div class="col-md-9">           <textarea name="message" class="form-control" style="height:55px;" placeholder=""></textarea>       </div>   </div></div>').find('[name="message"]').text(a.alerts.success).end().html();
var g=b.Deferred();e=c.showDialog({title:"",className:"note-air-layout form-settings-dialog",body:"<form>"+d+"</form>",cancel:function(){},successLabel:"Save",success:function(){var a=b(this).find('[name="action"]'),c={action:a.val(),alerts:{},fields:{}};if(!t(c.action))return a.keyup(),!1;b(this).find("[alert]").each(function(){c.alerts[b(this).attr("alert")]=b(this).find('[name="message"]').val()});b(this).find("[field]").each(function(){var a=b(this).attr("field"),d=b(this).find('[name="visible"]').prop("checked");
c.fields[a]={customTitle:b(this).find('[name="title"]').val()};void 0!==d&&(c.fields[a].visible=d)});g.resolve(c)},id:"form-editor"});var n=e.find("#verifyBtn"),k=function(a){return function(b){b?(a.attr("disabled",!1),a.text(""+f("Verify"))):(a.attr("disabled",!0),a.text(""+f("Verified")))}}(n);e.find('[name="action"]').keyup(function(){t(this.value)?(b(this).closest(".wrapper").removeClass("has-error").find(".help-block").hide(),b(this).parents("form:eq(0)").find("[alert]")[m(this.value)?"show":
"hide"]()):b(this).closest(".wrapper").addClass("has-error").find(".help-block").show();m(this.value)?this.value!==a.verify.action?k(!0):k(!1):k(!1)});n.click(function(){var d=b(this).parent().find('[name="action"]')[0].value;d&&m(d)&&(c.showPreloader(),Bridge.http("https://formoid.net/api/register",{method:"POST",data:d?JSON.stringify({email:d}):"",success:function(e){try{e=JSON.parse(e)}catch(w){console.error(w,e);c.hidePreloader();return}e.error?c.alertDlg(e.error):(e=c.Core.getComponent(p),p&&
e._customHTML&&(e._customHTML=e._customHTML.replace("<form action",'<form data-verified="'+d+'" action'),c.fire("formoidSucces")),k(!1),c.alertDlg(f("Email verified")),b.extend(!0,a,{verify:{action:d,status:!0}}));c.hidePreloader()},error:function(a){console.log(a);c.hidePreloader()}}))});c.fire("formeditorOpen",e,p);return g},q,r,u=!0,v=function(a,f,d,e){var g=a.attr("mbr-form");g=d[g]||{};var p="true"===d._params.usedRecaptcha?!0:!1;a.find('a[type="submit"]').each(function(){b(this).replaceWith(this.outerHTML.replace(/(<\/?)a(\W)/ig,
"$1button$2"))});if(m(g.action)){q=r=!0;f=d.title?d.title.replace(/(<([^>]+)>)/ig,""):g.title||"UNTITLED FORM";var k=a.attr("data-rcpha_secretKey"),h=a.attr("data-rcpha_siteKey"),t=a.attr("data-rcpha_label");a.attr("data-rcpha")&&"true"===t&&(u=!1);a.find("[data-form-email]").length||(a.prepend('<input type="hidden" name="email" data-form-email="true">'),c.isAMP()||(a.attr("data-rcpha")&&a.attr("data-rcpha_siteKey")&&k?(a.prepend('<input type="hidden" name="g-recaptcha-response" data-form-captcha="true" value="'+
a.attr("data-rcpha_siteKey")+'">'),c.registerPlugin("recaptcha-input-"+h,{name:"recaptcha-input-"+h,priority:3500,condition:"_params.usedRecaptcha=true",files:["https://www.google.com/recaptcha/api.js?render="+h]})):(c.getPlugin("recaptcha-input-"+h)||{}).condition=!1),c.isAMP()&&(a.attr("data-rcpha")&&a.attr("data-rcpha_siteKey")&&k?(a.prepend('<amp-recaptcha-input layout="nodisplay" name="recaptcha_token" data-sitekey="'+a.attr("data-rcpha_siteKey")+'" data-action="recaptcha_example"></amp-recaptcha-input>'),
d._plugins+=",amp-recaptcha-input"):d._plugins&&(d._plugins=d._plugins.replace(",amp-recaptcha-input",""))),a.removeAttr("data-rcpha data-rcpha_secretKey data-rcpha_siteKey data-rcpha_label data-verified"));d={email:g.action};k&&p&&(d.captcha=k);e&&(d.licenseKey=e);a.find("[data-form-email]").val(l(JSON.stringify(d)));a.attr("data-form-title",f).parent().attr("data-form-type","formoid");b.each(g.fields,function(b){a.find("[name='"+b+'\']:not([data-form-email="true"])').attr("data-form-field",this.title)})}else g.action&&
a.attr("action",g.action),f.find("[data-form-email], [data-form-alert]").remove()};c.regExtension({name:"plugin-form-editor",global:{formbuilderBuyer:{}},events:{coreLoad:function(){c.Core.$window[0].rivets.binders.form={routine:function(a,b){}}},load:function(){c.Core.$body.on("click","[mbr-form] input, [mbr-form] textarea, [mbr-form] select",function(a){a.preventDefault();a.stopPropagation();b(this).keyup(function(a){this.value=""});var f=b(this).parents("[mbr-form]"),d=f.parents("[data-app-component-id]:eq(0)").attr("data-app-component-id"),
e=c.Core.getComponent(d),g=f.attr("mbr-form");void 0!==e[g]&&(x(e[g],d).done(function(a){e[g].verify&&e[g].verify.action!==a.action&&(e[g].verify.action=a.action,e[g].verify.status=!1);b.extend(!0,e[g],a);c.Core.updateGlobalComponents(d);c.fire("formoidSucces",d,g,e[g],f)}),c.fire("showedPopup"))});c.Core.addFilter("getResultComponent",function(a){return a.then(function(a,d,e){var f=a.find("[mbr-form]").attr("mbr-form"),n=d[f]||null,k=b.Deferred();if(n&&n.action&&m(n.action)){if(c.formbuilderBuyer[n.action])return k.resolve(a,
d,e,c.formbuilderBuyer[n.action]);h.get("storage/formbuilder?email="+n.action).then(function(b){c.formbuilderBuyer[n.action]=b.key;k.resolve(a,d,e,b.key)},function(b){k.resolve(a,d,e)})}else return k.resolve(a,d,e);return k}).then(function(a,c,e,f){var d=a.find("[mbr-form]");d.length&&v(d,a,c,f);return b.Deferred().resolve(a,c,e)})});c.Core.addFilter("resultHTMLforEditor",function(a,b){var c=a.find("[mbr-form]");c.length&&v(c,a,b);return a});c.on("runPublish",function(){q=!1});c.on("formoidSucces",
function(){c.runSaveProject(!1,!0)});c.addFilter("allUsedPlugins",function(a){q&&this.getPlugin("Formoid")&&-1==a.indexOf("Formoid")?a.push("Formoid"):q&&this.getPlugin("formoid")&&-1==a.indexOf("formoid")&&a.push("formoid");q&&u&&this.getPlugin("formoid-css")&&-1==a.indexOf("formoid-css")&&a.push("formoid-css");return a});c.addFilter("allUsedPluginsForPage",function(a){r&&this.getPlugin("Formoid")&&-1==a.indexOf("Formoid")?a.push("Formoid"):r&&this.getPlugin("formoid")&&-1==a.indexOf("formoid")&&
a.push("formoid");r&&u&&this.getPlugin("formoid-css")&&-1==a.indexOf("formoid-css")&&a.push("formoid-css");u=!0;r=!1;return a})}}})},["jQuery","mbrApp","TR()","mbrServer"]);
