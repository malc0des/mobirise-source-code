var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(c,e,f){c instanceof String&&(c=String(c));for(var h=c.length,l=0;l<h;l++){var x=c[l];if(e.call(f,x,l,c))return{i:l,v:x}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,e,f){c!=Array.prototype&&c!=Object.prototype&&(c[e]=f.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,e,f,h){if(e){f=$jscomp.global;c=c.split(".");for(h=0;h<c.length-1;h++){var l=c[h];l in f||(f[l]={});f=f[l]}c=c[c.length-1];h=f[c];e=e(h);e!=h&&null!=e&&$jscomp.defineProperty(f,c,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,f){return $jscomp.findInternal(this,c,f).v}},"es6","es3");
defineM("app-plugin-iconfont",function(c,e,f,h){function l(){for(var a in e.iconFonts)if("object"==typeof e.iconFonts[a])return e.iconFonts[a];return{}}var x='<div class="form-group clearfix"><div class="row"><iframe class="col-md-3 iconfont-preview" frameborder="no"src="about:blank"></iframe><div class="col-md-3 icons-params"><div class="row"><div class="form-group col-md-12"><label>'+f("Icon Color")+'</label><input class="mbr-color iconfont-color pull-right" name="color" type="text" value=""/></div></div><div class="row"><div class="col-md-12 iconfont-size"><label class="" >'+
f("Icon Size")+'</label><div class="togglebutton pull-right"><label><input type="checkbox" name="sizeAuto" checked/><span class="toggle"></span>'+f("Auto")+'</label></div></div></div><div class="col-md-8 pull-right"><input class="iconfont-size form-control" name="fontSize" type="text" value=""/></div></div><div class="iconfont-link-group col-sm-9"><div class="row"><div class="col-md-7"><label class="control-label link-label" for="iconfont-link">'+f("Link Icon to")+'</label><input id="iconfont-link" class="form-control" name="link" type="text" readonly></div><div class="col-md-3"><button class="btn btn-primary iconfont-link-btn">'+
f("Edit Link")+'</button></div></div></div></div></div><div class="form-group clearfix "><div class="row"><div class="col"><input type="text" placeholder="'+f("Search...")+'" class="form-control iconfont-search" style="width:200px;margin-right:30px;margin-top:0px;display:inline-block;" /><button class="btn btn-primary collapse-btn">'+f("Collapse All")+'</button><button class="btn btn-primary expand-btn" style="margin-left:10px;">'+f("Expand All")+'</button></div></div></div><iframe class="form-group iconfont-list" frameborder="no" style="width:100%; -webkit-flex-grow:1;" src="about:blank"></iframe>',
C=function(a){var b=c('<div class="font-block"/>');b.append('<p class="font-title">'+(a.author?'<a href="'+a.author+'">':"")+(a.title||a.family)+(a.author?"</a>":"")+"</p>");var d=c("<div/>").addClass("font-table").attr("data-family",a.family);b.append(d);var k=a.names,p;for(p in k){var f=c(e.createIconFont({name:k[p],family:a.family}));f.attr("title",k[p]);d.append(f)}return b};e.regExtension({name:"iconfont",global:{iconFonts:{},parseIconFontNames:function(a,b){function c(a){for(var c=/\.([^\s:\{]+)\s*(?::[^\{]+)?{[^\}]*content\s*:\s*([^};\s]+)\s*[;}]/ig,
d;null!==(d=c.exec(a));){var e=d[1];if(k.prefix)if(0===e.indexOf(k.prefix))e=e.replace(k.prefix,"");else continue;if(!(0<=f.indexOf(e))){if(b){var p=/(?:'\\([A-F0-9]+)')|(?:"\\([A-F0-9]+)")/i.exec(d[2]);p?m.push(p[1]||p[2]):m.push(d[2])}f.push(e)}}k.default||(k.default=k.names[0])}var k=a.iconfont;if(k){var f=k.names=[],m=k.codes=b&&[];e.eachPlugins2([a],function(a,b,d,e){"css"==b&&h.loadLocalFile(a,c)})}else console.log("Error: plugin.iconfont undefined for plugin "+a.name)},createIconFont:function(a){if(!l().family)return console.log("Warning: no iconfonts found"),
"";if(!a||!a.name)return"";var b=a.family&&e.iconFonts[a.family]||l();if(!b||!b.names)return"";if(a.link){var d=c("<a>").attr("href",a.link);a.newWindow&&d.attr("target","_blank")}else d=c("<span/>");b["class"]&&d.addClass(b["class"]);b.prefix?d.addClass(b.prefix+a.name):(d.html("&#x"+b.codes[b.names.indexOf(a.name)]),d.attr("data-name",a.name));a.class&&d.addClass(a.class);a.size&&d.css("fontSize",parseInt(a.size,10)+"px");a.color&&d.css("color",a.color);return d.get(0)},extractIconFont:function(a){var b=
{};if(!l().family)return console.log("Warning: no iconfonts found"),b;if(!a||!e.iconFonts)return b;for(h in e.iconFonts){var d=e.iconFonts[h];if(d["class"]){var k="."+d["class"].replace(/\s+/g,".");k=c(a).is(k)}var f;d.prefix&&(f=(new RegExp("^(.*\\s)?"+d.prefix)).test(a.className));if(!(!d["class"]&&!d.prefix||d["class"]&&!k||d.prefix&&!f)){var m=d;break}}if(!m)return console.log("no font found for .",a),b;b.family=m.family;var h=a.className;(d=m.prefix)?h&&0<=h.indexOf(d)&&(b.name=h.substr(h.indexOf(d)+
d.length).split(" ")[0],b.classPrefix=d):m["class"]&&0<=h.split(" ").indexOf(m["class"])&&(b.name=c(a).attr("data-name"));a.tagName&&(b.size=parseInt(a.style.fontSize,10),b.color=a.style.color,"A"==a.tagName.toUpperCase()&&(b.link=a.href,b.newWindow="_blank"==a.target));return b},runIconFontDialog:function(a,b,d){function k(b,c){a.name=b||a.name;a.family=c||a.family;p(b,c);b=a.name;c=a.family;r.find("span").removeClass("char-active");b=b||a.name;b=b.replace("'","\\'");c=c||a.family;c=r.find(".font-table[data-family="+
c+"]");c.find("[title="+b+"]").addClass("char-active");c.length&&c.get(0).focus()}function p(b,c){if(w){var d=e.extractIconFont(w.find("span").get(0));d.name=b||d.name;d.color=a.color;d.family=c||d.family;w.html(e.createIconFont(d).outerHTML)}}function m(){var a=A.val().toLowerCase().replace("'","\\'"),b=c(r).find(".font-table span");""!=a?(t.expand(),b.hide(),b.filter("[title*="+a+"]").show()):b.show()}a=a||{};b=b||{};var D=!!a.name,q=e.iconFonts[a.family]||e.iconFonts[b.family]||l();b=c.extend({name:q["default"]},
b);a=c.extend({name:b.name,family:q.family},a);var g=e.showDialog({title:f("Select icons"),className:"note-air-layout note-font-dialog",size:"large",flex:!0,body:x,id:"innerFontDialog",buttons:{success:{label:f("Insert Icon"),"default":!0,className:"iconfont-ok"},"delete":{label:f("Remove Icon"),className:"iconfont-delete"}},create:function(b){c(b).find("input.iconfont-color.mbr-color").val(a.color).on("change",function(){a.color=c(this).val();p()})},show:function(b){var c=b.find("#iconfont-link");
c.val(a.link);b.on("click.media-click","#iconfont-link, .iconfont-link-btn",function(b){b={url:c.val(),isNewWindow:a.newWindow};e.showMbrLinkDialog(b,function(b){c.val(b.url);a.link=b.url;a.newWindow=b.isNewWindow})});b.on("click.media-click",".collapse-btn",function(a){t.collapse()});b.on("click.media-click",".expand-btn",function(a){t.expand()})}});e.fire("runIconFontDialog",g);var z=["app/interface/app-plugin-iconfont.css"];q="";for(var n in e.iconFonts){var B=e.iconFonts[n];B.plugin&&e.eachPlugins2([e.getPlugin(B.plugin)],
function(a,b,c,d){"css"==b&&z.push(h.path2app(a))});q+=C(B)[0].outerHTML}n=e.createIconFont({name:b.name,family:b.family,color:b.color}).outerHTML;var r,w;e.runIframe(g.find("iframe.iconfont-preview").get(0),n,{base:"",onload:function(b){w=c(b).find("body");w.addClass("iconfont-selected");p(a.name,a.family)},links:z,noScroll:!0});var y,t;e.runIframe(g.find("iframe.iconfont-list").get(0),q,{base:"",onload:function(b){r=c(b).find("body");c(b).find("body .font-table span").click(function(){y=c(this);
var a=y.attr("title"),b=y.parents(".font-table").attr("data-family");k(a,b)});y=r.find(".font-table[data-family="+a.family+"] span[title="+a.name.replace("'","\\'")+"]");k();t=new e.Accordion(r.find(".font-title").get(),r.find(".font-table").get(),{autoCollapse:!1});t.collapse();t.open(r.find(".font-table:first").get())},links:z});g.find("iframe.iconfont-list").contents().find("body").css("margin","0");e.redirectLinks(g);var A=g.find(".iconfont-search"),u=g.find("input[name=fontSize]");q=g.find("input[name=sizeAuto]");
var v=u.parent(".bootstrap-touchspin");n=g.find(".iconfont-size");v.length||(u.TouchSpin({min:1,max:1E3,verticalbuttons:!0,initval:a.size||""}).on("change",function(){a.size=c(this).val()}),v=u.parent(".bootstrap-touchspin"));"size"in a?(n.show(),u.val(a.size)):n.hide();q.on("change",function(){c(this).prop("checked")?(b.size=a.size,a.size="",u.val(a.size),v.hide()):(a.size=b.size||0,u.val(a.size),v.show())});q.prop("checked",!a.size);a.size?v.show():v.hide();q=g.find(".iconfont-link-group");"link"in
a?q.show():q.hide();g.on("click",".close",function(){d();g.modal("hide")});g.on("click",".iconfont-ok",function(){d(a);g.modal("hide")});g.on("click",".iconfont-cancel",function(){d();g.modal("hide")});D?(g.on("click",".iconfont-delete",function(){d(void 0);g.modal("hide")}),g.find(".iconfont-delete").show()):g.find(".iconfont-delete").hide();g.on("hidden.bs.modal",function(){g.off("click mouseenter mouseleave");c(r).off("keydown")});A.keyup(m);A.val("");m();g.modal("show");return g},saveIcon:function(a,
b,d){var e=c("<canvas></canvas>");e.insertAfter(a).css("display","none").attr({width:a.outerWidth(),height:a.outerHeight()});var f=e[0].getContext("2d"),m=window.getComputedStyle(a[0],":before").getPropertyValue("font-family"),l=window.getComputedStyle(a[0]).getPropertyValue("font-size"),q=window.getComputedStyle(a[0]).getPropertyValue("color"),g=window.getComputedStyle(a[0],":before").getPropertyValue("content").replace(/"/g,"");f.font=l+" "+m;f.fillStyle=q;f.fillText(g,0,a.outerHeight());a=e[0].toDataURL().replace("data:image/png;base64,",
"");e.remove();b||(b=h.tempLocation+"/open"+h.dateFormat(new Date,"yyyyMMdd_hhmmss")+"/mbr-favicon.png");h.saveLocalBase64(b,a,function(a){a?d(b):console.error("Error while saving image to:",b)})}},events:{registeredPlugin:function(a){if(a.iconfont){var b=a.iconfont;b.family in this.iconFonts&&(!this.iconFonts[b.family].names||!b.names||this.iconFonts[b.family].names.length>=b.names.length)?console.log("Warning: font is dublicated: ",b.family," in ",a.name,a):(b.plugin=a.name,this.iconFonts[b.family]=
b,b.names)?b.default||(b.default=b.names[0]):(console.log("Warning: font "+b.family+" has no icons, now will be parsed..."),this.parseIconFontNames(a))}},load:function(){var a={},b=[];e.Core.addFilter("getResultComponent",function(d){return d.then(function(d,f,h){var k=e.iconFonts,p=a[h]||[],g;for(g in k){var m=k[g];var n=m;var l="";n.class&&(l="."+n.class.split(/\s+/).join("."));n.prefix&&(l=l+'[class*=" '+n.prefix+'"],'+l+'[class^="'+n.prefix+'"]');n=l;n=c(d).find(n);n.length&&0>p.indexOf(g)&&p.push(m.plugin);
n.length&&0>b.indexOf(m.plugin)&&b.push(m.plugin)}a[h]=p;return c.Deferred().resolve(d,f,h)})});e.addFilter("allUsedPluginsForPage",function(b,c){var d=a[c];if(d){for(var e=0;e<d.length;e++)0>b.indexOf(d[e])&&b.push(d[e]);a[c]=0}return b});e.addFilter("allUsedPlugins",function(a){for(var c=0;c<b.length;c++){var d=b[c];0>a.indexOf(d)&&a.push(d)}b=[];return a})}}})},["jQuery","mbrApp","TR()","Bridge"]);
