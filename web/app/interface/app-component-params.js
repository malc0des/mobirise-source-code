var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(b){var d=0;return function(){return d<b.length?{done:!1,value:b[d++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,d,e){b!=Array.prototype&&b!=Object.prototype&&(b[d]=e.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(b,d){this.$jscomp$symbol$id_=b;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:d})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function b(e){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(e||"")+"_"+d++,e)}var d=0;return b}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.asyncIterator;b||(b=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};
$jscomp.iteratorFromArray=function(b,d){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var e=0,q={next:function(){if(e<b.length){var k=e++;return{value:d(k,b[k]),done:!1}}q.next=function(){return{done:!0,value:void 0}};return q.next()}};q[Symbol.iterator]=function(){return q};return q};
$jscomp.polyfill=function(b,d,e,q){if(d){e=$jscomp.global;b=b.split(".");for(q=0;q<b.length-1;q++){var k=b[q];k in e||(e[k]={});e=e[k]}b=b[b.length-1];q=e[b];d=d(q);d!=q&&null!=d&&$jscomp.defineProperty(e,b,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Array.prototype.values",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b,e){return e})}},"es8","es3");
$jscomp.findInternal=function(b,d,e){b instanceof String&&(b=String(b));for(var q=b.length,k=0;k<q;k++){var a=b[k];if(d.call(e,a,k,b))return{i:k,v:a}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,e){return $jscomp.findInternal(this,b,e).v}},"es6","es3");$jscomp.makeIterator=function(b){var d="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return d?d.call(b):$jscomp.arrayIterator(b)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(b){function d(){this.batch_=null}function e(a){return a instanceof k?a:new k(function(b,A){b(a)})}if(b&&!$jscomp.FORCE_POLYFILL_PROMISE)return b;d.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})}this.batch_.push(a)};var q=$jscomp.global.setTimeout;d.prototype.asyncExecuteFunction=function(a){q(a,0)};d.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var l=a[b];a[b]=null;try{l()}catch(c){this.asyncThrow_(c)}}}this.batch_=null};d.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var k=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(l){b.reject(l)}};k.prototype.createResolveAndReject_=function(){function a(a){return function(f){l||(l=!0,a.call(b,f))}}var b=this,l=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};k.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof k)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};k.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(l){this.reject_(l);return}"function"==typeof b?
this.settleSameAsThenable_(b,a):this.fulfill_(a)};k.prototype.reject_=function(a){this.settle_(2,a)};k.prototype.fulfill_=function(a){this.settle_(1,a)};k.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};k.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=0;b<this.onSettledCallbacks_.length;++b)a.asyncExecute(this.onSettledCallbacks_[b]);
this.onSettledCallbacks_=null}};var a=new d;k.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};k.prototype.settleSameAsThenable_=function(a,b){var l=this.createResolveAndReject_();try{a.call(b,l.resolve,l.reject)}catch(c){l.reject(c)}};k.prototype.then=function(a,b){function l(a,b){return"function"==typeof a?function(b){try{c(a(b))}catch(p){f(p)}}:b}var c,f,h=new k(function(a,b){c=a;f=b});this.callWhenSettled_(l(a,c),l(b,f));return h};
k.prototype.catch=function(a){return this.then(void 0,a)};k.prototype.callWhenSettled_=function(b,f){function l(){switch(c.state_){case 1:b(c.result_);break;case 2:f(c.result_);break;default:throw Error("Unexpected state: "+c.state_);}}var c=this;null==this.onSettledCallbacks_?a.asyncExecute(l):this.onSettledCallbacks_.push(l)};k.resolve=e;k.reject=function(a){return new k(function(b,l){l(a)})};k.race=function(a){return new k(function(b,l){for(var c=$jscomp.makeIterator(a),f=c.next();!f.done;f=c.next())e(f.value).callWhenSettled_(b,
l)})};k.all=function(a){var b=$jscomp.makeIterator(a),l=b.next();return l.done?e([]):new k(function(a,f){function c(b){return function(c){d[b]=c;g--;0==g&&a(d)}}var d=[],g=0;do d.push(void 0),g++,e(l.value).callWhenSettled_(c(d.length-1),f),l=b.next();while(!l.done)})};return k},"es6","es3");$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");
defineM("app-component-params",function(b,d,e,q,k){d.regExtension({name:"component-params",global:{$componentsParams:b("#edit-component-params"),prepareComponentParams:function(a,A){var f=this.Core.getComponentParams(a),l=this.Core.getComponent(a),c=!f||!f["default"]||b.isEmptyObject(f["default"]);if(this.applyFilter("preventParamsShow",c,a))return!1;this.fire("prepareComponentParams",a);this.Core.focusComponentBlock(a);c="";for(var m in f["default"]){var h=f["default"][m],n=f.current[m],g="",k="",
p="",r="";h.halfWidth&&(r+=" half-width");h.inline&&(r+=" inline-param");"undefined"!=typeof h.condition&&(g='data-app-condition="'+JSON.stringify(h.condition).replace(/"/g,"'")+'"');"undefined"!=typeof h.regexp&&(k='data-app-regexp="'+h.regexp+'"');"undefined"!=typeof h.regexpError&&(p='<small class="regexp-error text-warning" style="display: none;">'+h.regexpError+"</small>");switch(h.type){case "separator":c+=['<div class="separator '+r+'" '+g+">",e(h.title,d.theme.name)||"","</div>"].join("");
break;case "label":c+=['<div class="'+r+'" '+g+">",e(h.title,d.theme.name)||"","</div>"].join("");break;case "text":c+=['<div class="form-group '+r+'" '+g+" "+k+">","<label>"+e(h.title,d.theme.name)+"</label>",'<input name="'+m+'" type="text" class="form-control" value="'+n+'">',p,"</div>"].join("");break;case "textarea":c+=['<div class="form-group '+r+'" '+g+" "+k+">","<label>"+e(h.title,d.theme.name)+"</label>",'<textarea name="'+m+'" class="form-control">'+n+"</textarea>",p,"</div>"].join("");
break;case "switch-off":n=!n;case "switch":c+=['<div class="togglebutton '+r+'" '+g+">",'<label style="width: 100%;">','<input type="checkbox" name="'+m+'" '+(n?"checked":"")+">",'<span class="toggle pull-right" style="margin-top: 3px;"></span>',e(h.title,d.theme.name),"</label></div>"].join("");break;case "radio":c+=['<div class="radio radio-primary '+r+'" '+g+"><label>",'<input name="'+(h.name||m)+'" data-name="'+m+'" type="radio" '+(n?"checked":"")+' value="'+m+'">','<span class="circle"></span><span class="check"></span>',
e(h.title,d.theme.name),"</label></div>"].join("");break;case "check":c+='<div class="check '+r+'" '+g+">";c+='<span class="label">'+e(h.title,d.theme.name)+"</span><br>";for(var v in h.values){g=0;for(var x in n)n[x]==v&&(g=1);c+=['<input type="checkbox" id="'+m+v+'" value="'+v+'" name="'+m+'" '+(g?"checked":"")+">",'<label for="'+m+v+'">'+h.values[v]+"</label><br>"].join("")}c+="</div>";break;case "select":c+='<div class="select '+r+'" '+g+">";c+="<label>"+e(h.title,d.theme.name)+"</label>";c+=
'<select class="form-control" name="'+m+'"'+(h.multiple?" multiple":"")+">";for(var w in h.values)if(h.multiple){g=!1;if(n&&n.length)for(r=0;r<n.length;r++)if(n[r]===w){g=!0;break}c+='<option value="'+w+'"'+(g?" selected":"")+">"+h.values[w]+"</option>"}else c+='<option value="'+w+'" '+(n==w?"selected":"")+">"+h.values[w]+"</option>";c+="</select>";c+="</div>";break;case "fonts":c+='<div class="fonts '+r+'" '+g+">";c+="<label>"+e(h.title,d.theme.name)+"</label>";n=n||{};h=d.getAccesibleFonts();c+=
'<select class="form-control" name="'+m+'">';for(v in h)g=h[v],c+='<option value="'+g.name+'" '+((n||{}).name==g.name?"selected":"")+'><span style="font-family:'+g.css+'">'+g.name+"</span></option>";c+="</select>";c+="</div>";break;case "color":c+=['<div class="color '+r+'" '+g+">","<label>"+e(h.title,d.theme.name)+"</label>",'<input type="text" class="spectrum" name="'+m+'" value="'+n+'">',"</div>"].join("");break;case "range":c+=['<div class="range form-group'+(r?" "+r:"")+'"'+(g?" "+g:"")+">",
"<label>"+e(h.title,d.theme.name)+"</label>",'<div class="slider" data-min="'+(h.min||0)+'" data-max="'+(h.max||50)+'" data-step="'+(h.step||1)+'" name="'+m+'" data-value="'+(n||0)+'"></div>','<input type="text" name="'+m+'" style="display: none;" value="'+(n||0)+'">',"</div>"].join("");break;case "image-tabs":p=k="";for(v in n)if("function"!==typeof n[v]){var t=n[v].active,y=n[v].image,q="app/builder/images/no-image.jpg";y&&(q=/file:|https?/g.test(y)?y:"app/builder/"+y);k+='<li class="'+(t?"active":
"")+'" style="background-image: url(\''+q+'\')"><span class="sort-handle mbr-icon-exchange"></span></li>';p+='<div class="tab-params'+(t?" active":"")+'">';for(x in h._params){var u=h._params[x].type;t=h._params[x].title;q=h._params[x].values;var z=n[v][x];y="";"undefined"!=typeof h._params[x].condition&&(y='data-app-condition="'+JSON.stringify(h._params[x].condition).replace(/"/g,"'")+'"');switch(u){case "switch-off":z=!z;case "switch":p+=['<div class="togglebutton" '+y+">",'<label style="width: 100%;">',
'<input type="checkbox" data-type="switch" data-name="'+x+'" name="'+m+'" '+(z?"checked":"")+">",'<span class="toggle pull-right" style="margin-top: 3px;"></span>',t,"</label></div>"].join("");break;case "text":p+=['<div class="form-group" '+y+">","<label>"+t+"</label>",'<input data-name="'+x+'" name="'+m+'" type="text" data-type="text" class="form-control" value="'+z+'">',"</div>"].join("");break;case "range":p+=['<div class="range form-group" '+y+">","<label>"+t+"</label>",'<div class="slider" data-min="'+
(h._params[x].min||0)+'" data-max="'+(h._params[x].max||1)+'" data-step="'+(h._params[x].step||.1)+'" name="'+m+'" data-value="'+(z||h._params[x].default||.5)+'"></div>','<input type="text"  data-type="range" data-name="'+x+'" name="'+m+'" style="display: none;" value="'+(z||0)+'">',"</div>"].join("");break;case "color":p+=['<div class="color" '+y+">","<label>"+t+"</label>",'<input type="text" data-type="color" class="spectrum" data-name="'+x+'" name="'+m+'" value="'+(z||h._params[x].default)+'">',
"</div>"].join("");break;case "select":u="";for(var C in q)u+='<option value="'+C+'" '+(z==C?"selected":"")+">"+q[C]+"</option>";p+=['<div class="select" '+y+">","<label>"+t+"</label>",'<select class="form-control" data-type="select" data-name="'+x+'" name="'+m+'">',u,"</select></div>"].join("");break;case "image":z=n[v].thumb||z,u='<img data-type="image" data-name="'+x+'" name="'+m+'" '+(n[v].thumb?'data-thumb-img="thumb"':"")+' style="width: 50%; margin-bottom: 5px; cursor: pointer; float: right;" src="$SRC$" alt="">',
q="app/builder/images/no-image.jpg",z&&(q=/file:|https?/g.test(z)?z:"app/builder/"+z),u=u.replace(/\$SRC\$/g,q),p+=['<div class="image" '+y+">","<label>"+t+"</label>",u,"</div>"].join("")}}p+="</div>"}c+=['<div class="image-tabs '+r+'" data-name="'+m+'" '+g+">","<label>"+e(h.title,d.theme.name)+"</label>",'<div class="images"><div class="add-item btn btn-primary"><i class="mbr-icon-plus"></i></div><ul>',k,'<li class="add-item btn btn-primary"><i class="mbr-icon-plus"></i></li></ul></div>','<div class="cont">'+
p+"</div>",'<div class="foot"><div class="remove-item btn btn-material-red"><i class="mbr-icon-trash"></i> '+e("Remove")+"</div></div>","</div>"].join("");break;case "image":u='<img class="background-thumb" data-type="image" data-name="'+x+'" name="'+m+'" src="$SRC$" alt="">';q="app/builder/images/no-image.jpg";n&&(q=/file:|https?/g.test(n)?n:"app/builder/"+n);q=this.applyFilter("getExternalThumb",q,n);u=u.replace(/\$SRC\$/g,q);c+=['<div class="image" '+g+">",'<span class="label">'+e(h.title,d.theme.name)+
"</span>",u,"</div>"].join("");break;case "video":r="undefined"!==typeof n.url?n.url:h["default"].url;k="undefined"!==typeof n.autoplay?n.autoplay:h["default"].autoplay;n="undefined"!==typeof n.loop?n.loop:h["default"].loop;c+='<div class="video" '+g+">";c+=['<div class="form-group">',"<label>"+e(h.title,d.theme.name)+"</label>",'<input name="'+m+'" data-name="url" type="text" class="form-control" value="'+r+'">',"</div>"].join("");"undefined"!==typeof k&&(c+=['<div class="togglebutton"><label style="width: 100%;">',
'<input type="checkbox" data-name="autoplay" name="'+m+'" '+(k?"checked":"")+">",'<span class="toggle pull-right" style="margin-top: 3px;"></span>Autoplay</label></div>'].join(""));"undefined"!==typeof n&&(c+=['<div class="togglebutton"><label style="width: 100%;">','<input type="checkbox" data-name="loop" name="'+m+'" '+(n?"checked":"")+">",'<span class="toggle pull-right" style="margin-top: 3px;"></span>Loop</label></div>'].join(""));c+="</div>";break;case "map":c+=['<div class="form-group '+r+
'" '+g+">","<label>"+e(h.title,d.theme.name)+"</label>",'<textarea name="'+m+'" class="form-control">'+d.escapeHtml(n.address)+"</textarea>",'<div class="map-update-wrapper" style="text-align: right"><span style="font-size: 14px; display: block; text-align: right; padding-top: 7px">'+e("Type address or insert")+' <a href="https://mobirise.com/help/how-to-add-google-map-to-website-781.html" target="_blank">'+e("google map iframe")+'</a></span><button class="btn btn-primary map-update" disabled>'+e("Update")+
"</button></div>","</div>"].join("")}}c=this.applyFilter("prepareComponentParams",c,a);this.destroyDragParams();this.$componentsParams.attr("data-component-id",a);this.$componentsParams.find("> .cont").html(c);this.$componentsParams.find(".fonts select").dropdown({absolutePos:!0,align:"right"});this.$componentsParams.find(".fonts .dropdownjs").each(function(){var a=b(this).data("select");a=b(a.data("dropdownjs-ul"));a.find("li").each(function(){var a=d.getFont(b(this).attr("value"));b(this).css("font-family",
a.css)});a.addClass("fonts-dropdownjs")});this.$componentsParams.find("select").dropdown({absolutePos:!0,align:"right"});f=this.Core.$template.find("[data-app-component-id="+a+"] .app-component-content > *");this.fire("preparedComponentParams",a,l,f);this.initDragParams(a);this.checkConditionsComponentParams(a);"function"==typeof l._onParamsShow&&A&&l._onParamsShow(A,this.$componentsParams.find("> .cont"),this.Core.$template.find("[data-app-component-id="+a+"] .app-component-content > *"));return!0},
calulateComponentParams:function(){var a=this.$componentsParams.data("app-params-btn");if(a){var d=[150,550],f=this.$componentsParams.find("> .cont").scrollTop();this.$componentsParams.find("> .cont").css({maxHeight:""});var l=this.$componentsParams.height(),c=!1,m=(this.appElements.window.height-this.appElements.iframe.height)/2-30;a=a.getBoundingClientRect();var h=this.appElements.window.height-this.appElements.iframe.height+a.top+a.height-parseInt(m),n=(this.appElements.window.width-this.appElements.iframe.width)/
2+this.appElements.iframe.width-a.right;this.$componentsParams.removeClass("top");h+60+l>=this.appElements.window.height&&(a=h-l-a.height,a<this.appElements.window.height-this.appElements.iframe.height-parseInt(m)?c=Math.min(d[1],Math.max(d[0],this.appElements.window.height-h-30)):(h=a,this.$componentsParams.addClass("top")));this.$componentsParams.css({top:h,right:n});this.$componentsParams.find("> .cont").css({maxHeight:c?c:""}).scrollTop(f);this.$componentsParams.find("select").each(function(){b(this).data("dropdownjs-ul")&&
!b(this).is("[multiple]")&&b(b(this).removeClass("focus").data("dropdownjs-ul")).removeClass("focus")})}},showComponentParams:function(a,b){this.$componentsParams.data("app-params-btn",a);this.calulateComponentParams();var f=d.Core.getComponent(b),l=d.Core.$body.find("[data-app-component-id="+b+"]");setTimeout(function(){d.$body.addClass("app-component-params-open");this.fire("showedComponentParams",f,l)}.apply(this),0)},hideComponentParams:function(){this.fire("hideComponentParams");this.$componentsParams.removeData("app-params-btn");
this.$body.removeClass("app-component-params-open");this.fire("hiddenComponentParams");this.$componentsParams.find("select").each(function(){b(this).data("dropdownjs-ul")&&b(b(this).removeClass("focus").data("dropdownjs-ul")).remove()})},changeComponentParams:function(a){this.fire("changeComponentParams");var e=b(a).parents("[data-component-id]:eq(0)").attr("data-component-id"),f=this.Core.getComponentParams(e),l=b(a).attr("name");l&&f["default"][l]||(l=b(a).attr("data-name"));var c=f["default"][l].type,
m=this,h=function(){var c=b(a).parents("[data-app-regexp]").attr("data-app-regexp");if(!c)return!1;var f=c.replace(/.*\/([gimy]*)$/,"$1");c=c.replace(new RegExp("^/(.*?)/"+f+"$"),"$1");return new RegExp(c,f)}(),n=b(a).parent().children(".regexp-error");switch(c){case "text":case "textarea":var g=a.value;h&&(g.match(h)?n.hide():(g="",n.show()));break;case "switch-off":g=!a.checked;break;case "switch":g=a.checked;break;case "radio":b(a).parents("#edit-component-params:eq(0)").find("[name="+b(a).attr("name")+
"][data-name!="+l+"]").each(function(){m.Core.changeComponentParams(e,b(this).attr("data-name"),this.checked)});g=a.checked;break;case "check":f=b(a).parent().find("[name="+l+"]:checked");g=[];f.each(function(){g.push(this.value)});break;case "select":g=b(a).val();break;case "fonts":f=b(a).val();if(!f){g={};break}g=d.getFont(f);g.name||console.log("Error: unknown font selected:"+f);break;case "image":var k={image:{width:2E3,quality:70,src:f.current[l]}};d.showMediaImageDialog(k,function(){m.Core.changeComponentParams(e,
l,k.image.src);m.checkConditionsComponentParams(e)},!0,!0);return;case "color":g=b(a).val();break;case "range":g=b(a).val();break;case "video":var p=b(a).parents(".video:eq(0)");f=p.find("[data-name=url]").val();c=(new URLSearchParams(f)).get("t");h=p.find("[data-name=aspectratio]").val();n=f;var r=p.find("[data-name=loop]");r=r.length?r.is(":checked"):void 0;p=p.find("[data-name=autoplay]");p=p.length?p.is(":checked"):void 0;var v=f.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&\?]*).*/),
x=v?11==v["embed/"==v[2]?3:2].length:0,w=f.match(/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/);v&&x?f="https://www.youtube.com/embed/"+v[2]+"?rel=0&amp;"+(p?"mute=1":"")+"&showinfo=0&autoplay="+(p?1:0)+"&loop="+(r?"1&playlist="+v[2]:0)+(c?"&t="+c:""):w&&w[3]&&(f="https://player.vimeo.com/video/"+w[3]+"?autoplay="+(p?1:0)+"&loop="+(r?1:0));g={};g.url=f;g.loop=r;g.rawUrl=n;g.autoplay=p;g.aspectratio=h;g.width="4:3"==h?800:
1280;g.height="4:3"==h?600:720;break;case "map":this.fire("map.changeComponentParams",e,l,a.value,b(a).closest(".form-group"));return;case "image-tabs":g=[];var t=b(a).closest(".tab-params").index(),y=b(a).attr("data-name");g[t]={};switch(b(a).attr("data-type")){case "switch":g[t][y]=a.checked;break;case "select":g[t][y]=a.value;break;case "text":g[t][y]=a.value;break;case "range":g[t][y]=a.value;break;case "color":g[t][y]=a.value;break;case "image":var B=b(a).attr("data-thumb-img"),u={image:{width:2E3,
quality:70,src:f.current[l][t][y]}},z="carousel"===f["default"][l].subtype&&!!f["default"][l].fullscreen;z||(u.image.alt=f.current[l][t].alt,u.image.title=f.current[l][t].title);d.showMediaImageDialog(u,function(){function c(c){b(a).parent().find("> img").attr("src",c);b(a).parents(".image-tabs:eq(0)").find(".images li.active").css("background-image",'url("'+c+'")');m.Core.changeComponentParams(e,l,g);m.checkConditionsComponentParams(e);m.calulateComponentParams()}g[t][y]=u.image.src;z||(g[t].alt=
u.image.alt,g[t].title=u.image.title);B?(0<=u.image.src.indexOf(d.path2core(d.getAddonDir(d.theme.name)+"/components"))&&(u.image.src="web/app/builder/"+u.image.src),/(gif|svg|ico|tif|webp)$/i.test(u.image.src)?(g[t][B]=u.image.src,c(u.image.src)):q.transformImage(u.image.src,{width:800,height:"-1",keepAspectRatio:!0,quality:80},function(a){m.projectPath?q.moveFileClean(a,m.getProjectImagesDir(),function(a){g[t][B]=a;c(a)}):(g[t][B]=a,c(a))})):c(u.image.src)},z,!0);return}}this.Core.changeComponentParams(e,
l,g);this.checkConditionsComponentParams(e);this.calulateComponentParams();this.fire("changedComponentParams")},checkConditionsComponentParams:function(a){var d=this.Core.getComponentParams(a),f=this.Core.getComponent(a);this.$componentsParams.find("[data-app-condition]").each(function(){var a=JSON.parse(b(this).attr("data-app-condition").replace(/'/g,'"')),c=!0;if("string"==typeof a&&"function"==typeof f[a])c=f[a]();else if("object"==typeof a&&a.length)for(var m in a){for(var h=a[m].match(/^!/i),
e=a[m].replace(/^!(.*?)/i,"$1").split("."),g=d.current,k=d["default"],p=0;p<e.length&&"undefined"!=typeof g;p++)if(g=g[e[p]],b.isArray(g)){for(var q=-1,v=0;v<g.length;v++)if(g[v].active){q=v;break}g=g[q];k=k[e[p]]&&k[e[p]]._params}else k=k[e[p]]&&k[e[p]].default;"undefined"==typeof g&&(g=k);if("undefined"!=typeof g&&(e=!g,h&&(e=!e),e)){c=!1;break}}c?b(this).show():b(this).hide()})},initDragParams:function(a){var e=this;e.$componentsParams.find(".image-tabs .images > ul").each(function(){var f;b(this).sortable({axis:"x",
items:"> li:not(:last-child)",handle:".sort-handle",containment:"#edit-component-params",placeholder:"ui-sortable-placeholder"}).on("sortstart",function(a,b){f=b.item.index()}).on("sortstop",function(b,c){b=c.item.index();if(b!=f){var l=f>b?"insertBefore":"insertAfter";e.$componentsParams.find(".image-tabs .cont > div:eq("+f+")")[l](e.$componentsParams.find(".image-tabs .cont > div:eq("+b+")"));c=c.item.parents("[data-name]:eq(0)").attr("data-name");c=e.Core.getComponentParams(a,!0).current[c];if(b>=
c.length)for(l=b-c.length;l--+1;)c.push(void 0);c.splice(b,0,c.splice(f,1)[0]);d.Core.$document.trigger("change.cards");d.Core.changeComponentParams(a)}})})},destroyDragParams:function(){this.$componentsParams.find(".image-tabs .images > ul").each(function(){b(this).sortable("destroy")})},selectComponentParamsTab:function(a,b){b=a.index();var f=a.parents(".image-tabs:eq(0)").find(".cont > div:eq("+b+")"),d=a.parent().find("> .active"),c=a.parents("[data-component-id]:eq(0)").attr("data-component-id"),
e=a.parents(".image-tabs:eq(0)").attr("data-name");e=this.Core.getComponentParams(c,!0).current[e];d.length&&(e[d.index()].active=!1);e[b].active=!0;a.addClass("active").siblings().removeClass("active");f.addClass("active").siblings().removeClass("active");this.checkConditionsComponentParams(c)},addComponentParamsTab:function(a,k){var f=a.parent(),l=a.parents("[data-component-id]:eq(0)").attr("data-component-id");a=a.parents(".image-tabs:eq(0)").attr("data-name");var c=this.Core.getComponentParams(l,
!0).current[a],m=b(k.target).closest(".image-tabs").find("> div > ul").children().length-1,h=[],n=f.find("> .active").index(),g=void 0!==c[n].thumb,A=0<=d.Core.getComponent(l)._name.toLowerCase().indexOf("slider");k={image:{width:2E3,quality:70,src:c[n].image}};A||(k.image.alt="",k.image.title="");d.showMediaImageDialog(k,function(a){function f(){d.Core.changeComponentParams(l);d.Core.fire("addComponentParamsTab",l)}var k=0,p=function(h,l){return new Promise(function(m,p){function r(){var g=b.extend(!0,
{},c[n],h);g.active=!1;c.push(g);void 0!==l?l+1===a.length&&f():f();1<a.length?(k++,d.progressBar("show",e("Loading images"),"  ",!0),d.progressBar(k+" / "+a.length,!0),d.progressBar({progress:100/a.length*k},"","",!0),k===a.length&&(d.progressBar("hide"),d.hidePreloader())):d.hidePreloader()}if(!g)return r(),m();p=a[l]||a.image.src;0<=p.indexOf(d.path2core(d.getAddonDir(d.theme.name)+"/components"))&&(p="web/app/builder/"+p);/(gif|svg|ico|tif|webp)$/i.test(p)?(h.thumb=p,r(),m()):q.transformImage(p,
{width:800,height:"-1",keepAspectRatio:!0,quality:80},function(a){d.projectPath?q.moveFileClean(a,d.getProjectImagesDir(),function(a){h.thumb=a;r();m()}):m()})})},w=[],t=Promise.resolve();if("object"!==typeof a||Array.isArray(a))for(w={$jscomp$loop$prop$i$2:0};w.$jscomp$loop$prop$i$2<a.length;w={$jscomp$loop$prop$i$2:w.$jscomp$loop$prop$i$2},w.$jscomp$loop$prop$i$2++)h[m+w.$jscomp$loop$prop$i$2]={},h[m+w.$jscomp$loop$prop$i$2].image=a[w.$jscomp$loop$prop$i$2],A||(h[m+w.$jscomp$loop$prop$i$2].alt=
"",h[m+w.$jscomp$loop$prop$i$2].title=""),t=t.then(function(a){return function(){return p(h[m+a.$jscomp$loop$prop$i$2],a.$jscomp$loop$prop$i$2)}}(w));else h[m]={},h[m].image=a.image.src,A||(h[m].alt="",h[m].title=""),w.push(p(h[m]))},A,!0,!0)},removeComponentParamsTab:function(a,b){b=a.parents(".image-tabs:eq(0)").find(".images > ul");var f=a.parents(".image-tabs:eq(0)").find(".cont");if(!(1>=b.find("> li:not(.add-item)").length)){var d=a.parents("[data-component-id]:eq(0)").attr("data-component-id"),
c=a.parents(".image-tabs:eq(0)").attr("data-name");a=b.find("> .active").index();c=this.Core.getComponentParams(d,!0).current[c];var e=b.find("> li:eq("+(0<=a-1?a-1:a+1)+"):not(.add-item)");c.splice(a,1);b.find("> li:eq("+a+")").remove();f.find("> div:eq("+a+")").remove();this.Core.changeComponentParams(d);e.click()}}},events:{load:function(){var a=this;a.$template.on("click",".app-component .component-params",function(f){f.preventDefault();var d=b(this).parents("[data-app-component-id]:eq(0)").attr("data-app-component-id");
a.$componentsParams.attr("data-component-id")==d&&a.$body.hasClass("app-component-params-open")?(a.Core.focusComponentBlock("x"),a.hideComponentParams()):a.prepareComponentParams(d,f)&&a.showComponentParams(f.target,d)});a.$template.on("click",".app-component .component-remove",function(){var f=b(this).parents("[data-app-component-id]:eq(0)").attr("data-app-component-id");a.fire("removeComponent",f);k.getSettings("dontShowRemoveBlockModal").then(function(b){function c(){a.Core.getComponent(f)._global&&
1<Object.keys(a.Core.resultJSON).length?a.confirmDlg(e("This block is global. Do you want to remove it from all pages?"),function(b){b?a.Core.removeComponent(f,d.Core.currentPage,!0):a.Core.removeComponent(f)}):a.Core.removeComponent(f);a.fire("removedComponent",f)}if("true"!==b)var l=d.showDialog({body:['<div class="form-group">',e("Do you want to remove the $ID$ block?").replace("$ID$","<b>#"+a.$template.find('div[data-app-component-id="'+f+'"] .app-component-content > *').attr("id")+"</b>")+"</div>",
'<div class="dont-show-more clearfix">\n   <div class="togglebutton">\n       <label style="width: 100%;">\n           <input type="checkbox" id="dont-show-again">\n           <span class="toggle" style="margin-top: -6px;"></span>',e("Don't show again"),"       </label>\n   </div>\n</div>"].join("\n"),buttons:{cancel:{label:e("Cancel"),className:"btn-default"},success:{label:e("Ok"),className:"btn-primary",callback:function(){var a=l.find("#dont-show-again")[0].checked;k.setSettings("dontShowRemoveBlockModal",
a);c()}}}});else c()})});var q;a.$template.on("mousedown touchstart",".app-component .app-component-content",function(a){q=b(this).parents("[data-app-component-id]:eq(0)").find("[contenteditable]:focus").length});a.$template.on("click",".app-component .app-component-content",function(f){f.preventDefault();var d=b(this).parents("[data-app-component-id]:eq(0)");q?q=void 0:(d=d.attr("data-app-component-id"),a.$body.hasClass("app-component-params-open")?(a.Core.focusComponentBlock("x"),a.hideComponentParams()):
(a.Core.focusComponentBlock(d),b(f.target).is("img[data-app-edit], .mbr-nav-toggle, [data-app-prevent-settings]")||b(f.target).parents(".mbr-google-map:eq(0)").length||b(f.target).parents("[data-app-prevent-settings]:eq(0)").length||a.fire("componentClicked",d,f)))});a.$template.on("scroll",function(){a.calulateComponentParams()});a.$componentsParams.on("change input","input, textarea, select",function(){a.changeComponentParams(this)});a.$componentsParams.on("click",".image .btn, .image img",function(){a.changeComponentParams(this)});
a.$componentsParams.on("click",".image-tabs .images > ul > li:not(.add-item, .active)",function(d){a.selectComponentParamsTab(b(this),d)});a.$componentsParams.on("click",".image-tabs .images > ul > li.add-item",function(d){a.addComponentParamsTab(b(this),d)});a.$componentsParams.on("click",".image-tabs .images >div.add-item",function(d){a.addComponentParamsTab(b(this).parent().find("li.add-item"),d)});a.$componentsParams.on("click",".image-tabs .foot .remove-item",function(d){a.removeComponentParamsTab(b(this),
d)});a.$template.on("mousedown touchstart",".app-component .sortable",function(){a.hideComponentParams()});a.Core.on(["showedPopover"],function(){a.hideComponentParams()});d.on(["showedPopup"],function(){a.hideComponentParams()});a.Core.addFilter("prepareComponent",function(a){return e(a)});a.Core.addFilter("changeComponentParams",function(a,b,c,e){return d.applyFilter("changeComponentParams",a,b,c,e)})},resizeTemplate:function(){this.calulateComponentParams();this.hideComponentParams()},toggleComponents:function(){this.Core.focusComponentBlock("x");
this.hideComponentParams()},removeComponent:function(){this.hideComponentParams()},sidebarOpened:function(){this.Core.focusComponentBlock("x");this.hideComponentParams()},openThemeSettings:function(){this.Core.focusComponentBlock("x");this.hideComponentParams()},showPublishModal:function(){this.Core.focusComponentBlock("x");this.hideComponentParams()}}})},["jQuery","mbrApp","TR()","Bridge","$Bridge"]);
