var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,c,b,e){if(c){b=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var d=a[e];d in b||(b[d]={});b=b[d]}a=a[a.length-1];e=b[a];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var c=this;c instanceof String&&(c=String(c));var d=c.length;b=b||0;for(0>b&&(b=Math.max(b+d,0));b<d;b++){var f=c[b];if(f===a||Object.is(f,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
$jscomp.findInternal=function(a,c,b){a instanceof String&&(a=String(a));for(var e=a.length,d=0;d<e;d++){var f=a[d];if(c.call(b,f,d,a))return{i:d,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");
defineM("app-plugin-cms",function(a,c,b){c.regExtension({name:"app-plugin-cms",global:{addPhpEditFiles:function(b){return["local","ftp"].includes(c.projectSettings.publishType)&&c.projectSettings.publishEditFolder?$Bridge.loadLocalFile("web/assets/php-cms/config.php").then(function(d){if(!d)throw Error("php-cms file upload error");c.publishPages["web/assets/php-cms/config.php"]=d.replace("@SITE_OWNER_ID@",c.getUserInfo().id||1);b.push({dest:"edit/config.php",srcList:[{src:"web/assets/php-cms/config.php",
filter:"template"}]});b.push({dest:"edit/index.php",srcList:[{src:"web/assets/php-cms/index.php"}]});return a.Deferred().resolve(b)}).catch(function(c){console.log(c);return a.Deferred().resolve(b)}):a.Deferred().resolve(b)}},events:{load:function(){c.addFilter("publishFiles",function(a,b){"mbrsite"===c.projectSettings.publishType&&a.push({dest:"edit/index.html",srcList:[{src:"edit/index.html",filter:"template"}]});return a});c.addFilter("publishTemplating",function(a,b){return"mbrsite"===c.projectSettings.publishType&&
"edit/index.html"==b?'<!DOCTYPE html>\n                                <html lang="en">\n                                    <head>\n                                        <meta charset="UTF-8">\n                                        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n                                        <title>CMS</title>\n                                    </head>\n                                    <body>\n                                        <script src="https://c.ybnz.com/creator.js">\x3c/script>\n                                    </body>\n                                </html>':
a})},createPublishModal:function(e){var d=c.projectPath+"/project.mobirise",f=a('<br/><div id="cms-check" class="togglebutton" style="position: relative;"><label data-tooltipster="bottom"><input type="checkbox" name="uploadCms"'+(c.projectSettings.publishEditFolder?" checked":"")+'><span class="toggle"></span>'+b("Add online editor (CMS) to /edit/ folder").replace("(CMS)",'(<a class="cms-help">CMS</a>)')+'<sup style="color:#ff4545;position:absolute;top:0">beta</sup></label></div>');f.appendTo(e.find(".bootbox-body"));
f.find("input").on("change",function(){c.changeProjectSettings(d,{publishEditFolder:a(this).prop("checked")})});e.find(".cms-help").click(function(a){a.preventDefault();c.openUrl("https://mobirise.com/help/mobirise-cms-site-editor-847.html")})}}})},["jQuery","mbrApp","TR()"]);
