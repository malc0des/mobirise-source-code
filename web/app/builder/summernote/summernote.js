var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(d,A,C){d instanceof String&&(d=String(d));for(var B=d.length,F=0;F<B;F++){var v=d[F];if(A.call(C,v,F,d))return{i:F,v:v}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,A,C){d!=Array.prototype&&d!=Object.prototype&&(d[A]=C.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(d,A,C,B){if(A){C=$jscomp.global;d=d.split(".");for(B=0;B<d.length-1;B++){var F=d[B];F in C||(C[F]={});C=C[F]}d=d[d.length-1];B=C[d];A=A(B);A!=B&&null!=A&&$jscomp.defineProperty(C,d,{configurable:!0,writable:!0,value:A})}};$jscomp.polyfill("Array.prototype.find",function(d){return d?d:function(d,C){return $jscomp.findInternal(this,d,C).v}},"es6","es3");
(function(d){"function"===typeof define&&define.amd?define(["jquery"],d):d(window.jQuery)})(function(d){Array.prototype.reduce||(Array.prototype.reduce=function(d){var b=Object(this),c=b.length>>>0,a=0;if(2===arguments.length)var f=arguments[1];else{for(;a<c&&!(a in b);)a++;if(a>=c)throw new TypeError("Reduce of empty array with no initial value");f=b[a++]}for(;a<c;a++)a in b&&(f=d(f,b[a],a,b));return f});"function"!==typeof Array.prototype.filter&&(Array.prototype.filter=function(d){for(var b=Object(this),
c=b.length>>>0,a=[],f=2<=arguments.length?arguments[1]:void 0,l=0;l<c;l++)if(l in b){var k=b[l];d.call(f,k,l,b)&&a.push(k)}return a});Array.prototype.map||(Array.prototype.map=function(d,b){var c,a;if(null===this)throw new TypeError(" this is null or not defined");var f=Object(this),l=f.length>>>0;if("function"!==typeof d)throw new TypeError(d+" is not a function");1<arguments.length&&(c=b);var k=Array(l);for(a=0;a<l;){if(a in f){var e=f[a];e=d.call(c,e,a,f);k[a]=e}a++}return k});var A=navigator.userAgent,
C=/MSIE|Trident/i.test(A),B;if(C){var F=/MSIE (\d+[.]\d+)/.exec(A);F&&(B=parseFloat(F[1]));(F=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(A))&&(B=parseFloat(F[1]))}var v={isMac:-1<navigator.appVersion.indexOf("Mac"),isMSIE:C,isFF:/firefox/i.test(A),isWebkit:/webkit/i.test(A),isSafari:/safari/i.test(A),browserVersion:B,jqueryVersion:parseFloat(d.fn.jquery),isSupportAmd:!1,hasCodeMirror:!!window.CodeMirror,isFontInstalled:function(e){var b="Comic Sans MS"===e?"Courier New":"Comic Sans MS",c=d("<div>").css({position:"absolute",
left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),a=c.css("fontFamily",b).width();e=c.css("fontFamily",e+","+b).width();c.remove();return a!==e},isW3CRangeSupport:!!document.createRange},z=function(){var e=0;return{eq:function(b){return function(c){return b===c}},eq2:function(b,c){return b===c},peq2:function(b){return function(c,a){return c[b]===a[b]}},ok:function(){return!0},fail:function(){return!1},self:function(b){return b},not:function(b){return function(){return!b.apply(b,
arguments)}},and:function(b,c){return function(a){return b(a)&&c(a)}},uniqueId:function(b){var c=++e+"";return b?b+c:c},rect2bnd:function(b){var c=d(document);return{top:b.top+c.scrollTop(),left:b.left+c.scrollLeft(),width:b.right-b.left,height:b.bottom-b.top}},invertObject:function(b){var c={},a;for(a in b)b.hasOwnProperty(a)&&(c[b[a]]=a);return c},namespaceToCamel:function(b,c){return(c||"")+b.split(".").map(function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}).join("")}}}(),n=function(){var e=
function(a){return a[a.length-1]},b=function(a){return a.slice(1)},c=function(a,b){return-1!==d.inArray(b,a)};return{head:function(a){return a[0]},last:e,initial:function(a){return a.slice(0,a.length-1)},tail:b,prev:function(a,b){b=d.inArray(b,a);return-1===b?null:a[b-1]},next:function(a,b){b=d.inArray(b,a);return-1===b?null:a[b+1]},find:function(a,b){for(var c=0,f=a.length;c<f;c++){var d=a[c];if(b(d))return d}},contains:c,all:function(a,b){for(var c=0,f=a.length;c<f;c++)if(!b(a[c]))return!1;return!0},
sum:function(a,b){b=b||z.self;return a.reduce(function(a,c){return a+b(c)},0)},from:function(a){for(var b=[],c=-1,d=a.length;++c<d;)b[c]=a[c];return b},clusterBy:function(a,c){return a.length?b(a).reduce(function(a,b){var f=e(a);c(e(f),b)?f[f.length]=b:a[a.length]=[b];return a},[[a[0]]]):[]},compact:function(a){for(var b=[],c=0,d=a.length;c<d;c++)a[c]&&b.push(a[c]);return b},unique:function(a){for(var b=[],d=0,e=a.length;d<e;d++)c(b,a[d])||b.push(a[d]);return b}}}(),W=String.fromCharCode(160),e=function(){var g=
function(a){return a&&d(a).hasClass("note-editable")},b=function(a){if(a.hasClass("note-air-editor")){var b=n.last(a.attr("id").split("-"));var c=function(a){return function(){return d(a+b)}};return{editor:function(){return a},holder:function(){return a.data("holder")},editable:function(){return a},popover:c("#note-popover-"),handle:c("#note-handle-"),dialog:c("#note-dialog-")}}c=function(b,c){c=c||a;return function(){return c.find(b)}};var Q=a.data("options");Q=Q&&Q.dialogsInBody?d(document.body):
null;return{editor:function(){return a},holder:function(){return a.data("holder")},dropzone:c(".note-dropzone"),toolbar:c(".note-toolbar"),editable:c(".note-editable"),codable:c(".note-codable"),statusbar:c(".note-statusbar"),popover:c(".note-popover"),handle:c(".note-handle"),dialog:c(".note-dialog",Q)}},c=function(a){a=a.toUpperCase();return function(b){return b&&b.nodeName&&b.nodeName.toUpperCase()===a}},a=function(a){return a&&3===a.nodeType},f=function(a){return a&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(a.nodeName.toUpperCase())},
l=function(a){return g(a)?!1:a&&/^DIV|^P|^LI|^H[1-7]/.test(a.nodeName.toUpperCase())},k=c("LI"),t=c("TABLE"),h=function(a){return!H(a)&&!q(a)&&!p(a)&&!l(a)&&!t(a)&&!y(a)},q=function(a){return a&&/^UL|^OL/.test(a.nodeName.toUpperCase())},p=c("HR"),w=function(a){return a&&/^TD|^TH/.test(a.nodeName.toUpperCase())},y=c("BLOCKQUOTE"),H=function(a){return w(a)||y(a)||g(a)},x=c("A"),D=c("BODY"),G=v.isMSIE&&11>v.browserVersion?"&nbsp;":"<br>",m=function(b){return a(b)?b.nodeValue.length:b.childNodes.length},
r=function(b){var c=m(b);return 0===c||!a(b)&&1===c&&b.innerHTML===G||n.all(b.childNodes,a)&&""===b.innerHTML?!0:!1},K=function(a,b){for(;a;){if(b(a))return a;if(g(a))break;a=a.parentNode}return null},M=function(a,b){b=b||z.fail;var c=[];K(a,function(a){g(a)||c.push(a);return b(a)});return c},X=function(a,b){b=b||z.fail;for(var c=[];a&&!b(a);)c.push(a),a=a.nextSibling;return c},T=function(a,b){var c=b.nextSibling;b=b.parentNode;c?b.insertBefore(a,c):b.appendChild(a);return a},u=function(a,b){d.each(b,
function(b,c){a.appendChild(c)});return a},R=function(a){return 0===a.offset},S=function(a){return a.offset===m(a.node)},A=function(a){return R(a)||S(a)},C=function(a,b){for(;a&&a!==b;){if(0!==B(a))return!1;a=a.parentNode}return!0},F=function(a,b){for(;a&&a!==b;){if(B(a)!==m(a.parentNode)-1)return!1;a=a.parentNode}return!0},B=function(a){for(var b=0;a=a.previousSibling;)b+=1;return b},E=function(a){return!!(a&&a.childNodes&&a.childNodes.length)},I=function(a,b){if(0===a.offset){if(g(a.node))return null;
var c=a.node.parentNode;a=B(a.node)}else E(a.node)?(c=a.node.childNodes[a.offset-1],a=m(c)):(c=a.node,a=b?0:a.offset-1);return{node:c,offset:a}},J=function(a,b){if(m(a.node)===a.offset){if(g(a.node))return null;var c=a.node.parentNode;a=B(a.node)+1}else E(a.node)?(c=a.node.childNodes[a.offset],a=0):(c=a.node,a=b?m(a.node):a.offset+1);return{node:c,offset:a}},L=function(a,b){return a.node===b.node&&a.offset===b.offset},U=function(b,c){var r=c&&c.isSkipPaddingBlankHTML;c=c&&c.isNotSplitEdgePoint;if(A(b)&&
(a(b.node)||c)){if(R(b))return b.node;if(S(b))return b.node.nextSibling}if(a(b.node))return b.node.splitText(b.offset);var H=b.node.childNodes[b.offset];c=T(b.node.cloneNode(!1),b.node);u(c,X(H));r||(b=b.node,f(b)||m(b)||(b.innerHTML=G),f(c)||m(c)||(c.innerHTML=G));return c},N=function(a,b,c){a=M(b.node,z.eq(a));return a.length?1===a.length?U(b,c):a.reduce(function(a,r){a===b.node&&(a=U(b,c));return U({node:r,offset:a?e.position(a):m(r)},c)}):null},O=function(a){return document.createElement(a)},
V=function(a,b){if(a&&a.parentNode){if(a.removeNode)return a.removeNode(b);var c=a.parentNode;if(!b){b=[];var r;var m=0;for(r=a.childNodes.length;m<r;m++)b.push(a.childNodes[m]);m=0;for(r=b.length;m<r;m++)c.insertBefore(b[m],a)}c.removeChild(a)}},P=c("TEXTAREA"),Y=function(a,b){a=P(a[0])?a.val():a.html();return b?a.replace(/[\n\r]/g,""):a};return{NBSP_CHAR:W,ZERO_WIDTH_NBSP_CHAR:"\ufeff",blank:G,emptyPara:"<p>"+G+"</p>",makePredByNodeName:c,isEditable:g,isControlSizing:function(a){return a&&d(a).hasClass("note-control-sizing")},
buildLayoutInfo:b,makeLayoutInfo:function(a){a=d(a).closest(".note-editor, .note-air-editor, .note-air-layout");if(!a.length)return null;a=a.is(".note-editor, .note-air-editor")?a:d("#note-editor-"+n.last(a.attr("id").split("-")));return b(a)},isText:a,isVoid:f,isPara:l,isPurePara:function(a){return l(a)&&!k(a)},isInline:h,isBlock:z.not(h),isBodyInline:function(a){return h(a)&&!K(a,l)},isBody:D,isParaInline:function(a){return h(a)&&!!K(a,l)},isList:q,isTable:t,isCell:w,isBlockquote:y,isBodyContainer:H,
isAnchor:x,isDiv:c("DIV"),isLi:k,isBR:c("BR"),isSpan:c("SPAN"),isB:c("B"),isU:c("U"),isS:c("S"),isI:c("I"),isImg:c("IMG"),isTextarea:P,isEmpty:r,isEmptyAnchor:z.and(x,r),isClosestSibling:function(a,b){return a.nextSibling===b||a.previousSibling===b},withClosestSiblings:function(a,b){b=b||z.ok;var c=[];a.previousSibling&&b(a.previousSibling)&&c.push(a.previousSibling);c.push(a);a.nextSibling&&b(a.nextSibling)&&c.push(a.nextSibling);return c},nodeLength:m,isLeftEdgePoint:R,isRightEdgePoint:S,isEdgePoint:A,
isLeftEdgeOf:C,isRightEdgeOf:F,isLeftEdgePointOf:function(a,b){return R(a)&&C(a.node,b)},isRightEdgePointOf:function(a,b){return S(a)&&F(a.node,b)},prevPoint:I,nextPoint:J,isSamePoint:L,isVisiblePoint:function(b){if(a(b.node)||!E(b.node)||r(b.node))return!0;var c=b.node.childNodes[b.offset-1];b=b.node.childNodes[b.offset];return c&&!f(c)||b&&!f(b)?!1:!0},prevPointUntil:function(a,b){for(;a;){if(b(a))return a;a=I(a)}return null},nextPointUntil:function(a,b){for(;a;){if(b(a))return a;a=J(a)}return null},
isCharPoint:function(b){return a(b.node)?(b=b.node.nodeValue.charAt(b.offset-1))&&" "!==b&&b!==W:!1},walkPoint:function(a,b,c,m){for(var r=a;r;){c(r);if(L(r,b))break;r=J(r,m&&a.node!==r.node&&b.node!==r.node)}},ancestor:K,singleChildAncestor:function(a,b){for(a=a.parentNode;a&&1===m(a);){if(b(a))return a;if(g(a))break;a=a.parentNode}return null},listAncestor:M,lastAncestor:function(a,b){a=M(a);return n.last(a.filter(b))},listNext:X,listPrev:function(a,b){b=b||z.fail;for(var c=[];a&&!b(a);)c.push(a),
a=a.previousSibling;return c},listDescendant:function(a,b){var c=[];b=b||z.ok;(function Z(r){a!==r&&b(r)&&c.push(r);for(var m=0,H=r.childNodes.length;m<H;m++)Z(r.childNodes[m])})(a);return c},commonAncestor:function(a,b){for(a=M(a);b;b=b.parentNode)if(-1<d.inArray(b,a))return b;return null},wrap:function(a,b){var c=a.parentNode;b=d("<"+b+">")[0];c.insertBefore(b,a);b.appendChild(a);return b},insertAfter:T,appendChildNodes:u,position:B,hasChildren:E,makeOffsetPath:function(a,b){return M(b,z.eq(a)).map(B).reverse()},
fromOffsetPath:function(a,b){for(var c=0,r=b.length;c<r;c++)a=a.childNodes.length<=b[c]?a.childNodes[a.childNodes.length-1]:a.childNodes[b[c]];return a},splitTree:N,splitPoint:function(a,b){var c=b?l:H,r=M(a.node,c),m=n.last(r)||a.node;c(m)?c=r[r.length-2]:(c=m,m=c.parentNode);(b=c&&N(c,a,{isSkipPaddingBlankHTML:b,isNotSplitEdgePoint:b}))||m!==a.node||(b=a.node.childNodes[a.offset]);return{rightNode:b,container:m}},create:O,createText:function(a){return document.createTextNode(a)},remove:V,removeWhile:function(a,
b){for(;a&&!g(a)&&b(a);){var c=a.parentNode;V(a);a=c}},replace:function(a,b){if(a.nodeName.toUpperCase()===b.toUpperCase())return a;b=O(b);a.style.cssText&&(b.style.cssText=a.style.cssText);u(b,n.from(a.childNodes));T(b,a);V(a);return b},html:function(a,b){a=Y(a);b&&(a=a.replace(/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g,function(a,b,c){c=c.toUpperCase();b=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(c)&&!!b;c=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(c);return a+(b||c?"\n":"")}),a=d.trim(a));return a},
value:Y}}(),u=function(){var g=function(a,b){var c=a.parentElement(),d,f=document.body.createTextRange(),g=n.from(c.childNodes);for(d=0;d<g.length;d++)if(!e.isText(g[d])){f.moveToElementText(g[d]);if(0<=f.compareEndPoints("StartToStart",a))break;var q=g[d]}if(0!==d&&e.isText(g[d-1])){d=document.body.createTextRange();d.moveToElementText(q||c);d.collapse(!q);c=q?q.nextSibling:c.firstChild;a=a.duplicate();a.setEndPoint("StartToStart",d);for(a=a.text.replace(/[\r\n]/g,"").length;a>c.nodeValue.length&&
c.nextSibling;)a-=c.nodeValue.length,c=c.nextSibling;b&&c.nextSibling&&e.isText(c.nextSibling)&&a===c.nodeValue.length&&(a-=c.nodeValue.length,c=c.nextSibling);d=a}return{cont:c,offset:d}},b=function(a){var b=function(a,c){if(e.isText(a)){var d=e.listPrev(a,z.not(e.isText));var f=n.last(d).previousSibling;a=f||a.parentNode;c+=n.sum(n.tail(d),e.nodeLength);d=!f}else{a=a.childNodes[c]||a;if(e.isText(a))return b(a,0);c=0;d=!1}return{node:a,collapseToStart:d,offset:c}},c=document.body.createTextRange();
a=b(a.node,a.offset);c.moveToElementText(a.node);c.collapse(a.collapseToStart);c.moveStart("character",a.offset);return c},c=function(a,f,g,k){this.sc=a;this.so=f;this.ec=g;this.eo=k;var l=function(){if(v.isW3CRangeSupport){var c=document.createRange();c.setStart(a,f);c.setEnd(g,k);return c}c=b({node:a,offset:f});c.setEndPoint("EndToEnd",b({node:g,offset:k}));return c};this.getPoints=function(){return{sc:a,so:f,ec:g,eo:k}};this.getStartPoint=function(){return{node:a,offset:f}};this.getEndPoint=function(){return{node:g,
offset:k}};this.select=function(){var a=l();if(v.isW3CRangeSupport){var b=document.getSelection();0<b.rangeCount&&b.removeAllRanges();b.addRange(a)}else a.select();return this};this.normalize=function(){var a=function(a,b){if(e.isVisiblePoint(a)&&!e.isEdgePoint(a)||e.isVisiblePoint(a)&&e.isRightEdgePoint(a)&&!b||e.isVisiblePoint(a)&&e.isLeftEdgePoint(a)&&b||e.isVisiblePoint(a)&&e.isBlock(a.node)&&e.isEmpty(a.node))return a;var c=e.ancestor(a.node,e.isBlock);if((e.isLeftEdgePointOf(a,c)||e.isVoid(e.prevPoint(a).node))&&
!b||(e.isRightEdgePointOf(a,c)||e.isVoid(e.nextPoint(a).node))&&b){if(e.isVisiblePoint(a))return a;b=!b}return(b?e.nextPointUntil(e.nextPoint(a),e.isVisiblePoint):e.prevPointUntil(e.prevPoint(a),e.isVisiblePoint))||a},b=a(this.getEndPoint(),!1);a=this.isCollapsed()?b:a(this.getStartPoint(),!0);return new c(a.node,a.offset,b.node,b.offset)};this.nodes=function(a,b){a=a||z.ok;var c=b&&b.includeAncestor,d=b&&b.fullyContains;b=this.getStartPoint();var H=this.getEndPoint(),f=[],g=[];e.walkPoint(b,H,function(b){if(!e.isEditable(b.node)){if(d){if(e.isLeftEdgePoint(b)&&
g.push(b.node),e.isRightEdgePoint(b)&&n.contains(g,b.node))var m=b.node}else m=c?e.ancestor(b.node,a):b.node;m&&a(m)&&f.push(m)}},!0);return n.unique(f)};this.commonAncestor=function(){return e.commonAncestor(a,g)};this.expand=function(b){var d=e.ancestor(a,b);b=e.ancestor(g,b);if(!d&&!b)return new c(a,f,g,k);var l=this.getPoints();d&&(l.sc=d,l.so=0);b&&(l.ec=b,l.eo=e.nodeLength(b));return new c(l.sc,l.so,l.ec,l.eo)};this.collapse=function(b){return b?new c(a,f,a,f):new c(g,k,g,k)};this.splitText=
function(){var b=a===g,d=this.getPoints();e.isText(g)&&!e.isEdgePoint(this.getEndPoint())&&g.splitText(k);e.isText(a)&&!e.isEdgePoint(this.getStartPoint())&&(d.sc=a.splitText(f),d.so=0,b&&(d.ec=d.sc,d.eo=k-f));return new c(d.sc,d.so,d.ec,d.eo)};this.deleteContents=function(){if(this.isCollapsed())return this;var a=this.splitText(),b=a.nodes(null,{fullyContains:!0}),f=e.prevPointUntil(a.getStartPoint(),function(a){return!n.contains(b,a.node)}),g=[];d.each(b,function(a,b){a=b.parentNode;f.node!==a&&
1===e.nodeLength(a)&&g.push(a);e.remove(b,!1)});d.each(g,function(a,b){e.remove(b,!1)});return(new c(f.node,f.offset,f.node,f.offset)).normalize()};var h=function(b){return function(){var c=e.ancestor(a,b);return!!c&&c===e.ancestor(g,b)}};this.isOnEditable=h(e.isEditable);this.isOnList=h(e.isList);this.isOnAnchor=h(e.isAnchor);this.isOnCell=h(e.isCell);this.isLeftEdgeOf=function(a){return e.isLeftEdgePoint(this.getStartPoint())?(a=e.ancestor(this.sc,a))&&e.isLeftEdgeOf(this.sc,a):!1};this.isCollapsed=
function(){return a===g&&f===k};this.wrapBodyInlineWithPara=function(){if(e.isBodyContainer(a)&&e.isEmpty(a))return a.innerHTML=e.emptyPara,new c(a.firstChild,0,a.firstChild,0);var b=this.normalize();if(e.isParaInline(a)||e.isPara(a))return b;if(e.isInline(b.sc)){var d=e.listAncestor(b.sc,z.not(e.isInline));var f=n.last(d);e.isInline(f)||(f=d[d.length-2]||b.sc.childNodes[b.so])}else f=b.sc.childNodes[0<b.so?b.so-1:0];b=e.listPrev(f,e.isParaInline).reverse();b=b.concat(e.listNext(f.nextSibling,e.isParaInline));
b.length&&(f=e.wrap(n.head(b),"p"),e.appendChildNodes(f,n.tail(b)));return this.normalize()};this.insertNode=function(a){var b=this.wrapBodyInlineWithPara().deleteContents();b=e.splitPoint(b.getStartPoint(),e.isInline(a));b.rightNode?b.rightNode.parentNode.insertBefore(a,b.rightNode):b.container.appendChild(a);return a};this.pasteHTML=function(a){a=d("<div></div>").html(a)[0];a=n.from(a.childNodes);var b=this.wrapBodyInlineWithPara().deleteContents();return a.reverse().map(function(a){return b.insertNode(a)}).reverse()};
this.toString=function(){var a=l();return v.isW3CRangeSupport?a.toString():a.text};this.getWordRange=function(a){var b=this.getEndPoint();if(!e.isCharPoint(b))return this;var d=e.prevPointUntil(b,function(a){return!e.isCharPoint(a)});a&&(b=e.nextPointUntil(b,function(a){return!e.isCharPoint(a)}));return new c(d.node,d.offset,b.node,b.offset)};this.bookmark=function(b){return{s:{path:e.makeOffsetPath(b,a),offset:f},e:{path:e.makeOffsetPath(b,g),offset:k}}};this.paraBookmark=function(b){return{s:{path:n.tail(e.makeOffsetPath(n.head(b),
a)),offset:f},e:{path:n.tail(e.makeOffsetPath(n.last(b),g)),offset:k}}};this.getClientRects=function(){return l().getClientRects()}};return{create:function(a,b,d,k){if(arguments.length)2===arguments.length&&(d=a,k=b);else if(v.isW3CRangeSupport){var f=document.getSelection();if(!f||0===f.rangeCount||e.isBody(f.anchorNode))return null;f=f.getRangeAt(0);a=f.startContainer;b=f.startOffset;d=f.endContainer;k=f.endOffset}else{var l=document.selection.createRange();f=l.duplicate();f.collapse(!1);l.collapse(!0);
l=g(l,!0);f=g(f,!1);e.isText(l.node)&&e.isLeftEdgePoint(l)&&e.isTextNode(f.node)&&e.isRightEdgePoint(f)&&f.node.nextSibling===l.node&&(l=f);a=l.cont;b=l.offset;d=f.cont;k=f.offset}return new c(a,b,d,k)},createFromNode:function(a){var b=a,c=0,d=e.nodeLength(a);e.isVoid(b)&&(c=e.listPrev(b).length-1,b=b.parentNode);e.isBR(a)?(d=e.listPrev(a).length-1,a=a.parentNode):e.isVoid(a)&&(d=e.listPrev(a).length,a=a.parentNode);return this.create(b,c,a,d)},createFromNodeBefore:function(a){return this.createFromNode(a).collapse(!0)},
createFromNodeAfter:function(a){return this.createFromNode(a).collapse()},createFromBookmark:function(a,b){var d=e.fromOffsetPath(a,b.s.path),f=b.s.offset;a=e.fromOffsetPath(a,b.e.path);return new c(d,f,a,b.e.offset)},createFromParaBookmark:function(a,b){var d=a.s.offset,f=a.e.offset,g=e.fromOffsetPath(n.head(b),a.s.path);a=e.fromOffsetPath(n.last(b),a.e.path);return new c(g,d,a,f)}}}(),N=function(){return{readFileAsDataURL:function(e){return d.Deferred(function(b){d.extend(new FileReader,{onload:function(c){b.resolve(c.target.result)},
onerror:function(){b.reject(this)}}).readAsDataURL(e)}).promise()},createImage:function(e,b){return d.Deferred(function(c){var a=d("<img>");a.one("load",function(){a.off("error abort");c.resolve(a)}).one("error abort",function(){a.off("load").detach();c.reject(a)}).css({display:"none"}).appendTo(document.body).attr({src:e,"data-filename":b})}).promise()}}}(),J=function(){var d={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,
NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(b){return n.contains([d.BACKSPACE,d.TAB,d.ENTER,d.SPACe],b)},isMove:function(b){return n.contains([d.LEFT,d.UP,d.RIGHT,d.DOWN],b)},nameFromCode:z.invertObject(d),code:d}}(),aa=function(d){var b=[],c=-1,a=d[0],f=function(){var b=u.create(),c={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:d.html(),bookmark:b?b.bookmark(a):c}},e=function(b){null!==
b.contents&&d.html(b.contents);null!==b.bookmark&&u.createFromBookmark(a,b.bookmark).select()};this.undo=function(){d.html()!==b[c].contents&&this.recordUndo();0<c&&(c--,e(b[c]))};this.redo=function(){b.length-1>c&&(c++,e(b[c]))};this.recordUndo=function(){c++;b.length>c&&(b=b.slice(0,c));b.push(f())};this.recordUndo()},ba=function(){var g=function(b,c){if(1.9>v.jqueryVersion){var a={};d.each(c,function(c,d){a[d]=b.css(d)});return a}return b.css.call(b,c)};this.fromNode=function(b){b=g(b,["font-family",
"font-size","text-align","list-style-type","line-height"])||{};b["font-size"]=parseInt(b["font-size"],10);return b};this.stylePara=function(b,c){d.each(b.nodes(e.isPara,{includeAncestor:!0}),function(a,b){d(b).css(c)})};this.styleNodes=function(b,c){b=b.splitText();var a=c&&c.nodeName||"SPAN",f=!(!c||!c.expandClosestSibling);c=!(!c||!c.onlyPartialContains);if(b.isCollapsed())return[b.insertNode(e.create(a))];var g=e.makePredByNodeName(a),k=b.nodes(e.isText,{fullyContains:!0}).map(function(b){return e.singleChildAncestor(b,
g)||e.wrap(b,a)});if(f){if(c){var t=b.nodes();g=z.and(g,function(a){return n.contains(t,a)})}return k.map(function(a){a=e.withClosestSiblings(a,g);var b=n.head(a),c=n.tail(a);d.each(c,function(a,c){e.appendChildNodes(b,c.childNodes);e.remove(c)});return n.head(a)})}return k};this.current=function(b){var c=d(e.isText(b.sc)?b.sc.parentNode:b.sc);c=this.fromNode(c);c["font-bold"]=document.queryCommandState("bold")?"bold":"normal";c["font-italic"]=document.queryCommandState("italic")?"italic":"normal";
c["font-underline"]=document.queryCommandState("underline")?"underline":"normal";c["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal";c["font-superscript"]=document.queryCommandState("superscript")?"superscript":"normal";c["font-subscript"]=document.queryCommandState("subscript")?"subscript":"normal";if(b.isOnList()){var a=-1<d.inArray(c["list-style-type"],["circle","disc","disc-leading-zero","square"]);c["list-style"]=a?"unordered":"ordered"}else c["list-style"]=
"none";(a=e.ancestor(b.sc,e.isPara))&&a.style["line-height"]?c["line-height"]=a.style.lineHeight:(a=parseInt(c["line-height"],10)/parseInt(c["font-size"],10),c["line-height"]=a.toFixed(1));c.anchor=b.isOnAnchor()&&e.ancestor(b.sc,e.isAnchor);c.ancestors=e.listAncestor(b.sc,e.isEditable);c.range=b;return c}},O=function(){this.insertOrderedList=function(){this.toggleList("OL")};this.insertUnorderedList=function(){this.toggleList("UL")};this.indent=function(){var g=this,b=u.create().wrapBodyInlineWithPara(),
c=b.nodes(e.isPara,{includeAncestor:!0});c=n.clusterBy(c,z.peq2("parentNode"));d.each(c,function(a,b){a=n.head(b);e.isLi(a)?g.wrapList(b,a.parentNode.nodeName):d.each(b,function(a,b){d(b).css("marginLeft",function(a,b){return(parseInt(b,10)||0)+25})})});b.select()};this.outdent=function(){var g=this,b=u.create().wrapBodyInlineWithPara(),c=b.nodes(e.isPara,{includeAncestor:!0});c=n.clusterBy(c,z.peq2("parentNode"));d.each(c,function(a,b){a=n.head(b);e.isLi(a)?g.releaseList([b]):d.each(b,function(a,
b){d(b).css("marginLeft",function(a,b){b=parseInt(b,10)||0;return 25<b?b-25:""})})});b.select()};this.toggleList=function(g){var b=this,c=u.create().wrapBodyInlineWithPara(),a=c.nodes(e.isPara,{includeAncestor:!0}),f=c.paraBookmark(a),l=n.clusterBy(a,z.peq2("parentNode"));if(n.find(a,e.isPurePara)){var k=[];d.each(l,function(a,c){k=k.concat(b.wrapList(c,g))});a=k}else c=c.nodes(e.isList,{includeAncestor:!0}).filter(function(a){return!d.nodeName(a,g)}),c.length?d.each(c,function(a,b){e.replace(b,g)}):
a=this.releaseList(l,!0);u.createFromParaBookmark(f,a).select()};this.wrapList=function(d,b){var c=n.head(d),a=n.last(d),f=e.isList(c.previousSibling)&&c.previousSibling;c=e.isList(a.nextSibling)&&a.nextSibling;b=f||e.insertAfter(e.create(b||"UL"),a);d=d.map(function(a){return e.isPurePara(a)?e.replace(a,"LI"):a});e.appendChildNodes(b,d);c&&(e.appendChildNodes(b,n.from(c.childNodes)),e.remove(c));return d};this.releaseList=function(g,b){var c=[];d.each(g,function(a,f){a=n.head(f);f=n.last(f);var g=
b?e.lastAncestor(a,e.isList):a.parentNode,k=1<g.childNodes.length?e.splitTree(g,{node:f.parentNode,offset:e.position(f)+1},{isSkipPaddingBlankHTML:!0}):null;a=e.splitTree(g,{node:a.parentNode,offset:e.position(a)},{isSkipPaddingBlankHTML:!0});f=b?e.listDescendant(a,e.isLi):n.from(a.childNodes).filter(e.isLi);if(b||!e.isList(g.parentNode))f=f.map(function(a){return e.replace(a,"P")});d.each(n.from(f).reverse(),function(a,b){e.insertAfter(b,g)});a=n.compact([g,a,k]);d.each(a,function(a,b){a=[b].concat(e.listDescendant(b,
e.isList));d.each(a.reverse(),function(a,b){e.nodeLength(b)||e.remove(b,!0)})});c=c.concat(f)});return c}},ca=function(){var g=new O;this.insertTab=function(b,c,a){b=e.createText(Array(a+1).join(e.NBSP_CHAR));c=c.deleteContents();c.insertNode(b,!0);c=u.create(b,a);c.select()};this.insertParagraph=function(){var b=u.create();b=b.deleteContents();b=b.wrapBodyInlineWithPara();var c=e.ancestor(b.sc,e.isPara);if(c){if(e.isEmpty(c)&&e.isLi(c)){g.toggleList(c.parentNode.nodeName);return}var a=e.splitTree(c,
b.getStartPoint());b=e.listDescendant(c,e.isEmptyAnchor);b=b.concat(e.listDescendant(a,e.isEmptyAnchor));d.each(b,function(a,b){e.remove(b)})}else c=b.sc.childNodes[b.so],a=d(e.emptyPara)[0],c?b.sc.insertBefore(a,c):b.sc.appendChild(a);u.create(a,0).normalize().select()}},da=function(){this.tab=function(d,b){d=e.ancestor(d.commonAncestor(),e.isCell);var c=e.ancestor(d,e.isTable);c=e.listDescendant(c,e.isCell);(b=n[b?"prev":"next"](c,d))&&u.create(b,0).select()};this.createTable=function(g,b){for(var c=
[],a=0;a<g;a++)c.push("<td>"+e.blank+"</td>");g=c.join("");c=[];for(a=0;a<b;a++)c.push("<tr>"+g+"</tr>");b=c.join("");return d('<table class="table table-bordered">'+b+"</table>")[0]}},ea=function(g){var b=this,c=new ba,a=new da,f=new ca,l=new O;this.createRange=function(a){this.focus(a);return u.create()};this.saveRange=function(a,b){this.focus(a);a.data("range",u.create());b&&u.create().collapse().select()};this.saveNode=function(a){for(var b=[],c=0,d=a[0].childNodes.length;c<d;c++)b.push(a[0].childNodes[c]);
a.data("childNodes",b)};this.restoreRange=function(a){var b=a.data("range");b&&(b.select(),this.focus(a))};this.restoreNode=function(a){a.html("");for(var b=a.data("childNodes"),c=0,d=b.length;c<d;c++)a[0].appendChild(b[c])};this.currentStyle=function(a){var b=u.create();b&&b.isOnEditable()||(b=d(a).get(0),b=u.create(b,0,b,0));b=b&&b.isOnEditable()?c.current(b.normalize()):{};e.isImg(a)&&(b.image=a);return b};this.styleFromNode=function(a){return c.fromNode(a)};var k=function(a){var b=e.makeLayoutInfo(a).holder();
g.bindCustomEvent(b,a.data("callbacks"),"before.command")(a.html(),a)},t=function(a){var b=e.makeLayoutInfo(a).holder();g.bindCustomEvent(b,a.data("callbacks"),"change")(a.html(),a)};this.undo=function(a){k(a);a.data("NoteHistory").undo();t(a)};this.redo=function(a){k(a);a.data("NoteHistory").redo();t(a)};for(var h=this.beforeCommand=function(a){k(a);b.focus(a)},q=this.afterCommand=function(a,b){a.data("NoteHistory").recordUndo();b||t(a)},p="bold italic underline strikethrough superscript subscript justifyLeft justifyCenter justifyRight justifyFull formatBlock removeFormat backColor foreColor fontName".split(" "),
w=0,y=p.length;w<y;w++)this[p[w]]=function(a){return function(b,c){h(b);document.execCommand(a,!1,c);q(b,!0)}}(p[w]);this.tab=function(b,c){var d=this.createRange(b);d.isCollapsed()&&d.isOnCell()?a.tab(d):(h(b),f.insertTab(b,d,c.tabsize),q(b))};this.untab=function(b){b=this.createRange(b);b.isCollapsed()&&b.isOnCell()&&a.tab(b,!0)};this.insertParagraph=function(a){h(a);f.insertParagraph(a);q(a)};this.insertOrderedList=function(a){h(a);l.insertOrderedList(a);q(a)};this.insertUnorderedList=function(a){h(a);
l.insertUnorderedList(a);q(a)};this.indent=function(a){h(a);l.indent(a);q(a)};this.outdent=function(a){h(a);l.outdent(a);q(a)};this.insertImage=function(a,b,c){N.createImage(b,c).then(function(b){h(a);b.css({display:"",width:Math.min(a.width(),b.width())});u.create().insertNode(b[0]);u.createFromNodeAfter(b[0]).select();q(a)}).fail(function(){var b=e.makeLayoutInfo(a).holder();g.bindCustomEvent(b,a.data("callbacks"),"image.upload.error")()})};this.insertNode=function(a,b){h(a);u.create().insertNode(b);
u.createFromNodeAfter(b).select();q(a)};this.prependNode=function(a,b){h(a);a.prepend(b);u.createFromNodeAfter(b).select();q(a)};this.insertAfter=function(a,b,c){h(a);d(c).after(b);u.createFromNodeAfter(b).select();q(a)};this.insertAtCursor=function(a,b){h(a);if(window.getSelection){var c=window.getSelection();c.getRangeAt&&c.rangeCount&&(c=c.getRangeAt(0),c.deleteContents(),c.insertNode(b))}else document.selection&&document.selection.createRange&&(document.selection.createRange().text=b.outerHTML);
u.createFromNodeAfter(b).select();q(a)};this.insertText=function(a,b){h(a);b=u.create().insertNode(e.createText(b));u.create(b,e.nodeLength(b)).select();q(a)};this.pasteHTML=function(a,b){h(a);b=u.create().pasteHTML(b);u.createFromNodeAfter(n.last(b)).select();q(a)};this.formatBlock=function(a,b){h(a);b=v.isMSIE?"<"+b+">":b;document.execCommand("FormatBlock",!1,b);q(a)};this.formatPara=function(a){h(a);this.formatBlock(a,"P");q(a)};for(w=1;6>=w;w++)this["formatH"+w]=function(a){return function(b){this.formatBlock(b,
"H"+a)}}(w);this.fontSize=function(a,b){var f=u.create();if(f.isCollapsed()){f=c.styleNodes(f);var g=n.head(f);d(f).css({"font-size":b+"px"});g&&!e.nodeLength(g)&&(g.innerHTML=e.ZERO_WIDTH_NBSP_CHAR,u.createFromNodeAfter(g.firstChild).select(),a.data("bogus",g))}else h(a),d(c.styleNodes(f)).css({"font-size":b+"px"}),q(a)};this.insertHorizontalRule=function(a){h(a);var b=u.create().insertNode(d("<HR/>")[0]);b.nextSibling&&u.create(b.nextSibling,0).normalize().select();q(a)};this.removeBogus=function(a){var b=
a.data("bogus");if(b){var c=n.find(n.from(b.childNodes),e.isText),d=c.nodeValue.indexOf(e.ZERO_WIDTH_NBSP_CHAR);-1!==d&&c.deleteData(d,1);e.isEmpty(b)&&e.remove(b);a.removeData("bogus")}};this.lineHeight=function(a,b){h(a);c.stylePara(u.create(),{lineHeight:b});q(a)};this.unlink=function(a){var b=this.createRange(a);b.isOnAnchor()&&(b=e.ancestor(b.sc,e.isAnchor),b=u.createFromNode(b),b.select(),h(a),document.execCommand("unlink"),q(a))};this.createLink=function(a,b,f){var g=b.url,m=b.text,r=b.isNewWindow;
b=b.range||this.createRange(a);var l=b.toString()!==m;f=f||e.makeLayoutInfo(a).editor().data("options");h(a);f.onCreateLink&&(g=f.onCreateLink(g));f=[];l?(m=b.insertNode(d("<A>"+m+"</A>")[0]),f.push(m)):f=c.styleNodes(b,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});d.each(f,function(a,b){d(b).attr("href",g);r?d(b).attr("target","_blank"):d(b).removeAttr("target")});m=u.createFromNodeBefore(n.head(f)).getStartPoint();f=u.createFromNodeAfter(n.last(f)).getEndPoint();u.create(m.node,
m.offset,f.node,f.offset).select();q(a)};this.getLinkInfo=function(a){this.focus(a);var b=u.create().expand(e.isAnchor);a=a.is("a")?a:d(n.head(b.nodes(e.isAnchor)));var c=a.is("a")?a.html():b.toString();return{range:b,text:c,isNewWindow:a.length?"_blank"===a.attr("target"):!1,url:a.length?a.attr("href"):""}};this.color=function(a,b){var c=JSON.parse(b);b=c.foreColor;c=c.backColor;h(a);b&&document.execCommand("foreColor",!1,b);c&&document.execCommand("backColor",!1,c);q(a)};this.insertTable=function(b,
c){c=c.split("x");h(b);u.create().deleteContents().insertNode(a.createTable(c[0],c[1]));q(b)};this.floatMe=function(a,b,c){h(a);c.css("float",b);q(a)};this.imageShape=function(a,b,c){h(a);c.removeClass("img-rounded img-circle img-thumbnail");b&&c.addClass(b);q(a)};this.resize=function(a,b,c){h(a);c.css({width:100*b+"%",height:""});q(a)};this.resizeTo=function(a,b,c){if(c){c=a.y/a.x;var d=b.data("ratio");a={width:d>c?a.x:a.y/d,height:d>c?a.x*d:a.y}}else a={width:a.x,height:a.y};b.css(a)};this.removeMedia=
function(a,b,c){h(a);c.detach();g.bindCustomEvent(d(),a.data("callbacks"),"media.delete")(c,a);q(a)};this.focus=function(a){a.focus();if(v.isFF){var b=u.create();b&&!b.isOnEditable()&&u.createFromNode(a[0]).normalize().collapse().select()}};this.isEmpty=function(a){return e.isEmpty(a[0])||e.emptyPara===a.html()}},P=function(){this.update=function(e,b){var c=function(a,b){a.find(".dropdown-menu li a").each(function(){this.className=("function"===typeof b?b(d(this)):d(this).data("value")+""===b+"")?
"checked":""})},a=function(a,b){e.find(a).toggleClass("active",b())};if(b.image){var f=d(b.image);a('button[data-event="imageShape"][data-value="img-rounded"]',function(){return f.hasClass("img-rounded")});a('button[data-event="imageShape"][data-value="img-circle"]',function(){return f.hasClass("img-circle")});a('button[data-event="imageShape"][data-value="img-thumbnail"]',function(){return f.hasClass("img-thumbnail")});a('button[data-event="imageShape"]:not([data-value])',function(){return!f.is(".img-rounded, .img-circle, .img-thumbnail")});
var g=f.css("float");a('button[data-event="floatMe"][data-value="left"]',function(){return"left"===g});a('button[data-event="floatMe"][data-value="right"]',function(){return"right"===g});a('button[data-event="floatMe"][data-value="none"]',function(){return"left"!==g&&"right"!==g});var k=f.attr("style");a('button[data-event="resize"][data-value="1"]',function(){return!!/(^|\s)(max-)?width\s*:\s*100%/.test(k)});a('button[data-event="resize"][data-value="0.5"]',function(){return!!/(^|\s)(max-)?width\s*:\s*50%/.test(k)});
a('button[data-event="resize"][data-value="0.25"]',function(){return!!/(^|\s)(max-)?width\s*:\s*25%/.test(k)})}else{var t=e.find(".note-fontname");if(t.length){var h=b["font-family"];if(h){for(var q=h.split(","),p=0,w=q.length;p<w&&(h=q[p].replace(/['"]/g,"").replace(/\s+$/,"").replace(/^\s+/,""),!v.isFontInstalled(h));p++);t.find(".note-current-fontname").text(h);c(t,h)}}t=e.find(".note-fontsize");t.find(".note-current-fontsize").text(b["font-size"]);c(t,parseFloat(b["font-size"]));t=e.find(".note-height");
c(t,parseFloat(b["line-height"]));a('button[data-event="bold"]',function(){return"bold"===b["font-bold"]});a('button[data-event="italic"]',function(){return"italic"===b["font-italic"]});a('button[data-event="underline"]',function(){return"underline"===b["font-underline"]});a('button[data-event="strikethrough"]',function(){return"strikethrough"===b["font-strikethrough"]});a('button[data-event="superscript"]',function(){return"superscript"===b["font-superscript"]});a('button[data-event="subscript"]',
function(){return"subscript"===b["font-subscript"]});a('button[data-event="justifyLeft"]',function(){return"left"===b["text-align"]||"start"===b["text-align"]});a('button[data-event="justifyCenter"]',function(){return"center"===b["text-align"]});a('button[data-event="justifyRight"]',function(){return"right"===b["text-align"]});a('button[data-event="justifyFull"]',function(){return"justify"===b["text-align"]});a('button[data-event="insertUnorderedList"]',function(){return"unordered"===b["list-style"]});
a('button[data-event="insertOrderedList"]',function(){return"ordered"===b["list-style"]});a=!!d(b.anchor).closest("[data-app-modern-menu]").length;var y=e.find(".note-mbrBtnColor"),n=e.find(".note-mbrLinkColor");d(b.anchor).is(".btn:not(.mbr-menu-item, .mbr-editable-menu-item)")?(n.hide(),y.parent().css("display",""),c(y,function(a){var c=d(b.anchor).hasClass(a.data("value"));c&&(a=a.find("> span").clone().css("margin-left",0),y.find("button > .note-current-mbrBtnColor").html(a));return c})):d(b.anchor).is(".nav-link[data-app-btn], .dropdown-item[data-app-btn]")&&
!a?(y.parent().hide(),n.hide()):(y.parent().hide(),n.show(),d(b.anchor).is("a")&&c(n,function(a){var c=d(b.anchor).hasClass(a.data("value"));"text-primary"!==a.data("value")||d(b.anchor).is(".text-primary,.text-success,.text-info,.text-warning,.text-danger,.text-white,.text-black,.text-gray")||(c=!0);c&&(a=a.find("> span").clone().css("margin-left",0),n.find("button > .note-current-mbrLinkColor").html(a));return c}));a=e.find('.btn[data-name="mbrBtnRemove"]');a.length&&(h=(t=d(b.anchor).hasClass("mbr-menu-item")||
d(b.anchor).hasClass("mbr-editable-menu-item"))||"parent"===d(b.anchor).attr("data-app-btn")?d(b.anchor).parent().siblings("li").find("> a"):d(b.anchor).siblings("btn, [data-app-btn]"),t&&(h.length?a.removeAttr("disabled"):a.attr("disabled","disabled")));a=e.find(".note-mbrFonts > [data-name=mbrFontSize]");a.find(".note-current-mbrFontSize").text(b["font-size"]);c(a,parseFloat(b["font-size"]));a=e.find(".note-mbrFonts > [data-name=mbrFonts]");if(a.length&&(t=b["font-family"])){h=t.split(",");q=0;
for(p=h.length;q<p&&(t=h[q].replace(/['"]/g,"").replace(/\s+$/,"").replace(/^\s+/,""),!v.isFontInstalled(t));q++);a.find(".note-current-mbrFonts").css("font-family","'"+t+"'").text(t);c(a,t)}c=e.find("[data-name=mbrColor] .curTextColor");if(b.ancestors)if(a=d(b.ancestors[0]).parent().data("options"),t=d(b.anchor).hasClass("btn")||d(b.anchor).is("[data-app-btn]:not(.mbr-menu-item, .mbr-editable-menu-item, .nav-link, .dropdown-item)"),a&&a.customToolbar&&"on"===a.customToolbar.mbrColor&&(t=!1),t)c.parent().remove();
else{var x,D;for(D in b.ancestors)/P|DIV|UL|H1|H2|H3|H4|H5|H6/g.test(b.ancestors[D].tagName)&&(x=d(b.ancestors[D]).css("color"));x||(x=d(b.ancestors[0]).parent().css("color"));c.css({background:d.summernote.adaptColorForBg(x||"#000")})}x=e.find("[data-name=mbrAlign]").find("> i");switch(b["text-align"]){case "left":case "start":x.attr("class","mbr-icon-align-left");break;case "right":x.attr("class","mbr-icon-align-right");break;case "center":x.attr("class","mbr-icon-align-center");break;case "justify":x.attr("class",
"mbr-icon-align-justify")}}};this.updateRecentColor=function(e,b,c){e=d(e).closest(".note-color").find(".note-recent-color");var a=JSON.parse(e.attr("data-value"));a[b]=c;e.attr("data-value",JSON.stringify(a));b="backColor"===b?"background-color":"color";e.find("i").css(b,c)}},fa=function(){var d=new P;this.update=function(b,c){d.update(b,c)};this.updateRecentColor=function(b,c,a){d.updateRecentColor(b,c,a)};this.activate=function(b){b.find("button").not('button[data-event="codeview"]').removeClass("disabled")};
this.deactivate=function(b){b.find("button").not('button[data-event="codeview"]').addClass("disabled")};this.updateFullscreen=function(b,c){b.find('button[data-event="fullscreen"]').toggleClass("active",c)};this.updateCodeview=function(b,c){b.find('button[data-event="codeview"]').toggleClass("active",c);c?this.deactivate(b):this.activate(b)};this.get=function(b,c){return e.makeLayoutInfo(b).toolbar().find("[data-name="+c+"]")};this.setButtonState=function(b,c,a){a=!1===a?!1:!0;this.get(b,c).toggleClass("active",
a)}},ha=function(){var g=d(document);this.attach=function(c,a){if(!a.disableResizeEditor)c.statusbar().on("mousedown",b)};var b=function(b){b.preventDefault();b.stopPropagation();var a=e.makeLayoutInfo(b.target).editable(),c=a.offset().top-g.scrollTop(),d=e.makeLayoutInfo(b.currentTarget||b.target).editor().data("options");g.on("mousemove.summernote",function(b){b=b.clientY-(c+24);b=0<d.minHeight?Math.max(b,d.minHeight):b;b=0<d.maxHeight?Math.min(b,d.maxHeight):b;a.height(b)}).one("mouseup.summernote",
function(){g.off("mousemove.summernote")})}},ia=function(){var e=new P,b=function(a,b,c){a=d(a);b=b?a.offset():a.position();a=a.outerWidth(!0);return{left:b.left+a/2,top:b.top,lineHeight:c.ancestors[0]?d(c.ancestors[0].parentNode).outerHeight():""}},c=function(a,b){var c=d(window).width();a.css({display:"block",left:5,top:20});var e=a.outerWidth(),f=a.outerHeight();a.css("display","none");b.left-=e/2;20>b.top-f?(a.removeClass("top").addClass("bottom"),b.top+=parseFloat(b.lineHeight)):(a.removeClass("bottom").addClass("top"),
b.top-=f);f=b.left;5>b.left?b.left=5:b.left+e>c-10&&(b.left=c-10-e);c=a.find(".dropdown-menu").parent(".btn-group");200>b.top?c.removeClass("dropup"):c.addClass("dropup");c=-11+f-b.left;a.find("> .arrow").css("margin-left",c);a.css({display:"block",left:b.left,top:b.top})};this.addGroup=E.addGroup;this.update=function(a,f,g){e.update(a,f);var k=f.anchor&&/btn|mbr-menu-item|mbr-editable-menu-item/g.test(f.anchor.className);!k&&f.anchor&&(k=!!d(f.anchor).attr("data-app-btn"));var l=f.range&&f.range.isCollapsed(),
h=l&&f.anchor&&!k,q=a.find(".note-link-popover");if(h){var p=q.find("a:eq(0)"),w=d(f.anchor).attr("href"),y=d(f.anchor).attr("target");p.html(w);y?p.attr("target","_blank"):p.removeAttr("target");setTimeout(function(){c(q,b(f.anchor,g,f),f)},0)}else q.hide();var n=a.find(".note-button-popover");if(k){var x=b(f.anchor,g,f);setTimeout(function(){c(n,x)},0)}else n.hide();p=a.find(".note-image-popover");f.image?c(p,b(f.image,g,f),f):p.hide();var D=a.find(".note-air-popover");if(g&&f.range&&!k&&!h){if(a=
f.range.getClientRects(),a[0]){h=k=0;for(var G in a)"object"===typeof a[G]&&a[G].top===a[0].top&&(k+=a[G].width,h=a[G].right);a={bottom:a[0].bottom,height:a[0].height,left:a[0].left,top:a[0].top,right:h,width:k};G=D.find(".note-font");k=D.find(".note-para");h=D.find(".note-style");p=D.find(".note-mbrLink");w=D.find(".note-mbrFonts");y=D.find("button[data-name=mbrAlign]");if(l){G.hide();p.hide();k.show();h.show();w.show();y.show();var m,r;for(r in f.ancestors)/P|DIV|UL|H1|H2|H3|H4|H5|H6/g.test(f.ancestors[r].tagName)&&
(m=f.ancestors[r]);m||(m=d(f.ancestors[0]).parent()[0]);if(!m)return;var K=b(m,g,f)}else G.show(),p.show(),k.hide(),h.hide(),w.hide(),y.hide(),l=z.rect2bnd(a),K={left:Math.max(l.left+l.width/2,0),top:l.top,lineHeight:f.ancestors[0]?d(f.ancestors[0].parentNode).outerHeight():""};setTimeout(function(){c(D,K)},0)}}else D.hide()};this.updateRecentColor=function(a,b,c){a.updateRecentColor(a,b,c)};this.hide=function(a){a.children().hide()}},ja=function(g){var b=d(document),c=function(a){if(e.isControlSizing(a.target)){a.preventDefault();
a.stopPropagation();a=e.makeLayoutInfo(a.target);var c=a.handle(),l=a.popover(),k=a.editable();a=a.editor();var t=c.find(".note-control-selection").data("target"),h=d(t),q=h.offset(),p=b.scrollTop(),w=a.data("options").airMode;b.on("mousemove.summernote",function(a){g.invoke("editor.resizeTo",{x:a.clientX-q.left,y:a.clientY-(q.top-p)},h,!a.shiftKey);g.invoke("handle.update",c,{image:t},w);g.invoke("popover.update",l,{image:t},w)}).one("mouseup",function(){b.off("mousemove.summernote");g.invoke("editor.afterCommand",
k)});h.data("ratio")||h.data("ratio",h.height()/h.width())}};this.attach=function(a){a.handle().on("mousedown.summernote",c)};this.update=function(a,b,c){a=a.find(".note-control-selection");if(b.image){var e=d(b.image);c=c?e.offset():e.position();var f=e.outerWidth(!0);e=e.outerHeight(!0);a.css({display:"block",left:c.left,top:c.top,width:f,height:e}).data("target",b.image);b=f+"x"+e;a.find(".note-control-selection-info").text(b)}else a.hide()};this.hide=function(a){a.children().hide()}},ka=function(e){var b=
d(window),c=d("html, body");this.toggle=function(a){var d=a.editor(),g=a.toolbar(),k=a.editable(),t=a.codable(),h=function(a){k.css("height",a.h);t.css("height",a.h);t.data("cmeditor")&&t.data("cmeditor").setsize(null,a.h)};d.toggleClass("fullscreen");(a=d.hasClass("fullscreen"))?(k.data("orgheight",k.css("height")),b.on("resize.summernote",function(){h({h:b.height()-g.outerHeight()})}).trigger("resize"),c.css("overflow","hidden")):(b.off("resize.summernote"),h({h:k.data("orgheight")}),c.css("overflow",
"visible"));e.invoke("toolbar.updateFullscreen",g,a)}},L;v.hasCodeMirror&&(v.isSupportAmd?require(["CodeMirror"],function(d){L=d}):L=window.CodeMirror);var la=function(d){this.sync=function(b){d.invoke("codeview.isActivated",b)&&v.hasCodeMirror&&b.codable().data("cmEditor").save()};this.isActivated=function(b){return b.editor().hasClass("codeview")};this.toggle=function(b){this.isActivated(b)?this.deactivate(b):this.activate(b)};this.activate=function(b){var c=b.editor(),a=b.toolbar(),f=b.editable(),
g=b.codable(),k=b.popover(),t=b.handle();b=c.data("options");g.val(e.html(f,b.prettifyHtml));g.height(f.height());d.invoke("toolbar.updateCodeview",a,!0);d.invoke("popover.hide",k);d.invoke("handle.hide",t);c.addClass("codeview");g.focus();if(v.hasCodeMirror){c=L.fromTextArea(g[0],b.codemirror);if(b.codemirror.tern){var h=new L.TernServer(b.codemirror.tern);c.ternServer=h;c.on("cursorActivity.summernote",function(a){h.updateArgHints(a)})}c.setSize(null,f.outerHeight());g.data("cmEditor",c)}};this.deactivate=
function(b){var c=b.holder(),a=b.editor(),f=b.toolbar(),g=b.editable();b=b.codable();var k=a.data("options");if(v.hasCodeMirror){var t=b.data("cmEditor");b.val(t.getValue());t.toTextArea()}t=e.value(b,k.prettifyHtml)||e.emptyPara;var h=g.html()!==t;g.html(t);g.height(k.height?b.height():"auto");a.removeClass("codeview");h&&d.bindCustomEvent(c,g.data("callbacks"),"change")(g.html(),g);g.focus();d.invoke("toolbar.updateCodeview",f,!1)}},ma=function(g){var b=d(document);this.attach=function(c,a){if(a.airMode||
a.disableDragAndDrop)b.on("drop.summernote",function(a){a.preventDefault()});else this.attachDragAndDropEvent(c,a)};this.attachDragAndDropEvent=function(c,a){var f=d(),l=c.editor(),k=c.dropzone(),t=k.find(".note-dropzone-message");b.on("dragenter.summernote",function(b){var d=g.invoke("codeview.isActivated",c),e=0<l.width()&&0<l.height();d||f.length||!e||(l.addClass("dragover"),k.width(l.width()),k.height(l.height()),t.text(a.langInfo.image.dragImageHere));f=f.add(b.target)}).on("dragleave",function(a){f=
f.not(a.target);f.length||l.removeClass("dragover")}).on("drop",function(){f=d();l.removeClass("dragover")});k.on("dragenter.summernote",function(){k.addClass("hover");t.text(a.langInfo.image.dropImage)}).on("dragleave",function(){k.removeClass("hover");t.text(a.langInfo.image.dragImageHere)});k.on("drop.summernote",function(a){var b=a.originalEvent.dataTransfer,c=e.makeLayoutInfo(a.currentTarget||a.target);if(b&&b.files&&b.files.length)a.preventDefault(),c.editable().focus(),g.insertImages(c,b.files);
else{a=function(){c.holder().summernote("insertNode",this)};for(var f=0,k=b.types.length;f<k;f++){var l=b.types[f],h=b.getData(l);-1<l.toLowerCase().indexOf("text")?c.holder().summernote("pasteHTML",h):d(h).each(a)}}}).on("dragover",!1)}},na=function(g){var b;this.attach=function(a){if(v.isMSIE&&10<v.browserVersion||v.isFF)b=d("<div />").attr("contenteditable",!0).css({position:"absolute",left:-1E5,opacity:0}),a.editable().on("keydown.summernote",function(c){c.ctrlKey&&c.keyCode===J.code.V&&(g.invoke("saveRange",
a.editable()),b.focus(),setTimeout(function(){var c=a.editable(),f=b[0].firstChild;if(e.isImg(f)){f=atob(f.src.split(",")[1]);for(var t=new Uint8Array(f.length),h=0;h<f.length;h++)t[h]=f.charCodeAt(h);f=new Blob([t],{type:"image/png"});f.name="clipboard.png";g.invoke("restoreRange",c);g.invoke("focus",c);g.insertImages(a,[f])}else f=d("<div />").html(b.html()).html(),g.invoke("restoreRange",c),g.invoke("focus",c),f&&g.invoke("pasteHTML",c,f);b.empty()},0))}),a.editable().before(b);else a.editable().on("paste.summernote",
c)};var c=function(a){var b=a.originalEvent.clipboardData;a=e.makeLayoutInfo(a.currentTarget||a.target);var c=a.editable();b&&b.items&&b.items.length&&(b=n.head(b.items),"file"===b.kind&&-1!==b.type.indexOf("image/")&&g.insertImages(a,[b.getAsFile()]),g.invoke("editor.afterCommand",c))}},oa=function(e){var b=function(a,b){a.toggleClass("disabled",!b);a.attr("disabled",!b)},c=function(a,b){a.on("keypress.summernote",function(a){a.keyCode===J.code.ENTER&&b.trigger("click")})};this.showLinkDialog=function(a,
e,g){return d.Deferred(function(a){var d=e.find(".note-link-dialog"),f=d.find(".note-link-text"),k=d.find(".note-link-url"),p=d.find(".note-link-btn"),l=d.find("input[type=checkbox]");d.one("shown.bs.modal",function(){f.val(g.text);f.on("input",function(){b(p,f.val()&&k.val());g.text=f.val()});g.url||(g.url=g.text||"http://",b(p,g.text));k.on("input",function(){b(p,f.val()&&k.val());g.text||f.val(k.val())}).val(g.url).trigger("focus").trigger("select");c(k,p);c(f,p);l.prop("checked",g.isNewWindow);
p.one("click",function(b){b.preventDefault();a.resolve({range:g.range,url:k.val(),text:f.val(),isNewWindow:l.is(":checked")});d.modal("hide")})}).one("hidden.bs.modal",function(){f.off("input keypress");k.off("input keypress");p.off("click");"pending"===a.state()&&a.reject()}).modal("show")}).promise()};this.show=function(a){var b=a.editor(),c=a.dialog(),d=a.editable(),g=a.popover();a=e.invoke("editor.getLinkInfo",d);var h=b.data("options");e.invoke("editor.saveRange",d);this.showLinkDialog(d,c,a).then(function(a){e.invoke("editor.restoreRange",
d);e.invoke("editor.createLink",d,a,h);e.invoke("popover.hide",g)}).fail(function(){e.invoke("editor.restoreRange",d)})}},pa=function(e){var b=function(b,a){b.on("keypress.summernote",function(b){b.keyCode===J.code.ENTER&&a.trigger("click")})};this.show=function(b){var a=b.dialog(),c=b.editable();e.invoke("editor.saveRange",c);this.showImageDialog(c,a).then(function(a){e.invoke("editor.restoreRange",c);"string"===typeof a?e.invoke("editor.insertImage",c,a):e.insertImages(b,a)}).fail(function(){e.invoke("editor.restoreRange",
c)})};this.showImageDialog=function(c,a){return d.Deferred(function(c){var d=a.find(".note-image-dialog"),e=a.find(".note-image-input"),f=a.find(".note-image-url"),g=a.find(".note-image-btn");d.one("shown.bs.modal",function(){e.replaceWith(e.clone().on("change",function(){c.resolve(this.files||this.value);d.modal("hide")}).val(""));g.click(function(a){a.preventDefault();c.resolve(f.val());d.modal("hide")});f.on("keyup paste",function(a){a="paste"===a.type?a.originalEvent.clipboardData.getData("text"):
f.val();g.toggleClass("disabled",!a);g.attr("disabled",!a)}).val("").trigger("focus");b(f,g)}).one("hidden.bs.modal",function(){e.off("change");f.off("keyup paste keypress");g.off("click");"pending"===c.state()&&c.reject()}).modal("show")})}},qa=function(e){this.showHelpDialog=function(b,c){return d.Deferred(function(a){c.find(".note-help-dialog").one("hidden.bs.modal",function(){a.resolve()}).modal("show")}).promise()};this.show=function(b){var c=b.dialog(),a=b.editable();e.invoke("editor.saveRange",
a,!0);this.showHelpDialog(a,c).then(function(){e.invoke("editor.restoreRange",a)})}};d.summernote=d.summernote||{};d.extend(d.summernote,{version:"0.6.17",options:{width:null,height:null,minHeight:null,maxHeight:null,focus:!1,tabsize:4,styleWithSpan:!0,disableLinkTarget:!1,disableDragAndDrop:!1,disableResizeEditor:!1,disableResizeImage:!1,shortcuts:!0,placeholder:!1,prettifyHtml:!0,iconPrefix:"mbr-icon-",icons:{font:{bold:"bold",italic:"italic",underline:"underline",clear:"eraser",height:"text-height",
strikethrough:"strikethrough",superscript:"superscript",subscript:"subscript"},image:{image:"picture-o",floatLeft:"align-left",floatRight:"align-right",floatNone:"align-justify",shapeRounded:"square",shapeCircle:"circle-o",shapeThumbnail:"picture-o",shapeNone:"times",remove:"trash-o"},link:{link:"link",unlink:"unlink",edit:"edit2"},table:{table:"table"},hr:{insert:"minus"},style:{style:"magic-stick"},lists:{unordered:"bulleted-list",ordered:"numbered-list"},options:{help:"question",fullscreen:"arrows-alt",
codeview:"code"},paragraph:{paragraph:"align-left",outdent:"outdent",indent:"indent",left:"align-left",center:"align-center",right:"align-right",justify:"align-justify"},color:{recent:"font"},history:{undo:"undo",redo:"repeat"},misc:{check:"check"}},dialogsInBody:!1,codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},lang:"en-US",direction:null,toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontname",["fontname"]],["fontsize",["fontsize"]],["color",["color"]],["para",
["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","hr"]],["view",["fullscreen","codeview"]],["help",["help"]]],plugin:{},airMode:!1,airPopover:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]],styleTags:"p blockquote pre h1 h2 h3 h4".split(" "),defaultFontName:"Helvetica Neue",fontNames:"Arial;Arial Black;Comic Sans MS;Courier New;Helvetica Neue;Helvetica;Impact;Lucida Grande;Tahoma;Times New Roman;Verdana".split(";"),
fontNamesIgnoreCheck:[],fontSizes:"8 9 10 11 12 14 18 24 36".split(" "),colors:["#000000 #424242 #636363 #9C9C94 #CEC6CE #EFEFEF #F7F7F7 #FFFFFF".split(" "),"#FF0000 #FF9C00 #FFFF00 #00FF00 #00FFFF #0000FF #9C00FF #FF00FF".split(" "),"#F7C6CE #FFE7CE #FFEFC6 #D6EFD6 #CEDEE7 #CEE7F7 #D6D6E7 #E7D6DE".split(" "),"#E79C9C #FFC69C #FFE79C #B5D6A5 #A5C6CE #9CC6EF #B5A5D6 #D6A5BD".split(" "),"#E76363 #F7AD6B #FFD663 #94BD7B #73A5AD #6BADDE #8C7BC6 #C67BA5".split(" "),"#CE0000 #E79439 #EFC631 #6BA54A #4A7B8C #3984C6 #634AA5 #A54A7B".split(" "),
"#9C0000 #B56308 #BD9400 #397B21 #104A5A #085294 #311873 #731842".split(" "),"#630000 #7B3900 #846300 #295218 #083139 #003163 #21104A #4A1031".split(" ")],lineHeights:"1.0 1.2 1.4 1.5 1.6 1.8 2.0 3.0".split(" "),insertTableMaxSize:{col:10,row:10},maximumImageFileSize:null,oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onMediaDelete:null,onToolbarClick:null,onsubmit:null,onCreateLink:function(d){-1!==d.indexOf("@")&&-1===d.indexOf(":")&&
(d="mailto:"+d);return d},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+ENTER":"insertHorizontalRule"},
mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+ENTER":"insertHorizontalRule","CMD+V":"paste"}}},
lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",
shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",
normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",
transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},history:{undo:"Undo",redo:"Redo"}}}});var E=new function(){var g=function(a,b){var c=b.event,d=b.value,e=b.title,r=b.name,m=b.className,f=b.dropdown,g=b.nocaret;b=b.hide;return(f?'<div class="btn-group dropup'+
(m?" "+m:"")+'"'+(r?' data-name="'+r+'"':"")+">":"")+'<button type="button" class="btn btn-default btn-sm'+(!f&&m?" "+m:"")+(f?" dropdown-toggle":"")+'"'+(f?' data-toggle="dropdown"':"")+(e?' title="'+e+'"':"")+(c?' data-event="'+c+'"':"")+(r&&!f?' data-name="'+r+'"':"")+(d?" data-value='"+d+"'":"")+(b?" data-hide='"+b+"'":"")+(f?' style="z-index: 1001;"':"")+' tabindex="-1">'+a+(f&&!g?' <span class="caret"></span>':"")+"</button>"+(f||"")+(f?"</div>":"")},b=function(a,b){return g('<i class="'+a+
'"></i>',b)},c=function(a,b){a=d('<div class="'+a+' popover top in" style="display: none;"><div class="arrow"></div><div class="popover-content"></div></div>');a.find(".popover-content").append(b);return a},a=function(a,b,c,d){return'<div class="'+a+' modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content">'+(b?'<div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4 class="modal-title">'+b+"</h4></div>":"")+'<div class="modal-body">'+
c+"</div>"+(d?'<div class="modal-footer">'+d+"</div>":"")+"</div></div></div>"},f=function(a,b,c){b="dropdown-menu"+(b?" "+b:"");c=c||"ul";a instanceof Array&&(a=a.join(""));return"<"+c+' class="'+b+'">'+a+"</"+c+">"},l={picture:function(a,c){return b(c.iconPrefix+c.icons.image.image,{event:"showImageDialog",title:a.image.image,hide:!0})},link:function(a,c){return b(c.iconPrefix+c.icons.link.link,{event:"showLinkDialog",title:a.link.link,hide:!0})},table:function(a,c){return b(c.iconPrefix+c.icons.table.table,
{title:a.table.table,dropdown:f('<div class="note-dimension-picker">;<div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div>;<div class="note-dimension-picker-highlighted"></div>;<div class="note-dimension-picker-unhighlighted"></div>;</div>;<div class="note-dimension-display"> 1 x 1 </div>'.split(";"),"note-table")})},style:function(a,c){var d=c.styleTags.reduce(function(b,c){return b+'<li><a data-event="formatBlock" href="#" data-value="'+c+'">'+a.style["p"===
c?"normal":c]+"</a></li>"},"");return b(c.iconPrefix+c.icons.style.style,{title:a.style.style,dropdown:f(d)})},fontname:function(a,b){var c=[],d=b.fontNames.reduce(function(a,d){if(!v.isFontInstalled(d)&&!n.contains(b.fontNamesIgnoreCheck,d))return a;c.push(d);console.log(d);return a+'<li><a data-event="fontName" href="#" data-value="'+d+'"><i class="'+b.iconPrefix+'check"></i> <span style="font-family:\''+d+"'\">"+d+"</span></a></li>"},""),e=v.isFontInstalled(b.defaultFontName)?b.defaultFontName:
c[0];return g('<span class="note-current-fontname">'+e+"</span>",{title:a.font.name,className:"note-fontname",dropdown:f(d,"note-check")})},fontsize:function(a,b){var c=b.fontSizes.reduce(function(a,c){return a+'<li><a data-event="fontSize" href="#" data-value="'+c+'"><i class="'+b.iconPrefix+b.icons.misc.check+'"></i> '+c+"</a></li>"},"");return g('<span class="note-current-fontsize">11</span>',{title:a.font.size,className:"note-fontsize",dropdown:f(c,"note-check")})},color:function(a,b){b=g('<i class="'+
b.iconPrefix+b.icons.color.recent+'" style="color:black;background-color:yellow;"></i>',{className:"note-recent-color",title:a.color.recent,event:"color",value:'{"backColor":"yellow"}'});a=g("",{title:a.color.more,dropdown:f(['<li><div class="btn-group">','<div class="note-palette-title">'+a.color.background+"</div>",'<div class="note-color-reset" data-event="backColor"',' data-value="inherit" title="'+a.color.transparent+'">'+a.color.setTransparent+"</div>",'<div class="note-color-palette" data-target-event="backColor"></div>',
'</div><div class="btn-group">','<div class="note-palette-title">'+a.color.foreground+"</div>",'<div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+a.color.reset+'">',a.color.resetToDefault,"</div>",'<div class="note-color-palette" data-target-event="foreColor"></div>',"</div></li>"])});return b+a},bold:function(a,c){return b(c.iconPrefix+c.icons.font.bold,{event:"bold",title:a.font.bold})},italic:function(a,c){return b(c.iconPrefix+c.icons.font.italic,{event:"italic",
title:a.font.italic})},underline:function(a,c){return b(c.iconPrefix+c.icons.font.underline,{event:"underline",title:a.font.underline})},strikethrough:function(a,c){return b(c.iconPrefix+c.icons.font.strikethrough,{event:"strikethrough",title:a.font.strikethrough})},superscript:function(a,c){return b(c.iconPrefix+c.icons.font.superscript,{event:"superscript",title:a.font.superscript})},subscript:function(a,c){return b(c.iconPrefix+c.icons.font.subscript,{event:"subscript",title:a.font.subscript})},
clear:function(a,c){return b(c.iconPrefix+c.icons.font.clear,{event:"removeFormat",title:a.font.clear})},ul:function(a,c){return b(c.iconPrefix+c.icons.lists.unordered,{event:"insertUnorderedList",title:a.lists.unordered})},ol:function(a,c){return b(c.iconPrefix+c.icons.lists.ordered,{event:"insertOrderedList",title:a.lists.ordered})},paragraph:function(a,c){var d=b(c.iconPrefix+c.icons.paragraph.left,{title:a.paragraph.left,event:"justifyLeft"}),e=b(c.iconPrefix+c.icons.paragraph.center,{title:a.paragraph.center,
event:"justifyCenter"}),g=b(c.iconPrefix+c.icons.paragraph.right,{title:a.paragraph.right,event:"justifyRight"}),m=b(c.iconPrefix+c.icons.paragraph.justify,{title:a.paragraph.justify,event:"justifyFull"}),r=b(c.iconPrefix+c.icons.paragraph.outdent,{title:a.paragraph.outdent,event:"outdent"}),p=b(c.iconPrefix+c.icons.paragraph.indent,{title:a.paragraph.indent,event:"indent"});return b(c.iconPrefix+c.icons.paragraph.paragraph,{title:a.paragraph.paragraph,dropdown:f(['<div class="note-align btn-group">',
d+e+g+m,'</div><div class="note-list btn-group">',p+r,"</div>"],"","div")})},height:function(a,c){var d=c.lineHeights.reduce(function(a,b){return a+'<li><a data-event="lineHeight" href="#" data-value="'+parseFloat(b)+'"><i class="'+c.iconPrefix+c.icons.misc.check+'"></i> '+b+"</a></li>"},"");return b(c.iconPrefix+c.icons.font.height,{title:a.font.height,dropdown:f(d,"note-check")})},help:function(a,c){return b(c.iconPrefix+c.icons.options.help,{event:"showHelpDialog",title:a.options.help,hide:!0})},
fullscreen:function(a,c){return b(c.iconPrefix+c.icons.options.fullscreen,{event:"fullscreen",title:a.options.fullscreen})},codeview:function(a,c){return b(c.iconPrefix+c.icons.options.codeview,{event:"codeview",title:a.options.codeview})},undo:function(a,c){return b(c.iconPrefix+c.icons.history.undo,{event:"undo",title:a.history.undo})},redo:function(a,c){return b(c.iconPrefix+c.icons.history.redo,{event:"redo",title:a.history.redo})},hr:function(a,c){return b(c.iconPrefix+c.icons.hr.insert,{event:"insertHorizontalRule",
title:a.hr.insert})}},k=function(a,e){var f=function(){for(var b=d("<div />"),f=0,g=e.airPopover.length;f<g;f++)b.append(t(e.airPopover[f],a,e));return c("note-air-popover",b.children())},m=d('<div class="note-popover" />');m.append(function(){var d=b(e.iconPrefix+e.icons.link.link,{title:a.link.link,event:"showMbrLinkDialog",hide:!0}),f=l.mbrLinkColor(a,e);return c("note-link-popover",'<a href="javascript:void(0)" style="display:none !important" target="_blank">www.google.com</a><div class="note-insert btn-group">'+
d+f+"</div>")}());m.append(function(){var d=g('<span class="note-fontsize-10">100%</span>',{title:a.image.resizeFull,event:"resize",value:"1"}),f=g('<span class="note-fontsize-10">50%</span>',{title:a.image.resizeHalf,event:"resize",value:"0.5"}),m=g('<span class="note-fontsize-10">25%</span>',{title:a.image.resizeQuarter,event:"resize",value:"0.25"}),r=b(e.iconPrefix+e.icons.image.floatLeft,{title:a.image.floatLeft,event:"floatMe",value:"left"}),p=b(e.iconPrefix+e.icons.image.floatRight,{title:a.image.floatRight,
event:"floatMe",value:"right"}),k=b(e.iconPrefix+e.icons.image.floatNone,{title:a.image.floatNone,event:"floatMe",value:"none"}),h=b(e.iconPrefix+e.icons.image.shapeRounded,{title:a.image.shapeRounded,event:"imageShape",value:"img-rounded"}),w=b(e.iconPrefix+e.icons.image.shapeCircle,{title:a.image.shapeCircle,event:"imageShape",value:"img-circle"}),l=b(e.iconPrefix+e.icons.image.shapeThumbnail,{title:a.image.shapeThumbnail,event:"imageShape",value:"img-thumbnail"}),n=b(e.iconPrefix+e.icons.image.shapeNone,
{title:a.image.shapeNone,event:"imageShape",value:""}),y=b(e.iconPrefix+e.icons.image.remove,{title:a.image.remove,event:"removeMedia",value:"none"});return c("note-image-popover",(e.disableResizeImage?"":'<div class="btn-group">'+d+f+m+"</div>")+'<div class="btn-group">'+r+p+k+'</div><br><div class="btn-group">'+h+w+l+n+'</div><div class="btn-group">'+y+"</div>")}());m.append(function(){var b=l.mbrLink(a,e),d=l.mbrFonts(a,e),f=l.mbrLinkColor(a,e),g=l.mbrFontSize(a,e),m=e.customToolbar;m&&("off"===
m.mbrLink&&(b=""),"off"===m.mbrFonts&&(d=""),"off"===m.mbrLinkColor&&(f=""),"off"===m.mbrFontSize&&(g=""));return c("note-button-popover",'<div class="note-insert btn-group">'+b+'</div><div class="note-mbrFonts btn-group">'+d+g+f+"</div>")}());e.airMode&&m.append(f());return m},t=function(a,b,c){var e=d('<div class="btn-group">');e.addClass("note-"+a[0]);for(var f=0,g=a[1].length;f<g;f++){var m=d(l[a[1][f]](b,c));m.attr("data-name",a[1][f]);e.append(m)}return e},h=function(a){return'<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="'+
(a.disableResizeImage?"note-control-holder":"note-control-sizing")+' note-control-se"></div>'+(a.disableResizeImage?"":'<div class="note-control-selection-info"></div>')+"</div></div>"},q=function(a,b){var c=[],d;for(d in b)b.hasOwnProperty(d)&&c.push('<div class="note-shortcut-col col-xs-6 note-shortcut-key">'+b[d].kbd+'</div><div class="note-shortcut-col col-xs-6 note-shortcut-name">'+b[d].text+"</div>");return'<div class="note-shortcut-row row"><div class="note-shortcut-col col-xs-6 note-shortcut-title col-xs-offset-6">'+
a+'</div></div><div class="note-shortcut-row row">'+c.join('</div><div class="note-shortcut-row row">')+"</div>"},p=function(a,b){b=b.extraKeys;var c=[],d;for(d in b)b.hasOwnProperty(d)&&c.push({kbd:d,text:b[d]});return q(a.shortcut.extraKeys,c)},w=function(a,b){var c='<div class="note-shortcut note-shortcut-col col-sm-6 col-xs-12">'+q(a.shortcut.action,[{kbd:"\u2318 + Z",text:a.history.undo},{kbd:"\u2318 + \u21e7 + Z",text:a.history.redo},{kbd:"\u2318 + ]",text:a.paragraph.indent},{kbd:"\u2318 + [",
text:a.paragraph.outdent},{kbd:"\u2318 + ENTER",text:a.hr.insert}])+'</div><div class="note-shortcut note-shortcut-col col-sm-6 col-xs-12">';var d=q(a.shortcut.textFormatting,[{kbd:"\u2318 + B",text:a.font.bold},{kbd:"\u2318 + I",text:a.font.italic},{kbd:"\u2318 + U",text:a.font.underline},{kbd:"\u2318 + \\",text:a.font.clear}]);c=c+d+"</div>";d='<div class="note-shortcut note-shortcut-col col-sm-6 col-xs-12">'+q(a.shortcut.documentStyle,[{kbd:"\u2318 + NUM0",text:a.style.normal},{kbd:"\u2318 + NUM1",
text:a.style.h1},{kbd:"\u2318 + NUM2",text:a.style.h2},{kbd:"\u2318 + NUM3",text:a.style.h3},{kbd:"\u2318 + NUM4",text:a.style.h4},{kbd:"\u2318 + NUM5",text:a.style.h5},{kbd:"\u2318 + NUM6",text:a.style.h6}])+'</div><div class="note-shortcut note-shortcut-col col-sm-6 col-xs-12">';var e=q(a.shortcut.paragraphFormatting,[{kbd:"\u2318 + \u21e7 + L",text:a.paragraph.left},{kbd:"\u2318 + \u21e7 + E",text:a.paragraph.center},{kbd:"\u2318 + \u21e7 + R",text:a.paragraph.right},{kbd:"\u2318 + \u21e7 + J",
text:a.paragraph.justify},{kbd:"\u2318 + \u21e7 + NUM7",text:a.lists.ordered},{kbd:"\u2318 + \u21e7 + NUM8",text:a.lists.unordered}]);c=[c,d+e+"</div>"];b.extraKeys&&c.push('<div class="note-shortcut note-shortcut-col col-sm-6 col-xs-12">'+p(a,b)+"</div>");return'<div class="note-shortcut-row row">'+c.join('</div><div class="note-shortcut-row row">')+"</div>"},y={image:function(b,c){var d="";c.maximumImageFileSize&&(d=Math.floor(Math.log(c.maximumImageFileSize)/Math.log(1024)),c=1*(c.maximumImageFileSize/
Math.pow(1024,d)).toFixed(2)+" "+" KMGTP"[d]+"B",d="<small>"+b.image.maximumFileSize+" : "+c+"</small>");return a("note-image-dialog",b.image.insert,'<div class="form-group row note-group-select-from-files"><label>'+b.image.selectFromFiles+'</label><input class="note-image-input" type="file" name="files" accept="image/*" multiple="multiple" />'+d+'</div><div class="form-group row"><label>'+b.image.url+'</label><input class="note-image-url form-control col-md-12" type="text" /></div>','<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+
b.image.insert+"</button>")},link:function(b,c){return a("note-link-dialog",b.link.insert,'<div class="form-group row"><label>'+b.link.textToDisplay+'</label><input class="note-link-text form-control col-md-12" type="text" /></div><div class="form-group row"><label>'+b.link.url+'</label><input class="note-link-url form-control col-md-12" type="text" value="http://" /></div>'+(c.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+b.link.openInNewWindow+"</label></div>"),
'<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+b.link.insert+"</button>")},help:function(b,c){b='<a class="modal-close pull-right" aria-hidden="true" tabindex="-1">'+b.shortcut.close+'</a><div class="title">'+b.shortcut.shortcuts+"</div>"+(v.isMac?w(b,c):w(b,c).replace(/\u2318/g,"Ctrl").replace(/\u21e7/g,"Shift"))+'<p class="text-center"><a href="//summernote.org/" target="_blank">Summernote 0.6.17</a> \u00b7 <a href="//github.com/summernote/summernote" target="_blank">Project</a> \u00b7 <a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a></p>';
return a("note-help-dialog","",b,"")}},H=function(a,b){var c="";d.each(y,function(d,e){c+=e(a,b)});return'<div class="note-dialog">'+c+"</div>"},x=function(){if(!x.isExecuted){x.isExecuted=!0;var a=d.fn.tooltip;d.fn.tooltip=function(b){"object"==typeof b&&(b.animation=!1);return a.apply(this,arguments)};d.fn.tooltip.__proto__=a}},D=function(a,b,c){z.invertObject(b);a=a.find("button");x();a.each(function(a,b){}).tooltip({container:"body",trigger:"hover",placement:c||"top"}).on("click",function(){d(this).tooltip("hide")})},
G=function(a,b){var c=b.colors;a.find(".note-color-palette").each(function(){for(var a=d(this),b=a.attr("data-target-event"),e=[],f=0,g=c.length;f<g;f++){for(var p=c[f],m=[],r=0,k=p.length;r<k;r++){var h=p[r];m.push(['<button type="button" class="note-color-btn" style="background-color:',h,';" data-event="',b,'" data-value="',h,'" title="',h,'" data-toggle="button" tabindex="-1"></button>'].join(""))}e.push('<div class="note-color-row">'+m.join("")+"</div>")}a.html(e.join(""))})};this.createLayoutByAirMode=
function(a,b){var c=b.langInfo,e=b.keyMap[v.isMac?"mac":"pc"],f=z.uniqueId();a.addClass("note-air-editor note-editable");a.attr({id:"note-editor-"+f,contentEditable:!0});a=document.body;var g=d(k(c,b));g.addClass("note-air-layout");g.attr("id","note-popover-"+f);g.appendTo(a);D(g,e);G(g,b);e=d(h(b));e.addClass("note-air-layout");e.attr("id","note-handle-"+f);e.appendTo(a);b=d(H(c,b));b.addClass("note-air-layout");b.attr("id","note-dialog-"+f);b.find("button.close, a.modal-close").click(function(){d(this).closest(".modal").modal("hide")});
b.appendTo(a)};this.addGroup=function(a,b,c,e){c=c||"link,image,button,air";var f=a.data("options");b=t(b,f.langInfo,f);c=c.split(",");f="";for(var g=0;g<c.length;g++)f+=(f?",":"")+".note-"+c[g]+"-popover";a=a.attr("id").replace("note-editor-","");a=d("#note-popover-"+a).find(f).find(".popover-content");0===e?a.prepend(b):0<e?a.children().eq(e-1).after(b):b.appendTo(a)};this.createLayoutByFrame=function(a,b){var c=b.langInfo,f=d('<div class="note-editor panel panel-default" />');b.width&&f.width(b.width);
0<b.height&&d('<div class="note-statusbar">'+(b.disableResizeEditor?"":'<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>')+"</div>").prependTo(f);var g=d('<div class="note-editing-area" />'),p=!a.is(":disabled");p=d('<div class="note-editable panel-body" contentEditable="'+p+'"></div>').prependTo(g);b.height&&p.height(b.height);b.direction&&p.attr("dir",b.direction);var m=a.attr("placeholder")||b.placeholder;m&&p.attr("data-placeholder",
m);p.html(e.html(a)||e.emptyPara);d('<textarea class="note-codable"></textarea>').prependTo(g);p=d(k(c,b)).prependTo(g);G(p,b);D(p,x);d(h(b)).prependTo(g);g.prependTo(f);g=d('<div class="note-toolbar panel-heading" />');x=0;for(p=b.toolbar.length;x<p;x++){m=b.toolbar[x][1];for(var w=d('<div class="note-'+b.toolbar[x][0]+' btn-group" />'),n=0,y=m.length;n<y;n++){var r=l[m[n]];d.isFunction(r)&&(r=d(r(c,b)),r.attr("data-name",m[n]),w.append(r))}g.append(w)}var x=b.keyMap[v.isMac?"mac":"pc"];G(g,b);D(g,
x,"bottom");g.prependTo(f);d('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(f);g=b.dialogsInBody?d(document.body):f;d(H(c,b)).prependTo(g).find("button.close, a.modal-close").click(function(){d(this).closest(".modal").modal("hide")});f.insertAfter(a);a.hide()};this.hasNoteEditor=function(a){return 0<this.noteEditorFromHolder(a).length};this.noteEditorFromHolder=function(a){return a.hasClass("note-air-editor")?a:a.next().hasClass("note-editor")?a.next():d()};
this.createLayout=function(a,b){b.airMode?this.createLayoutByAirMode(a,b):this.createLayoutByFrame(a,b)};this.layoutInfoFromHolder=function(a){var b=this.noteEditorFromHolder(a);if(b.length)return b.data("holder",a),e.buildLayoutInfo(b)};this.removeLayout=function(a,b,c){b.popover().find("[data-original-title]").tooltip(3<parseInt(d.fn.tooltip.Constructor.VERSION)?"dispose":"destroy");c.airMode?(a.removeClass("note-air-editor note-editable").removeAttr("id contentEditable"),b.popover().remove(),b.handle().remove(),
b.dialog().remove()):(a.html(b.editable().html()),c.dialogsInBody&&b.dialog().remove(),b.editor().remove(),a.show())};this.getTemplate=function(){return{button:g,iconButton:b,dialog:a}};this.addButtonInfo=function(a,b){l[a]=b};this.addDialogInfo=function(a,b){y[a]=b}},I=new function(){var g=this,b=this.modules={editor:new ea(this),toolbar:new fa(this),statusbar:new ha(this),popover:new ia(this),handle:new ja(this),fullscreen:new ka(this),codeview:new la(this),dragAndDrop:new ma(this),clipboard:new na(this),
linkDialog:new oa(this),imageDialog:new pa(this),helpDialog:new qa(this)};this.invoke=function(){var a=n.head(n.from(arguments)),b=n.tail(n.from(arguments)),c=a.split("."),d=1<c.length;a=d&&n.head(c);c=d?n.last(c):n.head(c);a=this.getModule(a);return(c=a[c])&&c.apply(a,b)};this.getModule=function(a){return this.modules[a]||this.modules.editor};var c=this.bindCustomEvent=function(a,b,c){return function(){var d=b[z.namespaceToCamel(c,"on")];d&&d.apply(a[0],arguments);return a.trigger("summernote."+
c,arguments)}};this.insertImages=function(a,e){var f=a.editor(),g=a.editable(),p=a.holder(),k=g.data("callbacks"),h=f.data("options");k.onImageUpload?c(p,k,"image.upload")(e):d.each(e,function(a,d){var e=d.name;h.maximumImageFileSize&&h.maximumImageFileSize<d.size?c(p,k,"image.upload.error")(h.langInfo.image.maximumFileSizeError):N.readFileAsDataURL(d).then(function(a){b.editor.insertImage(g,a,e)}).fail(function(){c(p,k,"image.upload.error")(h.langInfo.image.maximumFileSizeError)})})};var a={showLinkDialog:function(a){b.linkDialog.show(a)},
showImageDialog:function(a){b.imageDialog.show(a)},showHelpDialog:function(a){b.helpDialog.show(a)},fullscreen:function(a){b.fullscreen.toggle(a)},codeview:function(a){b.codeview.toggle(a)}},f=function(a){e.isImg(a.target)&&a.preventDefault()},l=function(a){var c=e.makeLayoutInfo(a.currentTarget||a.target);b.editor.removeBogus(c.editable());k(a)};this.updateStyleInfo=function(a,c){if(a&&c.popover().length){var d=c.editor().data("options").airMode;d||b.toolbar.update(c.toolbar(),a);b.popover.update(c.popover(),
a,d);b.handle.update(c.handle(),a,d)}};var k=function(a){var c=a.target;setTimeout(function(){var a=e.makeLayoutInfo(c),d=b.editor.currentStyle(c);g.updateStyleInfo(d,a)},0)},t=function(a){a=e.makeLayoutInfo(a.currentTarget||a.target);b.popover.hide(a.popover());b.handle.hide(a.handle())},h=function(a){d(a.target).closest("[data-event]").length&&a.preventDefault()},q=function(c){var f=d(c.target).closest("[data-event]");if(f.length){var g=f.attr("data-event"),h=f.attr("data-value"),p=f.attr("data-hide"),
l=e.makeLayoutInfo(c.target);if(-1!==d.inArray(g,["resize","floatMe","removeMedia","imageShape"])){var q=l.handle().find(".note-control-selection");q=d(q.data("target"))}p&&f.parents(".popover").hide();if(d.isFunction(d.summernote.pluginEvents[g]))d.summernote.pluginEvents[g](c,b.editor,l,h);else b.editor[g]?(p=l.editable(),p.focus(),b.editor[g](p,h,q),c.preventDefault()):a[g]&&(a[g].call(this,l),c.preventDefault());if(-1!==d.inArray(g,["backColor","foreColor"])){var m=l.editor().data("options",m);
(m.airMode?b.popover:b.toolbar).updateRecentColor(n.head(f),g,h)}f.attr("data-bs-original-title")&&(g=f.siblings("ul.dropdown-menu"),f.toggleClass("show"),g.length&&(g.toggleClass("show"),g.css("z-index",1002),g.css("transform","translateY(40px)")));k(c)}};this.bindKeyMap=function(c,e){var f=c.editor(),g=c.editable();g.on("keydown.summernote",function(k){var h=[];k.metaKey&&h.push("CMD");k.ctrlKey&&!k.altKey&&h.push("CTRL");k.shiftKey&&h.push("SHIFT");var p=J.nameFromCode[k.keyCode];p&&h.push(p);
p=h.join("+");if(h=e[p]){p=d.summernote.pluginEvents[p];if(d.isFunction(p)&&p(k,b.editor,c))return!1;p=d.summernote.pluginEvents[h];d.isFunction(p)?p(k,b.editor,c):b.editor[h]?(b.editor[h](g,f.data("options")),k.preventDefault()):a[h]&&(a[h].call(this,c),k.preventDefault())}else J.isEdit(k.keyCode)&&b.editor.afterCommand(g)})};this.attach=function(a,c){c.shortcuts&&this.bindKeyMap(a,c.keyMap[v.isMac?"mac":"pc"]);a.editable().on("mousedown.summernote",f);a.editable().on("keyup.summernote",l);a.editable().on("mouseup.summernote",
function(a){1===a.which&&l(a)});a.editable().on("scroll.summernote",t);b.clipboard.attach(a,c);b.handle.attach(a,c);a.popover().on("click",q);a.popover().on("mousedown",h);var e;d(window).on("resize",function(){clearTimeout(e);e=setTimeout(function(){b.popover.hide(a.popover())},50)});b.dragAndDrop.attach(a,c);c.airMode||(a.toolbar().on("click",q),a.toolbar().on("mousedown",h),b.statusbar.attach(a,c));(c.airMode?a.popover():a.toolbar()).find(".note-dimension-picker-mousecatcher").css({width:c.insertTableMaxSize.col+
"em",height:c.insertTableMaxSize.row+"em"}).on("mousemove",function(a){var b=d(a.target.parentNode),e=b.next(),f=b.find(".note-dimension-picker-mousecatcher"),g=b.find(".note-dimension-picker-highlighted");b=b.find(".note-dimension-picker-unhighlighted");if(void 0===a.offsetX){var k=d(a.target).offset();var h=a.pageX-k.left;a=a.pageY-k.top}else h=a.offsetX,a=a.offsetY;h=Math.ceil(h/18)||1;a=Math.ceil(a/18)||1;g.css({width:h+"em",height:a+"em"});f.attr("data-value",h+"x"+a);3<h&&h<c.insertTableMaxSize.col&&
b.css({width:h+1+"em"});3<a&&a<c.insertTableMaxSize.row&&b.css({height:a+1+"em"});e.html(h+" x "+a)});a.editor().data("options",c);v.isMSIE||setTimeout(function(){document.execCommand("styleWithCSS",0,c.styleWithSpan)},0);var g=new aa(a.editable());a.editable().data("NoteHistory",g);a.editable().data("callbacks",{onInit:c.onInit,onFocus:c.onFocus,onBlur:c.onBlur,onKeydown:c.onKeydown,onKeyup:c.onKeyup,onMousedown:c.onMousedown,onEnter:c.onEnter,onPaste:c.onPaste,onBeforeCommand:c.onBeforeCommand,
onChange:c.onChange,onImageUpload:c.onImageUpload,onImageUploadError:c.onImageUploadError,onMediaDelete:c.onMediaDelete,onToolbarClick:c.onToolbarClick});g=b.editor.currentStyle(a.editable());this.updateStyleInfo(g,a)};this.attachCustomEvent=function(a,b){var f=a.holder(),g=a.editable(),h=g.data("callbacks");g.on("focus.summernote",c(f,h,"focus"));g.on("blur.summernote",c(f,h,"blur"));g.keydown(function(a){a.keyCode===J.code.ENTER&&c(f,h,"enter").call(this,a);c(f,h,"keydown").call(this,a)});g.keyup(c(f,
h,"keyup"));g.on("mousedown.summernote",c(f,h,"mousedown"));g.on("mouseup.summernote",c(f,h,"mouseup"));g.on("scroll.summernote",c(f,h,"scroll"));g.on("paste.summernote",c(f,h,"paste"));g.on((v.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input")+".summernote",function(){c(f,h,"change")(g.html(),g)});b.airMode||(a.toolbar().click(c(f,h,"toolbar.click")),a.popover().click(c(f,h,"popover.click")));e.isTextarea(n.head(f))&&f.closest("form").submit(function(b){a.holder().val(a.holder().code());
c(f,h,"submit").call(this,b,f.code())});c(f,h,"init")(a);b=0;for(var k=d.summernote.plugins.length;b<k;b++)d.isFunction(d.summernote.plugins[b].init)&&d.summernote.plugins[b].init(a)};this.detach=function(a,b){a.holder().off(".summernote");a.editable().off(".summernote");a.popover().off(".summernote");a.handle().off(".summernote");a.dialog().off();b.airMode||(a.dropzone().off(),a.toolbar().off(),a.statusbar().off())}};d.extend(d.summernote,{renderer:E,eventHandler:I,core:{agent:v,list:n,dom:e,range:u},
pluginEvents:{},plugins:[]});d.summernote.addPlugin=function(e){d.summernote.plugins.push(e);e.buttons&&d.each(e.buttons,function(b,c){E.addButtonInfo(b,c)});e.dialogs&&d.each(e.dialogs,function(b,c){E.addDialogInfo(b,c)});e.events&&d.each(e.events,function(b,c){d.summernote.pluginEvents[b]=c});e.langs&&d.each(e.langs,function(b,c){d.summernote.lang[b]&&d.extend(d.summernote.lang[b],c)});e.options&&d.extend(d.summernote.options,e.options)};d.summernote.adaptColorForBg=function(d){return"ffffff"==
tinycolor(d).toHex()?"#efefef":d};d.fn.extend({summernote:function(){var e=d.type(n.head(arguments)),b="string"===e,c=(e="object"===e)?n.head(arguments):{};c=d.extend({},d.summernote.options,c);c.icons=d.extend({},d.summernote.options.icons,c.icons);c.langInfo=d.extend(!0,{},d.summernote.lang["en-US"],d.summernote.lang[c.lang]);if(!b&&e){e=0;for(var a=d.summernote.plugins.length;e<a;e++){var f=d.summernote.plugins[e];c.plugin[f.name]&&(d.summernote.plugins[e]=d.extend(!0,f,c.plugin[f.name]))}}this.each(function(a,
b){a=d(b);b=d.extend(!0,{},c);var e=a.attr("data-toolbar");if(e){b.customToolbar||(b.customToolbar={});e=e.split(/,\s|,/g);for(var f in e)/^-/g.test(e[f])?b.customToolbar[e[f].replace(/^-/g,"")]="off":b.customToolbar[e[f]]="on";for(var g in b.airPopover){for(var k in b.airPopover[g])if(!(1<k)&&(f=b.airPopover[g][k],"object"===typeof f)){for(var l in f)"off"===b.customToolbar[f[l]]&&b.airPopover[g][k].splice(l,1);f.length||b.airPopover[g].splice(k,1)}1===b.airPopover[g].length&&b.airPopover.splice(g,
1)}}E.hasNoteEditor(a)||(E.createLayout(a,b),g=E.layoutInfoFromHolder(a),a.data("layoutInfo",g),I.attach(g,b),I.attachCustomEvent(g,b))});e=this.first();if(e.length){e=E.layoutInfoFromHolder(e);if(b)return b=n.head(n.from(arguments)),a=n.tail(n.from(arguments)),b=[b,e.editable()].concat(a),I.invoke.apply(I,b);c.focus&&e.editable().focus()}return this},code:function(g){if(void 0===g){var b=this.first();if(!b.length)return;var c=E.layoutInfoFromHolder(b),a=c&&c.editable();return a&&a.length?(b=I.invoke("codeview.isActivated",
c),I.invoke("codeview.sync",c),b?c.codable().val():c.editable().html()):e.value(b)}this.each(function(a,b){(a=(a=E.layoutInfoFromHolder(d(b)))&&a.editable())&&a.html(g)});return this},destroy:function(){this.each(function(e,b){e=d(b);if(E.hasNoteEditor(e)){b=E.layoutInfoFromHolder(e);var c=b.editor().data("options");I.detach(b,c);E.removeLayout(e,b,c)}});return this}})});
