var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,f,g){a instanceof String&&(a=String(a));for(var k=a.length,h=0;h<k;h++){var l=a[h];if(f.call(g,l,h,a))return{i:h,v:l}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,f,g){a!=Array.prototype&&a!=Object.prototype&&(a[f]=g.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,f,g,k){if(f){g=$jscomp.global;a=a.split(".");for(k=0;k<a.length-1;k++){var h=a[k];h in g||(g[h]={});g=g[h]}a=a[a.length-1];k=g[a];f=f(k);f!=k&&null!=f&&$jscomp.defineProperty(g,a,{configurable:!0,writable:!0,value:f})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,g){return $jscomp.findInternal(this,a,g).v}},"es6","es3");
(function(a,f){function g(a,d,c){var b=a[d];a[d]=function(){var a=Array.prototype.slice.call(arguments);b.apply(this,a);try{c.apply(this,a)}catch(m){}}}var k,h,l=!0;f.regExtension({name:"plugin-summernote",global:{initSummernote:function(b){var d=this;b=b||d.$template;var c=b.is('[data-app-edit="content"], [data-app-edit="full"], [data-app-btn]')?b:b.find('[data-app-edit="content"], [data-app-edit="full"], [data-app-btn]');c.attr("contenteditable",!0);clearTimeout(k);k=setTimeout(function(){c=d.applyFilter("summernoteEditableItems",
c,b,!1);h=c.get(0);c.filter(":not(.note-air-editor)").each(function(){if(!a(this).is(".note-air-editor")){if(a(this).is("[data-app-btn]")){var b=a(this).parents("[data-app-edit]:eq(0)").attr("data-toolbar")||!1;b&&a(this).attr("data-toolbar",b)}a(this).is('[data-app-edit="full"]');b=[["font",["bold","italic"]],["mbrLink",["mbrLink"]],["mbrFonts",["mbrColor"],{optional:["mbrFonts","mbrFontSize"]}],["mbrAlign",["mbrAlign"]]];b=d.applyFilter("summernoteMakePopover",b,c);a(this).summernote(d.applyFilter("summernoteOptions",
{airMode:!0,styleWithSpan:!1,focus:!0,airPopover:b,onFocus:function(a){d.APP.hideComponentParams();0===a.target.innerText.length&&0!==a.target.innerHTML.length&&(a.target.innerHTML=a.target.getAttribute("data-app-placeholder")+a.target.innerHTML);d.fire("summernoteFocus",this,a)},onBlur:function(a){d.fire("summernoteBlur",this,a)},onPaste:function(b){var c=((b.originalEvent||b).clipboardData||window.clipboardData).getData("text/plain"),e=!0;a(this).is("p, span, a, .btn, button, strong, b, em, i, small, code, label")&&
(c=c.replace(/\n/g,"<br>"),e=!1);b.preventDefault();c=d.applyFilter("summernotePaste",c);document.execCommand(e?"insertText":"insertHTML",!1,c)},onKeydown:function(a){32==a.keyCode&&a.stopPropagation();d.fire("summernoteKeydown",this,a)}},c));d.fire("summernoteInited",this)}})},100)},destroySummernote:function(a){a=a||this.$template;var b=a.is('[data-app-edit="content"], [data-app-edit="full"], [data-app-btn]')?a:a.find('[data-app-edit="content"], [data-app-edit="full"], [data-app-btn]');b=this.applyFilter("summernoteEditableItems",
b,a,!0);b.filter("[contenteditable]").destroy();h=void 0},changeSummernote:function(a){if(a.is("[data-app-btn]")&&!a.attr("data-app-edit")&&(a=a.parents("[data-app-edit]:eq(0)"),!a.length))return;var b=this,c=a.parents(".app-component").attr("data-app-component-id");setTimeout(function(){b.updateGlobalComponents(c,function(a,b){for(var c in b)if("_customHTML"===c||"object"!==typeof b[c]&&"function"!==typeof b[c]&&!/^_/g.test(c))b[c]=a[c]})},0)}},events:{load:function(){var b=this;f.$template.on("mousedown",
function(d){var c=a(d.target);c.is('[data-app-edit="content"], [data-app-edit="full"], [data-app-btn]')||(c=c.parents('[data-app-edit="content"], [data-app-edit="full"], [data-app-btn]'));h&&h!=c[0]&&b.destroySummernote();if(c[0]){if(a(d.target).is(".mbr-iconfont")){var e=a(d.target);f.summernoteIconRequest(d.target,c[0],function(a){arguments.length&&(a&&(c.is("[data-app-btn]")?c.prepend(a):e.after(a)),e.remove(),c.blur())});return!1}b.initSummernote(c)}});f.APP.on("showedPopup",function(){this.$body.find(".note-popover > *").attr("style",
"display: none;")});g(a.summernote.eventHandler.modules.popover,"update",function(d,c,e){setTimeout(function(){var e=a(c.range.sc).closest('[data-app-edit="content"], [data-app-edit="full"], [data-app-btn]');b.fire("summernotePopoverUpdate",d.children(":visible").get(0),e.get(0),c)},0)})},rendered:function(){},changedComponentParams:function(b){b=a(f.getComponentBlock(b));this.destroySummernote(b)},removeComponent:function(a,d){this.destroySummernote(d)},clearBlocks:function(){this.destroySummernote()},
rivetsBlur:function(b){this.changeSummernote(a(b))},showedPopover:function(){this.destroySummernote()},summernotePopoverUpdate:function(b,d){if(l){l=!1;setTimeout(function(){l=!0},0);for(var c=[],e=a(b).find(".popover-content");e.width()>window.innerWidth;)b=e.find("> .btn-group:visible:last > *:visible").parent().hide(),c.push(b);var f=e.find("> .btn-group:visible > *:visible").closest(".btn-group");0<c.length&&(e.append('<div class="btn-group note-show-more"><button data-toggle="tooltip" type="button" class="btn btn-default btn-sm" title="" tabindex="-1" data-original-title="Insert icon"><i class="mbr-icon-more-horizontal"></i></button></div>'),
e.find(".note-show-more").click(function(a){e.find(".note-show-more").is(":first-child")?e.hide("slide",{direction:"right"},700,function(){f.show();c.forEach(function(a){a.hide()});e.find(".note-show-more").appendTo(e);e.show("slide",{direction:"left"},700,function(){})}):e.hide("slide",{direction:"left"},700,function(){f.hide();c.forEach(function(a){a.show()});e.find(".note-show-more").prependTo(e);e.show("slide",{direction:"right"},700,function(){})})}))}}}})})(jQuery,mbrAppCore);
