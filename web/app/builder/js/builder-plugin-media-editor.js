var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,e,c){b instanceof String&&(b=String(b));for(var a=b.length,d=0;d<a;d++){var n=b[d];if(e.call(c,n,d,b))return{i:d,v:n}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,e,c){b!=Array.prototype&&b!=Object.prototype&&(b[e]=c.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,e,c,a){if(e){c=$jscomp.global;b=b.split(".");for(a=0;a<b.length-1;a++){var d=b[a];d in c||(c[d]={});c=c[d]}b=b[b.length-1];a=c[b];e=e(a);e!=a&&null!=e&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");
(function(b,e){var c=b('<div class="note-button-popover popover in bottom">\n<div class="arrow"></div>\n<div class="popover-content">\n<div class="btn-group">\n<button type="button" class="btn btn-default btn-sm" tabindex="-1" data-event="changeImage" data-media="image"><i class="mbr-icon-image"></i></button>\n<button type="button" class="btn btn-default btn-sm" tabindex="-1" data-event="changeVideo" data-media="video"><i class="mbr-icon-youtube"></i></button>\n</div>\n</div>\n</div>').hide().appendTo(b('<div class="note-popover note-air-layout">').appendTo("body"));e.regExtension({name:"plugin-media-editor",
global:{showMediaPopover:function(a){c.mediaItem=a;var d=a.parents("[data-app-component-id]:eq(0)").attr("data-app-component-id"),e=a.attr("mbr-media")||a.attr("mbr-pure-media"),g=this.getComponent(d),f=[];c.find("[data-media]").each(function(){var a=g[e][b(this).attr("data-media")];b(this)[a?"show":"hide"]();a&&f.push(b(this))});1==f.length?f[0].click():f.length&&(this.fire("showMediaPopover",c),d=a.parents("[data-app-component-id]:eq(0)").attr("data-app-component-id"),a={top:a.offset().top+a.height()/
2,left:a.offset().left-c.width()/2+a.width()/2},c.css(a).show(),this.focusComponentBlock(d),this.fire("showedMediaPopover",c),this.fire("showedPopover"))},hideMediaPopover:function(){this.fire("hideMediaPopover",c);c.mediaItem=void 0;c.hide();this.fire("hiddenMediaPopover",c)}},events:{load:function(){var a=this;a.$body.on("click","[mbr-media],[mbr-pure-media]",function(c){c.stopPropagation();c.preventDefault();a.showMediaPopover(b(this))});c.on("click","[data-event]",function(d){function e(c){l[f]=
c;a.fire("saveMedia",k,f,c);a.updateGlobalComponents(k,function(a,c){if(f)return b.extend(!0,c[f],a[f]),c})}d.preventDefault();d.stopPropagation();d=b(this).attr("data-event");var g=c.mediaItem;if(g){var f=g.attr("mbr-media")||g.attr("mbr-pure-media");if(f){var k=g.parents("[data-app-component-id]:eq(0)").attr("data-app-component-id"),l=a.getComponent(k),h=b.extend({},l[f]),m;for(m in h)"object"!==typeof h[m]&&(h[m]={});"changeImage"==d?a.APP.showMediaImageDialog(h,e,"","","",k):"changeVideo"==d&&
a.APP.showMediaVideoDialog(h,e);a.fire("changeMediaItem",d,h,e,g.get(0));a.fire("clickOnMediaItem",d,l,c);a.hideMediaPopover()}}});b(window).on("resize",function(){a.hideMediaPopover()});a.on("summernoteFocus",function(){a.hideMediaPopover()});a.APP.on("componentClicked",function(b){a.hideMediaPopover()})}}})})(jQuery,mbrAppCore);
