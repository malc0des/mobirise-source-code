var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(d){var n=0;return function(){return n<d.length?{done:!1,value:d[n++]}:{done:!0}}};$jscomp.arrayIterator=function(d){return{next:$jscomp.arrayIteratorImpl(d)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,n,p){d!=Array.prototype&&d!=Object.prototype&&(d[n]=p.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(d,n){this.$jscomp$symbol$id_=d;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:n})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function d(p){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(p||"")+"_"+n++,p)}var n=0;return d}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.iterator;d||(d=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[d]&&$jscomp.defineProperty(Array.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.asyncIterator;d||(d=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(d){$jscomp.initSymbolIterator();d={next:d};d[$jscomp.global.Symbol.iterator]=function(){return this};return d};
$jscomp.iteratorFromArray=function(d,n){$jscomp.initSymbolIterator();d instanceof String&&(d+="");var p=0,u={next:function(){if(p<d.length){var w=p++;return{value:n(w,d[w]),done:!1}}u.next=function(){return{done:!0,value:void 0}};return u.next()}};u[Symbol.iterator]=function(){return u};return u};
$jscomp.polyfill=function(d,n,p,u){if(n){p=$jscomp.global;d=d.split(".");for(u=0;u<d.length-1;u++){var w=d[u];w in p||(p[w]={});p=p[w]}d=d[d.length-1];u=p[d];n=n(u);n!=u&&null!=n&&$jscomp.defineProperty(p,d,{configurable:!0,writable:!0,value:n})}};$jscomp.polyfill("Array.prototype.keys",function(d){return d?d:function(){return $jscomp.iteratorFromArray(this,function(d){return d})}},"es6","es3");
(function(){var d=function(a,b){return function(){return a.apply(b,arguments)}},n=[].slice,p={}.hasOwnProperty,u=function(a,b){function c(){this.constructor=a}for(var f in b)p.call(b,f)&&(a[f]=b[f]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a},w=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};var g={options:["prefix","templateDelimiters","rootInterface","preloadData","handler"],extensions:["binders","formatters",
"components","adapters"],"public":{binders:{},components:{},formatters:{},adapters:{},prefix:"rv",templateDelimiters:["{","}"],rootInterface:".",preloadData:!0,handler:function(a,b,c){return this.call(a,b,c.view.models)},configure:function(a){var b,c;null==a&&(a={});for(c in a){var f=a[c];if("binders"===c||"components"===c||"formatters"===c||"adapters"===c)for(b in f){var e=f[b];g[c][b]=e}else g["public"][c]=f}},bind:function(a,b,c){null==b&&(b={});null==c&&(c={});a=new g.View(a,b,c);a.bind();return a},
init:function(a,b,c){null==c&&(c={});null==b&&(b=document.createElement("div"));a=g["public"].components[a];b.innerHTML=a.template.call(this,b);a=a.initialize.call(this,b,c);b=new g.View(b,a);b.bind();return b}}};if(window.jQuery||window.$){var y="on"in jQuery.prototype?["on","off"]:["bind","unbind"];var z=y[0];var A=y[1];g.Util={bindEvent:function(a,b,c){return jQuery(a)[z](b,c)},unbindEvent:function(a,b,c){return jQuery(a)[A](b,c)},getInputValue:function(a){a=jQuery(a);return"checkbox"===a.attr("type")?
a.is(":checked"):a.val()}}}else g.Util={bindEvent:function(){return"addEventListener"in window?function(a,b,c){return a.addEventListener(b,c,!1)}:function(a,b,c){return a.attachEvent("on"+b,c)}}(),unbindEvent:function(){return"removeEventListener"in window?function(a,b,c){return a.removeEventListener(b,c,!1)}:function(a,b,c){return a.detachEvent("on"+b,c)}}(),getInputValue:function(a){var b;if("checkbox"===a.type)return a.checked;if("select-multiple"===a.type){var c=[];var f=0;for(b=a.length;f<b;f++){var e=
a[f];e.selected&&c.push(e.value)}return c}return a.value}};g.TypeParser=function(){function a(){}a.types={primitive:0,keypath:1};a.parse=function(b){return/^'.*'$|^".*"$/.test(b)?{type:this.types.primitive,value:b.slice(1,-1)}:"true"===b?{type:this.types.primitive,value:!0}:"false"===b?{type:this.types.primitive,value:!1}:"null"===b?{type:this.types.primitive,value:null}:"undefined"===b?{type:this.types.primitive,value:void 0}:!1===isNaN(Number(b))?{type:this.types.primitive,value:Number(b)}:{type:this.types.keypath,
value:b}};return a}();g.TextTemplateParser=function(){function a(){}a.types={text:0,binding:1};a.parse=function(b,a){var c;var e=[];var h=b.length;for(c=0;c<h;){var k=b.indexOf(a[0],c);if(0>k){e.push({type:this.types.text,value:b.slice(c)});break}else{0<k&&c<k&&e.push({type:this.types.text,value:b.slice(c,k)});c=k+a[0].length;k=b.indexOf(a[1],c);if(0>k){a=b.slice(c-a[1].length);b=e[e.length-1];(null!=b?b.type:void 0)===this.types.text?b.value+=a:e.push({type:this.types.text,value:a});break}c=b.slice(c,
k).trim();e.push({type:this.types.binding,value:c});c=k+a[1].length}}return e};return a}();g.View=function(){function a(b,a,f){var c,h,k;this.els=b;this.models=a;null==f&&(f={});this.update=d(this.update,this);this.publish=d(this.publish,this);this.sync=d(this.sync,this);this.unbind=d(this.unbind,this);this.bind=d(this.bind,this);this.select=d(this.select,this);this.traverse=d(this.traverse,this);this.build=d(this.build,this);this.buildBinding=d(this.buildBinding,this);this.bindingRegExp=d(this.bindingRegExp,
this);this.options=d(this.options,this);this.els.jquery||this.els instanceof Array||(this.els=[this.els]);var l=g.extensions;var m=0;for(h=l.length;m<h;m++){b=l[m];this[b]={};if(f[b]){var q=f[b];for(r in q)a=q[r],this[b][r]=a}q=g["public"][b];for(r in q)a=q[r],null==(c=this[b])[r]&&(c[r]=a)}a=g.options;var r=0;for(c=a.length;r<c;r++)b=a[r],this[b]=null!=(k=f[b])?k:g["public"][b];this.build()}a.prototype.options=function(){var b;var a={};var f=g.extensions.concat(g.options);var e=0;for(b=f.length;e<
b;e++){var h=f[e];a[h]=this[h]}return a};a.prototype.bindingRegExp=function(){return new RegExp("^"+this.prefix+"-")};a.prototype.buildBinding=function(b,a,f,e){var c,k;var l={};var d=function(){var b;var a=e.split("|");var c=[];var f=0;for(b=a.length;f<b;f++)k=a[f],c.push(k.trim());return c}();var q=function(){var b;var a=d.shift().split("<");var f=[];var e=0;for(b=a.length;e<b;e++)c=a[e],f.push(c.trim());return f}();var r=q.shift();l.formatters=d;if(q=q.shift())l.dependencies=q.split(/\s+/);return this.bindings.push(new g[b](this,
a,f,r,l))};a.prototype.build=function(){var b;this.bindings=[];var a=function(b){return function(c){var f,e,h,k;if(3===c.nodeType){var d=g.TextTemplateParser;if((e=b.templateDelimiters)&&(h=d.parse(c.data,e)).length&&(1!==h.length||h[0].type!==d.types.text)){var l=0;for(k=h.length;l<k;l++)d=h[l],e=document.createTextNode(d.value),c.parentNode.insertBefore(e,c),1===d.type&&b.buildBinding("TextBinding",e,null,d.value);c.parentNode.removeChild(c)}}else 1===c.nodeType&&(f=b.traverse(c));if(!f){d=c.childNodes;
c=[];h=0;for(e=d.length;h<e;h++)f=d[h],c.push(f);d=[];h=0;for(e=c.length;h<e;h++)f=c[h],d.push(a(f));return d}}}(this);var f=this.els;var e=0;for(b=f.length;e<b;e++){var h=f[e];a(h)}this.bindings.sort(function(b,a){var c,f;return((null!=(c=a.binder)?c.priority:void 0)||0)-((null!=(f=b.binder)?f.priority:void 0)||0)})};a.prototype.traverse=function(b){var a,f;var e=this.bindingRegExp();var h="SCRIPT"===b.nodeName||"STYLE"===b.nodeName;var k=b.attributes;var d=0;for(f=k.length;d<f;d++){var m=k[d];if(e.test(m.name)){var q=
m.name.replace(e,"");if(!(a=this.binders[q])){var r=this.binders;for(v in r){var n=r[v];if("*"!==v&&-1!==v.indexOf("*")){var x=new RegExp("^"+v.replace(/\*/g,".+")+"$");x.test(q)&&(a=n)}}}a||(a=this.binders["*"]);if(a.block){h=!0;var t=[m]}}}var v=t||b.attributes;t=0;for(a=v.length;t<a;t++)m=v[t],e.test(m.name)&&(q=m.name.replace(e,""),this.buildBinding("Binding",b,q,m.value));h||(q=b.nodeName.toLowerCase(),this.components[q]&&!b._bound&&(this.bindings.push(new g.ComponentBinding(this,b,q)),h=!0));
return h};a.prototype.select=function(b){var a;var f=this.bindings;var e=[];var h=0;for(a=f.length;h<a;h++){var k=f[h];b(k)&&e.push(k)}return e};a.prototype.bind=function(){var b;var a=this.bindings;var f=[];var e=0;for(b=a.length;e<b;e++){var h=a[e];f.push(h.bind())}return f};a.prototype.unbind=function(){var b;var a=this.bindings;var f=[];var e=0;for(b=a.length;e<b;e++){var h=a[e];f.push(h.unbind())}return f};a.prototype.sync=function(){var b;var a=this.bindings;var f=[];var e=0;for(b=a.length;e<
b;e++){var h=a[e];f.push("function"===typeof h.sync?h.sync():void 0)}return f};a.prototype.publish=function(){var b;var a=this.select(function(b){var a;return null!=(a=b.binder)?a.publishes:void 0});var f=[];var e=0;for(b=a.length;e<b;e++){var h=a[e];f.push(h.publish())}return f};a.prototype.update=function(b){var a;null==b&&(b={});for(d in b){var f=b[d];this.models[d]=f}var e=this.bindings;var h=[];f=0;for(a=e.length;f<a;f++){var d=e[f];h.push("function"===typeof d.update?d.update(b):void 0)}return h};
return a}();g.Binding=function(){function a(b,a,f,e,h){this.view=b;this.el=a;this.type=f;this.keypath=e;this.options=null!=h?h:{};this.getValue=d(this.getValue,this);this.update=d(this.update,this);this.unbind=d(this.unbind,this);this.bind=d(this.bind,this);this.publish=d(this.publish,this);this.sync=d(this.sync,this);this.set=d(this.set,this);this.eventHandler=d(this.eventHandler,this);this.formattedValue=d(this.formattedValue,this);this.parseTarget=d(this.parseTarget,this);this.observe=d(this.observe,
this);this.setBinder=d(this.setBinder,this);this.formatters=this.options.formatters||[];this.dependencies=[];this.formatterObservers={};this.model=void 0;this.setBinder()}a.prototype.setBinder=function(){var b;if(!(this.binder=this.view.binders[this.type])){var a=this.view.binders;for(b in a){var f=a[b];if("*"!==b&&-1!==b.indexOf("*")){var e=new RegExp("^"+b.replace(/\*/g,".+")+"$");e.test(this.type)&&(this.binder=f,this.args=(new RegExp("^"+b.replace(/\*/g,"(.+)")+"$")).exec(this.type),this.args.shift())}}}this.binder||
(this.binder=this.view.binders["*"]);if(this.binder instanceof Function)return this.binder={routine:this.binder}};a.prototype.observe=function(a,c,f){return g.sightglass(a,c,f,{root:this.view.rootInterface,adapters:this.view.adapters})};a.prototype.parseTarget=function(){var a=g.TypeParser.parse(this.keypath);if(0===a.type)return this.value=a.value;this.observer=this.observe(this.view.models,this.keypath,this.sync);return this.model=this.observer.target};a.prototype.formattedValue=function(a){var b,
f,e,h,d,l;var m=this.formatters;var q=h=0;for(d=m.length;h<d;q=++h){var r=m[q];var p=r.match(/[^\s']+|'([^']|'[^\s])*'|"([^"]|"[^\s])*"/g);var x=p.shift();r=this.view.formatters[x];var t=[];var v=0;for(f=p.length;v<f;v++)x=p[v],t.push(g.TypeParser.parse(x));p=t;f=[];t=v=0;for(l=p.length;v<l;t=++v)x=p[t],f.push(0===x.type?x.value:((e=this.formatterObservers)[q]||(e[q]={}),(b=this.formatterObservers[q][t])?void 0:(b=this.observe(this.view.models,x.value,this.sync),this.formatterObservers[q][t]=b),b.value()));
(null!=r?r.read:void 0)instanceof Function?a=r.read.apply(r,[a].concat(n.call(f))):r instanceof Function&&(a=r.apply(null,[a].concat(n.call(f))))}return a};a.prototype.eventHandler=function(a){var b;var f=(b=this).view.handler;return function(c){return f.call(a,this,c,b)}};a.prototype.set=function(a){var b;a=a instanceof Function&&!this.binder["function"]?this.formattedValue(a.call(this.model)):this.formattedValue(a);return null!=(b=this.binder.routine)?b.call(this,this.el,a):void 0};a.prototype.sync=
function(){var a,c;return this.set(function(){var b,e;if(this.observer){if(this.model!==this.observer.target){var h=this.dependencies;var d=0;for(b=h.length;d<b;d++)c=h[d],c.unobserve();this.dependencies=[];if(null!=(this.model=this.observer.target)&&null!=(e=this.options.dependencies)&&e.length)for(h=this.options.dependencies,d=0,b=h.length;d<b;d++)a=h[d],c=this.observe(this.model,a,this.sync),this.dependencies.push(c)}return this.observer.value()}return this.value}.call(this))};a.prototype.publish=
function(){var a,c,f;if(this.observer){var e=this.getValue(this.el);var h=this.formatters.slice(0).reverse();var d=0;for(a=h.length;d<a;d++){var g=h[d];g=g.split(/\s+/);var m=g.shift();null!=(c=this.view.formatters[m])&&c.publish&&(e=(f=this.view.formatters[m]).publish.apply(f,[e].concat(n.call(g))))}return this.observer.setValue(e)}};a.prototype.bind=function(){var a,c;this.parseTarget();null!=(a=this.binder.bind)&&a.call(this,this.el);if(null!=this.model&&null!=(c=this.options.dependencies)&&c.length){var f=
this.options.dependencies;a=0;for(c=f.length;a<c;a++){var e=f[a];e=this.observe(this.model,e,this.sync);this.dependencies.push(e)}}if(this.view.preloadData)return this.sync()};a.prototype.unbind=function(){var a,c,f,e,h;null!=(e=this.binder.unbind)&&e.call(this,this.el);null!=(c=this.observer)&&c.unobserve();var d=this.dependencies;c=0;for(h=d.length;c<h;c++)e=d[c],e.unobserve();this.dependencies=[];h=this.formatterObservers;for(f in h)for(a in c=h[f],c)e=c[a],e.unobserve();return this.formatterObservers=
{}};a.prototype.update=function(a){var b,f;null==a&&(a={});this.model=null!=(b=this.observer)?b.target:void 0;return null!=(f=this.binder.update)?f.call(this,a):void 0};a.prototype.getValue=function(a){return this.binder&&null!=this.binder.getValue?this.binder.getValue.call(this,a):g.Util.getInputValue(a)};return a}();g.ComponentBinding=function(a){function b(a,b,e){var c,f;this.view=a;this.el=b;this.type=e;this.unbind=d(this.unbind,this);this.bind=d(this.bind,this);this.locals=d(this.locals,this);
this.component=this.view.components[this.type];this["static"]={};this.observers={};this.upstreamObservers={};b=a.bindingRegExp();var g=this.el.attributes||[];var m=0;for(c=g.length;m<c;m++)a=g[m],b.test(a.name)||(e=this.camelCase(a.name),0<=w.call(null!=(f=this.component["static"])?f:[],e)?this["static"][e]=a.value:this.observers[e]=a.value)}u(b,a);b.prototype.sync=function(){};b.prototype.update=function(){};b.prototype.publish=function(){};b.prototype.locals=function(){var a;var b={};var e=this["static"];
for(a in e){var d=e[a];b[a]=d}e=this.observers;for(a in e)d=e[a],b[a]=d.value();return b};b.prototype.camelCase=function(a){return a.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})};b.prototype.bind=function(){var a,b,e,d;if(!this.bound){var k=this.observers;for(a in k){var l=k[a];this.observers[a]=this.observe(this.view.models,l,function(a){return function(b){return function(){return a.componentView.models[b]=a.observers[b].value()}}}(this).call(this,a))}this.bound=!0}if(null!=this.componentView)return this.componentView.bind();
$(this.el).html("").append(this.component.template.call(this,this.locals()));var m=this.component.initialize.call(this,this.el,this.locals());this.el._bound=!0;k={};var q=g.extensions;var r=0;for(d=q.length;r<d;r++){l=q[r];k[l]={};if(this.component[l]){var p=this.component[l];for(t in p){var n=p[t];k[l][t]=n}}p=this.view[l];for(t in p)n=p[t],null==(e=k[l])[t]&&(e[t]=n)}n=g.options;var t=0;for(e=n.length;t<e;t++)l=n[t],k[l]=null!=(b=this.component[l])?b:this.view[l];this.componentView=new g.View(this.el,
m,k);this.componentView.bind();l=this.observers;k=[];for(a in l)b=l[a],k.push(this.upstreamObservers[a]=this.observe(this.componentView.models,a,function(a){return function(b,c){return function(){return c.setValue(a.componentView.models[b])}}}(this).call(this,a,b)));return k};b.prototype.unbind=function(){var a,b;var e=this.upstreamObservers;for(a in e){var d=e[a];d.unobserve()}e=this.observers;for(a in e)d=e[a],d.unobserve();return null!=(b=this.componentView)?b.unbind.call(this):void 0};return b}(g.Binding);
g.TextBinding=function(a){function b(a,b,e,h,g){this.view=a;this.el=b;this.type=e;this.keypath=h;this.options=null!=g?g:{};this.sync=d(this.sync,this);this.formatters=this.options.formatters||[];this.dependencies=[];this.formatterObservers={}}u(b,a);b.prototype.binder={routine:function(a,b){return a.data=null!=b?b:""}};b.prototype.sync=function(){return b.__super__.sync.apply(this,arguments)};return b}(g.Binding);g["public"].binders.text=function(a,b){return null!=a.textContent?a.textContent=null!=
b?b:"":a.innerText=null!=b?b:""};g["public"].binders.html=function(a,b){return a.innerHTML=null!=b?b:""};g["public"].binders.show=function(a,b){return a.style.display=b?"":"none"};g["public"].binders.hide=function(a,b){return a.style.display=b?"none":""};g["public"].binders.enabled=function(a,b){return a.disabled=!b};g["public"].binders.disabled=function(a,b){return a.disabled=!!b};g["public"].binders.checked={publishes:!0,priority:2E3,bind:function(a){return g.Util.bindEvent(a,"change",this.publish)},
unbind:function(a){return g.Util.unbindEvent(a,"change",this.publish)},routine:function(a,b){var c;return"radio"===a.type?a.checked=(null!=(c=a.value)?c.toString():void 0)===(null!=b?b.toString():void 0):a.checked=!!b}};g["public"].binders.unchecked={publishes:!0,priority:2E3,bind:function(a){return g.Util.bindEvent(a,"change",this.publish)},unbind:function(a){return g.Util.unbindEvent(a,"change",this.publish)},routine:function(a,b){var c;return"radio"===a.type?a.checked=(null!=(c=a.value)?c.toString():
void 0)!==(null!=b?b.toString():void 0):a.checked=!b}};g["public"].binders.value={publishes:!0,priority:3E3,bind:function(a){if("INPUT"!==a.tagName||"radio"!==a.type)return this.event="SELECT"===a.tagName?"change":"input",g.Util.bindEvent(a,this.event,this.publish)},unbind:function(a){if("INPUT"!==a.tagName||"radio"!==a.type)return g.Util.unbindEvent(a,this.event,this.publish)},routine:function(a,b){var c,f,e;if("INPUT"===a.tagName&&"radio"===a.type)return a.setAttribute("value",b);if(null!=window.jQuery){if(a=
jQuery(a),(null!=b?b.toString():void 0)!==(null!=(c=a.val())?c.toString():void 0))return a.val(null!=b?b:"")}else if("select-multiple"===a.type){if(null!=b){var d=[];var g=0;for(f=a.length;g<f;g++)c=a[g],d.push(c.selected=(e=c.value,0<=w.call(b,e)));return d}}else if((null!=b?b.toString():void 0)!==(null!=(g=a.value)?g.toString():void 0))return a.value=null!=b?b:""}};g["public"].binders["if"]={block:!0,priority:4E3,bind:function(a){if(null==this.marker){var b=[this.view.prefix,this.type].join("-").replace("--",
"-");var c=a.getAttribute(b);this.marker=document.createComment(" rivets: "+this.type+" "+c+" ");this.bound=!1;a.removeAttribute(b);return a.parentNode?(a.parentNode.insertBefore(this.marker,a),a.parentNode.removeChild(a)):a}},unbind:function(){var a;return null!=(a=this.nested)?a.unbind():void 0},routine:function(a,b){var c;if(!!b===!this.bound){if(b){var f={};var e=this.view.models;for(c in e)b=e[c],f[c]=b;(this.nested||(this.nested=new g.View(a,f,this.view.options()))).bind();this.marker.parentNode.insertBefore(a,
this.marker.nextSibling);return this.bound=!0}a.parentNode&&a.parentNode.removeChild(a);this.nested.unbind();return this.bound=!1}},update:function(a){var b;return null!=(b=this.nested)?b.update(a):void 0}};g["public"].binders.unless={block:!0,priority:4E3,bind:function(a){return g["public"].binders["if"].bind.call(this,a)},unbind:function(){return g["public"].binders["if"].unbind.call(this)},routine:function(a,b){return g["public"].binders["if"].routine.call(this,a,!b)},update:function(a){return g["public"].binders["if"].update.call(this,
a)}};g["public"].binders["on-*"]={"function":!0,priority:1E3,unbind:function(a){if(this.handler)return g.Util.unbindEvent(a,this.args[0],this.handler)},routine:function(a,b){this.handler&&g.Util.unbindEvent(a,this.args[0],this.handler);return g.Util.bindEvent(a,this.args[0],this.handler=this.eventHandler(b))}};g["public"].binders["each-*"]={block:!0,priority:4E3,bind:function(a){var b;if(null==this.marker){var c=[this.view.prefix,this.type].join("-").replace("--","-");this.marker=document.createComment(" rivets: "+
this.type+" ");this.iterated=[];a.removeAttribute(c);a.parentNode.insertBefore(this.marker,a);a.parentNode.removeChild(a)}else{var f=this.iterated;c=0;for(b=f.length;c<b;c++)a=f[c],a.bind()}},unbind:function(a){var b;if(null!=this.iterated){var c=this.iterated;var f=[];var e=0;for(b=c.length;e<b;e++)a=c[e],f.push(a.unbind());return f}},routine:function(a,b){var c;var f=this.args[0];b=b||[];if(this.iterated.length>b.length){var e=Array(this.iterated.length-b.length);var d=0;for(e=e.length;d<e;d++){var k=
this.iterated.pop();k.unbind();this.marker.parentNode.removeChild(k.els[0])}}var l=d=0;for(e=b.length;d<e;l=++d){var m=b[l];k={index:l};k[f]=m;if(null==this.iterated[l]){l=this.view.models;for(c in l)m=l[c],null==k[c]&&(k[c]=m);m=this.iterated.length?this.iterated[this.iterated.length-1].els[0]:this.marker;var q=this.view.options();q.preloadData=!0;l=a.cloneNode(!0);k=new g.View(l,k,q);k.bind();this.iterated.push(k);this.marker.parentNode.insertBefore(l,m.nextSibling)}else this.iterated[l].models[f]!==
m&&this.iterated[l].update(k)}if("OPTION"===a.nodeName){f=this.view.bindings;d=[];b=0;for(c=f.length;b<c;b++)a=f[b],a.el===this.marker.parentNode&&"value"===a.type?d.push(a.sync()):d.push(void 0);return d}},update:function(a){var b={};for(h in a){var c=a[h];h!==this.args[0]&&(b[h]=c)}var d=this.iterated;var e=[];var h=0;for(c=d.length;h<c;h++)a=d[h],e.push(a.update(b));return e}};g["public"].binders["class-*"]=function(a,b){var c=" "+a.className+" ";if(!b===(-1!==c.indexOf(" "+this.args[0]+" ")))return a.className=
b?""+a.className+" "+this.args[0]:c.replace(" "+this.args[0]+" "," ").trim()};g["public"].binders["*"]=function(a,b){return null!=b?a.setAttribute(this.type,b):a.removeAttribute(this.type)};g["public"].adapters["."]={id:"_rv",counter:0,weakmap:{},weakReference:function(a){var b,c;if(!a.hasOwnProperty(this.id)){var d=this.counter++;Object.defineProperty(a,this.id,{value:d,configurable:!0})}return(b=this.weakmap)[c=a[this.id]]||(b[c]={callbacks:{}})},cleanupWeakReference:function(a,b){if(!(Object.keys(a.callbacks).length||
a.pointers&&Object.keys(a.pointers).length))return delete this.weakmap[b]},stubFunction:function(a,b){var c=a[b];var d=this.weakReference(a);var e=this.weakmap;return a[b]=function(){var b,f,g,m;var q=c.apply(a,arguments);var r=d.pointers;for(b in r){var n=r[b];var p=null!=(g=null!=(m=e[b])?m.callbacks[n]:void 0)?g:[];var t=0;for(f=p.length;t<f;t++)n=p[t],n()}return q}},observeMutations:function(a,b,c){var d,e;if(Array.isArray(a)){var h=this.weakReference(a);if(null==h.pointers){h.pointers={};var g=
"push pop shift unshift sort reverse splice".split(" ");var l=0;for(e=g.length;l<e;l++){var m=g[l];this.stubFunction(a,m)}}null==(d=h.pointers)[b]&&(d[b]=[]);if(0>w.call(h.pointers[b],c))return h.pointers[b].push(c)}},unobserveMutations:function(a,b,c){var d,e,g;if(Array.isArray(a)&&null!=a[this.id]&&(e=this.weakmap[a[this.id]])&&(g=e.pointers[b]))return 0<=(d=g.indexOf(c))&&g.splice(d,1),g.length||delete e.pointers[b],this.cleanupWeakReference(e,a[this.id])},observe:function(a,b,c){var d=this.weakReference(a).callbacks;
if(null==d[b]){d[b]=[];var e=Object.getOwnPropertyDescriptor(a,b);if(!(null!=e&&e.get||null!=e&&e.set)){var g=a[b];Object.defineProperty(a,b,{configurable:!0,enumerable:!0,get:function(){return g},set:function(e){return function(f){var h,k;if(f!==g&&(e.unobserveMutations(g,a[e.id],b),g=f,h=e.weakmap[a[e.id]])){d=h.callbacks;if(d[b]){var l=d[b].slice();h=0;for(k=l.length;h<k;h++)c=l[h],0<=w.call(d[b],c)&&c()}return e.observeMutations(f,a[e.id],b)}}}(this)})}}0>w.call(d[b],c)&&d[b].push(c);return this.observeMutations(a[b],
a[this.id],b)},unobserve:function(a,b,c){var d,e;if(e=this.weakmap[a[this.id]])if(d=e.callbacks[b])return 0<=(c=d.indexOf(c))&&(d.splice(c,1),d.length||delete e.callbacks[b]),this.unobserveMutations(a[b],a[this.id],b),this.cleanupWeakReference(e,a[this.id])},get:function(a,b){return a[b]},set:function(a,b,c){return a[b]=c}};g.factory=function(a){g.sightglass=a;g["public"]._=g;return g["public"]};"object"===typeof("undefined"!==typeof module&&null!==module?module.exports:void 0)?module.exports=g.factory(require("sightglass")):
"function"===typeof define&&define.amd?define(["sightglass"],function(a){return this.rivets=g.factory(a)}):this.rivets=g.factory(sightglass)}).call(this);
