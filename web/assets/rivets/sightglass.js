var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(c||"")+"_"+b++,c)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
(function(){function a(d,a,c,g){return new b(d,a,c,g)}function b(d,a,b,g){this.options=g||{};this.options.adapters=this.options.adapters||{};this.obj=d;this.keypath=a;this.callback=b;this.objectPath=[];this.parse();this.updateCallback=this.update.bind(this);c(this.target=this.realize())&&this.set(!0,this.key,this.target,this.callback)}function c(a){return"object"===typeof a&&null!==a}a.adapters={};b.tokenize=function(a,b,c){var d=[];c={i:c,path:""};var e;for(e=0;e<a.length;e++){var f=a.charAt(e);
~b.indexOf(f)?(d.push(c),c={i:f,path:""}):c.path+=f}d.push(c);return d};b.prototype.parse=function(){var d=this.interfaces();if(!d.length)throw Error("[sightglass] Must define at least one adapter interface.");if(~d.indexOf(this.keypath[0])){var c=this.keypath[0];var f=this.keypath.substr(1)}else{if("undefined"===typeof(c=this.options.root||a.root))throw Error("[sightglass] Must define a default root adapter.");f=this.keypath}this.tokens=b.tokenize(f,d,c);this.key=this.tokens.pop()};b.prototype.realize=
function(){var a=this.obj,b=!1,f;this.tokens.forEach(function(d,e){c(a)?("undefined"!==typeof this.objectPath[e]?a!==(f=this.objectPath[e])&&(this.set(!1,d,f,this.updateCallback),this.set(!0,d,a,this.updateCallback),this.objectPath[e]=a):(this.set(!0,d,a,this.updateCallback),this.objectPath[e]=a),a=this.get(d,a)):(!1===b&&(b=e),(f=this.objectPath[e])&&this.set(!1,d,f,this.updateCallback))},this);!1!==b&&this.objectPath.splice(b);return a};b.prototype.update=function(){var a;if((a=this.realize())!==
this.target){c(this.target)&&this.set(!1,this.key,this.target,this.callback);c(a)&&this.set(!0,this.key,a,this.callback);var b=this.value();this.target=a;this.value()!==b&&this.callback()}};b.prototype.value=function(){if(c(this.target))return this.get(this.key,this.target)};b.prototype.setValue=function(a){c(this.target)&&this.adapter(this.key).set(this.target,this.key.path,a)};b.prototype.get=function(a,b){return this.adapter(a).get(b,a.path)};b.prototype.set=function(a,b,c,g){a=a?"observe":"unobserve";
this.adapter(b)[a](c,b.path,g)};b.prototype.interfaces=function(){var b=Object.keys(this.options.adapters);Object.keys(a.adapters).forEach(function(a){~b.indexOf(a)||b.push(a)});return b};b.prototype.adapter=function(b){return this.options.adapters[b.i]||a.adapters[b.i]};b.prototype.unobserve=function(){var a;this.tokens.forEach(function(b,c){(a=this.objectPath[c])&&this.set(!1,b,a,this.updateCallback)},this);c(this.target)&&this.set(!1,this.key,this.target,this.callback)};"undefined"!==typeof module&&
module.exports?module.exports=a:"function"===typeof define&&define.amd?define([],function(){return this.sightglass=a}):this.sightglass=a}).call(this);
