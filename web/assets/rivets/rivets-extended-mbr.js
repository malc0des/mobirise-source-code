var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(c,h,a){c instanceof String&&(c=String(c));for(var b=c.length,d=0;d<b;d++){var g=c[d];if(h.call(a,g,d,c))return{i:d,v:g}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,h,a){c!=Array.prototype&&c!=Object.prototype&&(c[h]=a.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,h,a,b){if(h){a=$jscomp.global;c=c.split(".");for(b=0;b<c.length-1;b++){var d=c[b];d in a||(a[d]={});a=a[d]}c=c[c.length-1];b=a[c];h=h(b);h!=b&&null!=h&&$jscomp.defineProperty(a,c,{configurable:!0,writable:!0,value:h})}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,a){return $jscomp.findInternal(this,c,a).v}},"es6","es3");$jscomp.polyfill("Object.is",function(c){return c?c:function(c,a){return c===a?0!==c||1/c===1/a:c!==c&&a!==a}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(c){return c?c:function(c,a){var b=this;b instanceof String&&(b=String(b));var d=b.length;a=a||0;for(0>a&&(a=Math.max(a+d,0));a<d;a++){var g=b[a];if(g===c||Object.is(g,c))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(c,h,a){if(null==c)throw new TypeError("The 'this' value for String.prototype."+a+" must not be null or undefined");if(h instanceof RegExp)throw new TypeError("First argument to String.prototype."+a+" must not be a regular expression");return c+""};$jscomp.polyfill("String.prototype.includes",function(c){return c?c:function(c,a){return-1!==$jscomp.checkStringArgs(this,c,"includes").indexOf(c,a||0)}},"es6","es3");
(function(c){function h(a,b,d){function g(a,b){if("IMG"==a.prop("tagName")){a.attr("src",b);var d=a.parents(".app-video-wrapper:eq(0)");/no-video/g.test(b)?d.length&&a.unwrap():d.length||a.wrap('<div class="app-video-wrapper">')}else $img=a.find(".mbr-background-video-preview"),$img.length||($img=c('<div class="mbr-background-video-preview">').css({backgroundSize:"cover",backgroundPosition:"center"}),a.find("> *:eq(0)").before($img)),$img.css("background-image",'url("'+b+'")')}function f(a){"IMG"!=
a.prop("tagName")&&a.find(".mbr-background-video-preview").remove()}var e=c(a);if(d)f(e);else if((a=b.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(shorts\/|video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(&\S+)?/))&&/youtube/g.test(a[3])){var k=c("<img>");k.on("load",function(){if(120==(this.naturalWidth||this.width)){var a=this.src.split("/").pop();switch(a){case "maxresdefault.jpg":this.src=this.src.replace(a,"sddefault.jpg");break;case "sddefault.jpg":this.src=
this.src.replace(a,"hqdefault.jpg");break;default:g(e,"images/no-video.jpg"),k.remove()}}else g(e,this.src),k.remove()});k.attr("src","http://img.youtube.com/vi/"+a[6]+"/maxresdefault.jpg")}else a&&/vimeo/g.test(a[3])?c.ajax({type:"GET",url:"http://vimeo.com/api/v2/video/"+a[6]+".json",dataType:"json",success:function(a){g(e,a[0].thumbnail_large)},error:function(){g(e,"images/no-video.jpg")}}):g(e,"images/video-placeholder.jpg")}rivets.configure({prefix:"mbr",preloadData:!0,rootInterface:".",templateDelimiters:["{",
"}"],handler:function(a,b,c){this.call(a,b,c.view.models)}});rivets.formatters.if=function(a,b){return b?a:!1};rivets.formatters.unless=function(a,b){return b?!1:a};rivets.formatters.else=function(a,b){return a||b};rivets.formatters.pref=function(a,b,c){"undefined"===typeof c&&(c=!0);return(c?b+"":"")+a};rivets.formatters["!pref"]=function(a,b,c){"undefined"===typeof c&&(c=!0);return(c?"":b+"")+a};rivets.formatters.suff=function(a,b,c){"undefined"===typeof c&&(c=!0);return a+(c?""+b:"")};rivets.formatters["!suff"]=
function(a,b,c){"undefined"===typeof c&&(c=!0);return a+(c?"":""+b)};rivets.formatters.eq=function(a,b){return a==b};rivets.formatters.not_eq=function(a,b){return a!=b};rivets.formatters.gt=function(a,b){return a>b};rivets.formatters.gte=function(a,b){return a>=b};rivets.formatters.lt=function(a,b){return a<b};rivets.formatters.lte=function(a,b){return a<=b};rivets.formatters["/"]=function(a,b){return isNaN(Number(a))||isNaN(Number(b))?a:0==b?"infinite":Number(a)/Number(b)};rivets.formatters["*"]=
function(a,b){return isNaN(Number(a))||isNaN(Number(b))?a:Number(a)*Number(b)};rivets.binders.opacity=function(a,b){a.style.opacity=b};rivets.binders["add-class"]=function(a,b){a.addedClass&&(c(a).removeClass(a.addedClass),delete a.addedClass);b&&(c(a).addClass(b),a.addedClass=b)};rivets.binders["bg-image"]=function(a,b){b?(a.style.backgroundImage="url('"+b+"')",a.style.backgroundColor=""):a.style.backgroundImage=""};rivets.binders["bg-color"]=function(a,b){b?(a.style.backgroundColor=b,a.style.backgroundImage=
""):a.style.backgroundColor=""};rivets.binders["bg-video"]=function(a,b){a[(b?"set":"remove")+"Attribute"]("data-video-src",b);this.view.models._checkPublish()||h(a,b?b.url||b:b,!b)};rivets.binders["pure-media"]=function(a,b){for(var d in b){var g=b[d];if(g.active&&"image"==d){var f=c(a);/^img$/i.test(a.tagName)||(a=c(a.outerHTML.replace(/^<[^\s]+/,"<IMG")).get(0),f.replaceWith(a),f=c(a));var e=c(a).parents("a");g.link&&!e.length&&(e=c("<a href='#'>"+a.outerHTML+"</a>"),f.replaceWith(e),f=e.find("img"),
e.addClass(f.attr("class")),f.attr("class",""));g.class&&f.addClass(g.class);f.attr("src",g.src);f.attr("alt",g.alt);f.attr("title",g.title);e.attr("href",g.link);e.attr("target",g.linkInNewWindow?"_blank":"")}}};rivets.binders.media=function g(b,d){if(d){for(var f in d){var e=d[f];if(e.active){if("image"==f)d='<img src="'+e.src+'"',e.class&&(d+=' class="'+e.class+'"'),e.alt&&(d+=' alt="'+e.alt+'"'),e.title&&(d+=' title="'+e.title+'"'),d+=" />",e.link&&(d='<a href="'+e.link+'" '+(e.linkInNewWindow?
'target="_blank"':"")+">"+d+"</a>"),c(b).html(d);else if("video"==f){d=c('<img src="images/video-placeholder.jpg" class="mbr-figure__img" alt="">');f=e.src;var k=f.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&\?]*).*/),m=f.includes("nocookie"),n=f.includes("dnt"),p=k?11==k["embed/"==k[2]?3:2].length:0,l=f.match(/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/);k&&p?f="https://www.youtube"+(m?"-nocookie":"")+
".com/embed/"+k[2]+"?rel=0&amp;"+(e.autoplay?"mute=1":"")+"&showinfo=0&autoplay="+(e.autoplay?1:0)+"&loop="+(e.loop?"1&playlist="+k[2]:0):l&&l[3]&&(f="https://player.vimeo.com/video/"+l[3]+"?autoplay="+(e.autoplay?1:0)+"&loop="+(e.loop?1:0)+(n?"dnt=1":""));d.attr("data-video-src",f);d.attr("data-video-width","4:3"==e.aspectratio?800:1280);d.attr("data-video-height","4:3"==e.aspectratio?600:720);d.attr("data-video-aspectratio",e.aspectratio);d.attr("data-video-autoplay",e.autoplay);d.attr("data-video-loop",
e.loop);d.attr("class",e.class);c(b).html(d);b=this.view.models._checkPublish();h(d[0],f,b)}else"iconFont"==f&&c(b).html(mbrAppCore.APP.createIconFont(d.iconFont));return}}d.image&&"object"===typeof d.image&&(d.image.active=!0,g.call(this,b,d))}};rivets.binders.video=function(b,d){if(d){var g=this.view.models._checkPublish();c(b).attr("data-data-video-src",d.url);c(b).attr("data-app-width",d.width);c(b).attr("data-app-height",d.height);h(b,d.url,g)}};rivets.binders["show-if"]=rivets.binders["if"];
rivets.binders["show-unless"]=rivets.binders.unless;rivets.binders["show-if"].block=!1;rivets.binders["show-unless"].block=!1;rivets.binders["if"]=function(b,d){c(b)[d?"removeAttr":"attr"]("data-app-remove-it","true");return b.style.display=d?"":"none"};rivets.binders.unless=function(b,c){return rivets.binders["if"](b,!c)};rivets.binders["content-edit"]={bind:function(b){var d=this,g="",f;this.callback=function(e){clearTimeout(f);f=setTimeout(function(){if(!e.isDefaultPrevented()){if("delete"!==e.type&&
e.relatedTarget){var f=g&&c(e.relatedTarget).parents().is(b),h=c(e.relatedTarget).parents(".note-mbr-link-dialog:eq(0)").length;if(f||h)return}f=b.innerHTML;g&&(f=mbrAppCore.cleanHTMLplease(f,!0));d.observer.setValue(f);mbrAppCore.fire("rivetsBlur",b)}},0)};if(c(b).is('[data-app-edit="buttons"]')||c(b).is('[data-app-edit="menu"]'))g="[data-app-btn]";setTimeout(function(){c(b).on("blur.rivets",g,d.callback);if(g)c(b).on("delete.rivets",d.callback)},0)},unbind:function(b){c(b).off(".rivets",this.callback)}}})(jQuery);
